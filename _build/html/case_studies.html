

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Case Studies (Illustrating the SDC Process) &mdash; SDC Practice Guide  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Acknowledgements" href="acknowledgements.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> SDC Practice Guide
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Content</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary_acr.html">Glossary and list of acronyms</a></li>
<li class="toctree-l1"><a class="reference internal" href="SDC_intro.html">Statistical Disclosure Control (SDC): An Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_types.html">Release Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="measure_risk.html">Measuring Risk</a></li>
<li class="toctree-l1"><a class="reference internal" href="anon_methods.html">Anonymization Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="utility.html">Measuring Utility and Information Loss</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdcMicro.html">SDC with <em>sdcMicro</em> in <em>R</em>: Setting Up Your Data and more</a></li>
<li class="toctree-l1"><a class="reference internal" href="process.html">The SDC Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
</ul>
<p class="caption"><span class="caption-text">Case studies</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Case Studies (Illustrating the SDC Process)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#case-study-1-suf">Case study 1- SUF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-1-need-for-disclosure-control">Step 1: Need for disclosure control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-2-data-preparation-and-exploring-data-characteristics">Step 2: Data preparation and exploring data characteristics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-3-type-of-release">Step 3: Type of release</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-4-intruder-scenarios-and-choice-of-key-variables">Step 4: Intruder scenarios and choice of key variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-5-data-key-uses-and-selection-of-utility-measures">Step 5: Data key uses and selection of utility measures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hierarchical-household-structure">Hierarchical (household) structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-6a-assessing-disclosure-risk-household-level">Step 6a: Assessing disclosure risk (household level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-7a-assessing-utility-measures-household-level">Step 7a: Assessing utility measures (household level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-8a-choice-and-application-of-sdc-methods-household-variables">Step 8a: Choice and application of SDC methods (household variables)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-9a-re-measure-risk">Step 9a: Re-measure risk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-10a-re-measure-utility">Step 10a: Re-measure utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-6b-assessing-disclosure-risk-individual-level">Step 6b: Assessing disclosure risk (individual level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-7b-assessing-utility-individual-level">Step 7b: Assessing utility (individual level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-8b-choice-and-application-of-sdc-methods-individual-level">Step 8b: Choice and application of SDC methods (individual level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-9b-re-measure-risk-individual-level">Step 9b: Re-measure risk (individual level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-10b-re-measure-utility-individual-level">Step 10b: Re-measure utility (individual level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-11-audit-and-reporting">Step 11: Audit and reporting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-12-data-release">Step 12: Data release</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#case-study-2-puf">Case study 2 - PUF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">Step 1: Need for disclosure control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">Step 2: Data preparation and exploring data characteristics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Step 3: Type of release</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Step 4: Intruder scenarios and choice of key variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">Step 5: Data key uses and selection of utility measures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">Step 6a: Assessing disclosure risk (household level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">Step 7a: Assessing utility measures (household level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-8a-choice-and-application-of-sdc-methods-household-level">Step 8a: Choice and application of SDC methods (household level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-9a-re-measure-risk-household-level">Step 9a: Re-measure risk (household level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-10a-re-measure-utility-household-level">Step 10a Re-measure utility (household level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">Step 6b: Assessing disclosure risk (individual level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-7b-assessing-utility-measures-individual-level">Step 7b: Assessing utility measures (individual level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">Step 8b: Choice and application of SDC methods (individual level)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-9b-re-measure-risk">Step 9b: Re-measure risk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-10b-re-measure-utility">Step 10b: Re-measure utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">Step 11: Audit and reporting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">Step 12: Data release</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SDC Practice Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Case Studies (Illustrating the SDC Process)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/case_studies.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="case-studies-illustrating-the-sdc-process">
<h1>Case Studies (Illustrating the SDC Process)<a class="headerlink" href="#case-studies-illustrating-the-sdc-process" title="Permalink to this headline">¶</a></h1>
<p>In order to evaluate the use of different SDC methods on different types
of survey datasets, we compared the results of the different methods
applied to 75 datasets from 52 countries representing six geographic
regions: Latin America and the Caribbean (LAC), Sub-Saharan Africa
(AFR), South Asia (SA), Europe and Central Asia (ECA), Middle East and
North Africa (MENA) as well as East Asia and the Pacific (EAP). The
datasets chosen were from a mix of datasets that are already publically
available, as well as data made available to the World Bank. The surveys used included, amongst others, household,
demographic, and health surveys. The variables from these surveys used
for the experiments were selected based on their relevance for users
(e.g., for indicators, MDGs), their sensitivity, and their classification
with respect to the SDC process.</p>
<p>The following case studies draw from knowledge gained from these
experiments and try to incorporate the lessons learned. The case studies
use synthetic data that mimic the structure of the survey types we used
in our experiments and present the anonymization of a dataset similar to
many surveys designed to measure household income and consumption, labor
force participation and general demographic characteristics. The first
case study creates a SUF, whereas in the second case study we take this
SUF and treat it further to create a PUF.</p>
<div class="section" id="case-study-1-suf">
<h2>Case study 1- SUF<a class="headerlink" href="#case-study-1-suf" title="Permalink to this headline">¶</a></h2>
<p>This case study shows an example of how the anonymization process might
be approached, particularly for a dataset with many continuous
variables. We also show how this can be achieved using the open source
and free <em>sdcMicro</em> package and <em>R</em>. A ready-to-run <em>R</em> script for this
case study and the dataset are also available to reproduce the results
and allow the user to adapt the code
(see&nbsp;<a class="reference external" href="http://ihsn.org/home/projects/sdc-practice">http://ihsn.org/home/projects/sdc-practice</a>). Extracts of this code
are presented in this section to illustrate several steps of the anonymization process.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The choices of methods and parameters in
this case study are based on this particular dataset and the results and
choices might be different for other datasets.</p>
</div>
<p>The aim is to show the process, not to compare methods per se.</p>
<p>This example uses a dataset with a similar structure to that of a
typical social survey with a focus on demographics, labor force
participation and income and expenditure patterns. The dataset has been
compiled using observations from several datasets from different
countries. They are considered synthetic data and as such are used only
for illustrative purposes. The source datasets were already treated for
disclosure control by their producers. This does not matter, as our
concern is to illustrate the process only. The data from which we
compiled our case study file was from surveys that contain many
variables, but pay particular attention to labor force variables as well
as household income and household expenditure variables. The variables
in the demo dataset have already been pre-selected from the total set of
variables available in the datasets. See
<a class="reference external" href="appendices.html#AppendixA:OverviewofCaseStudyVariables">Appendix A</a>
for the complete overview of all variables.</p>
<p>This case study follows the steps of the SDC process outlined in the Section
<a class="reference external" href="process.html">The SDC Process</a>.</p>
<div class="section" id="step-1-need-for-disclosure-control">
<h3>Step 1: Need for disclosure control<a class="headerlink" href="#step-1-need-for-disclosure-control" title="Permalink to this headline">¶</a></h3>
<p>The statistical units in this dataset are individuals and households.
The household structure provides a hierarchical structure in the data,
which should be taken into account when measuring risk and selecting
anonymization methods.</p>
<p>The data contains variables with demographic information, income,
expenditures, education variables and variables relating to the labor
status of the individual. These variables include sensitive and
confidential variables. The dataset is an example of a social survey
and, due to the nature of the statistical units and the variables,
disclosure control is needed before release of the microdata. This is
the case regardless of the legal framework, which is not specified here,
as this is a hypothetical dataset.</p>
</div>
<div class="section" id="step-2-data-preparation-and-exploring-data-characteristics">
<h3>Step 2: Data preparation and exploring data characteristics<a class="headerlink" href="#step-2-data-preparation-and-exploring-data-characteristics" title="Permalink to this headline">¶</a></h3>
<p>The first step is to explore the data. To analyze the data in <em>R</em> we
first have to read the data into <em>R</em>. In our case, the data is saved in
a <em>STATA</em> file (.dta file). To read <em>STATA</em> files, we need to load the <em>R</em>
package <em>foreign</em> (see the Section
<a class="reference external" href="sdcMicro.html#ReadfunctionsinR">Read functions in R</a>
on importing other data formats in
<em>R</em>). We also load the <em>sdcMicro</em> package and several other packages
used later for the computation of the utility measures. If these
packages are not yet installed, you should do so before trying to load
them. The <em>R</em> code for this case study demonstrates how to do this.</p>
<div class="literal-block-wrapper docutils container" id="code91">
<div class="code-block-caption"><span class="caption-number">Listing 55 </span><span class="caption-text">Loading required packages</span><a class="headerlink" href="#code91" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Load required packages</span>
<span class="kn">library</span><span class="p">(</span>foreign<span class="p">)</span>   <span class="c1"># for read/write function for STATA files</span>
<span class="kn">library</span><span class="p">(</span>sdcMicro<span class="p">)</span>  <span class="c1"># sdcMicro package with functions for the SDC process</span>
<span class="kn">library</span><span class="p">(</span>laeken<span class="p">)</span>    <span class="c1"># for GINI</span>
<span class="kn">library</span><span class="p">(</span>reldist<span class="p">)</span>   <span class="c1"># for GINI</span>
<span class="kn">library</span><span class="p">(</span>bootstrap<span class="p">)</span> <span class="c1"># for bootstrapping</span>
<span class="kn">library</span><span class="p">(</span>ineq<span class="p">)</span>      <span class="c1"># for Lorenz curves</span>
</pre></div>
</td></tr></table></div>
</div>
<p>After setting the working directory to the directory where the <em>STATA</em>
file is stored, we load the data into the object called <em>file</em>. All
output, unless otherwise specified, is saved in the working directory.</p>
<div class="literal-block-wrapper docutils container" id="code92">
<div class="code-block-caption"><span class="caption-number">Listing 56 </span><span class="caption-text">Loading the data</span><a class="headerlink" href="#code92" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#  Set working directory</span>
<span class="kp">setwd</span><span class="p">(</span><span class="s">&quot;C:/WorldBank/CaseStudy/&quot;</span><span class="p">)</span>

<span class="c1"># Specify file name</span>
fname <span class="o">&lt;-</span> <span class="s">&quot; case_1_data.dta&quot;</span>

<span class="c1"># Read-in file</span>
file <span class="o">&lt;-</span> read.dta<span class="p">(</span>fname<span class="p">,</span> convert.factors <span class="o">=</span> <span class="bp">F</span><span class="p">)</span> <span class="c1"># factors as numeric code</span>
</pre></div>
</td></tr></table></div>
</div>
<p>We check the number of variables, number of observations and variable
names, as shown in <a class="reference internal" href="#code93"><span class="std std-numref">Listing 57</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="code93">
<div class="code-block-caption"><span class="caption-number">Listing 57 </span><span class="caption-text">Number of individuals and variables and variable names</span><a class="headerlink" href="#code93" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kp">dim</span><span class="p">(</span><span class="kp">file</span><span class="p">)</span> <span class="c1"># Dimensions of file (observations, variables)</span>
<span class="c1">## [1] 10574 68</span>

<span class="kp">colnames</span><span class="p">(</span><span class="kp">file</span><span class="p">)</span> <span class="c1"># Variable names</span>
<span class="c1">##  [1] &quot;REGION&quot;        &quot;DIST&quot;          &quot;URBRUR&quot;        &quot;WGTHH&quot;</span>
<span class="c1">##  [5] &quot;WGTPOP&quot;        &quot;IDH&quot;           &quot;IDP&quot;           &quot;HHSIZE&quot;</span>
<span class="c1">##  [9] &quot;GENDER&quot;        &quot;REL&quot;           &quot;MARITAL&quot;       &quot;AGEYRS&quot;</span>
<span class="c1">## [13] &quot;AGEMTH&quot;        &quot;RELIG&quot;         &quot;ETHNICITY&quot;     &quot;LANGUAGE&quot;</span>
<span class="c1">## [17] &quot;MORBID&quot;        &quot;MEASLES&quot;       &quot;MEDATT&quot;        &quot;CHWEIGHTKG&quot;</span>
<span class="c1">## [21] &quot;CHHEIGHTCM&quot;    &quot;ATSCHOOL&quot;      &quot;EDUCY&quot;         &quot;EDYRS&quot;</span>
<span class="c1">## [25] &quot;EDYRSCURRAT&quot;   &quot;SCHTYP&quot;        &quot;LITERACY&quot;      &quot;EMPTYP1&quot;</span>
<span class="c1">## [29] &quot;UNEMP1&quot;        &quot;INDUSTRY1&quot;     &quot;EMPCAT1&quot;       &quot;WHOURSWEEK1&quot;</span>
<span class="c1">## [33] &quot;OWNHOUSE&quot;      &quot;ROOF&quot;          &quot;TOILET&quot;        &quot;ELECTCON&quot;</span>
<span class="c1">## [37] &quot;FUELCOOK&quot;      &quot;WATER&quot;         &quot;OWNAGLAND&quot;     &quot;LANDSIZEHA&quot;</span>
<span class="c1">## [41] &quot;OWNMOTORCYCLE&quot; &quot;CAR&quot;           &quot;TV&quot;            &quot;LIVESTOCK&quot;</span>
<span class="c1">## [45] &quot;INCRMT&quot;        &quot;INCWAGE&quot;       &quot;INCBONSOCALL&quot;  &quot;INCFARMBSN&quot;</span>
<span class="c1">## [49] &quot;INCNFARMBSN&quot;   &quot;INCRENT&quot;       &quot;INCFIN&quot;        &quot;INCPENSN&quot;</span>
<span class="c1">## [53] &quot;INCOTHER&quot;      &quot;INCTOTGROSSHH&quot; &quot;FARMEMP&quot;       &quot;THOUSEXP&quot;</span>
<span class="c1">## [57] &quot;TFOODEXP&quot;      &quot;TALCHEXP&quot;      &quot;TCLTHEXP&quot;      &quot;TFURNEXP&quot;</span>
<span class="c1">## [61] &quot;THLTHEXP&quot;      &quot;TTRANSEXP&quot;     &quot;TCOMMEXP&quot;      &quot;TRECEXP&quot;</span>
<span class="c1">## [65] &quot;TEDUEXP&quot;       &quot;TRESTHOTEXP&quot;   &quot;TMISCEXP&quot;      &quot;TANHHEXP&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The dataset has 10,574 individuals in 2,000 households and contains 68
variables. The survey corresponds to a population of about 4.3 million
individuals, which means that the sample is relatively small and the
sample weights are high. This has an impact on the disclosure risk, as
we will see in Steps 6a and 6b.</p>
<p>To get an overview of the values of the variables, we use tabulations
and cross-tabulations for categorical variables and summary statistics
for continuous variables. To include the number of missing values (NA or
other), we use the option useNA = “ifany” in the table() function (see <a class="reference internal" href="#code94"><span class="std std-numref">Listing 58</span></a>).</p>
<p>In <a class="reference internal" href="#tab91"><span class="std std-numref">Table 27</span></a> the variables in the dataset are listed along with concise
descriptions of the variables, the level at which they are collected
(individual (IND), household (HH)), the measurement type (continuous,
semi-continuous, categorical) and value ranges. Note that the dataset
contains a selection of 68 variables (cf. <a class="reference external" href="appendices.html#AppendixA:OverviewofCaseStudyVariables">Appendix A</a>) of a total of 112
variables in the survey dataset. The variables have been preselected
based on their relevance for data users. This allows to reduce the total
numbers of variables to consider in the anonymization process and makes
the process easier. The numerical values for many of the categorical
variables are codes that refer to values, e.g., in the variable URBRUR,
1 stands for rural and 2 for urban. More information on the meanings of
coded values of the categorical variables is available in the <em>R</em> code
for this case study.</p>
<p>We identified the following sensitive variables in the data: ETHNICITY,
RELIGION, variables related to the labor force status of the individual
and the variables containing information on income and expenditures of
the household. Whether variables can be identified as sensitive may vary
across countries and datasets.</p>
<p>The case study dataset does not have any direct identifiers that, if
they were present, would need to be removed at this stage. Examples of
direct identifiers would be names, telephone numbers, geographical
location coordinates, etc.</p>
<div class="literal-block-wrapper docutils container" id="code94">
<div class="code-block-caption"><span class="caption-number">Listing 58 </span><span class="caption-text">Tabulation of the variable ‘gender’ and summary statistics for the variable ‘total annual expenditures’ in <em>R</em></span><a class="headerlink" href="#code94" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># tabulation of variable GENDER (sex, categorical)</span>
<span class="kp">table</span><span class="p">(</span><span class="kp">file</span><span class="o">$</span>GENDER<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>
<span class="c1">##    0    1</span>
<span class="c1">## 5448 5126</span>

<span class="c1"># summary statistics for variable TANHHEXP (total annual household expenditures,</span>
<span class="c1"># continuous)</span>
<span class="kp">summary</span><span class="p">(</span><span class="kp">file</span><span class="o">$</span>TANHHEXP<span class="p">)</span>
<span class="c1">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.</span>
<span class="c1">##     498   15550   17290   28560   29720  353200</span>
</pre></div>
</td></tr></table></div>
</div>
<span id="tab91"></span><table border="1" class="colwidths-auto docutils align-center" id="id15">
<caption><span class="caption-number">Table 27 </span><span class="caption-text">Overview of variables in dataset</span><a class="headerlink" href="#id15" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">No.</th>
<th class="head">Variable name</th>
<th class="head">Description</th>
<th class="head">Level</th>
<th class="head">Measurement</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>IDH</td>
<td>Household ID</td>
<td>HH</td>
<td>.</td>
<td>1-2,000</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>IDP</td>
<td>Individual ID</td>
<td>IND</td>
<td>.</td>
<td>1-33</td>
</tr>
<tr class="row-even"><td>3</td>
<td>REGION</td>
<td>Region</td>
<td>HH</td>
<td>categorical</td>
<td>1-6</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>DISTRICT</td>
<td>District</td>
<td>HH</td>
<td>categorical</td>
<td>101-1105</td>
</tr>
<tr class="row-even"><td>5</td>
<td>URBRUR</td>
<td>Area of residence</td>
<td>HH</td>
<td>categorical</td>
<td>1, 2</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>WGTHH</td>
<td>Individual weighting coefficient</td>
<td>HH</td>
<td>weight</td>
<td>31.2-8495</td>
</tr>
<tr class="row-even"><td>7</td>
<td>WGTPOP</td>
<td>Population weighting coefficient</td>
<td>IND</td>
<td>weight</td>
<td>45.8-93452.2</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>HHSIZE</td>
<td>Household size</td>
<td>HH</td>
<td>semi-cont</td>
<td>1-33</td>
</tr>
<tr class="row-even"><td>9</td>
<td>GENDER</td>
<td>Gender</td>
<td>IND</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>REL</td>
<td>Relationship to household head</td>
<td>IND</td>
<td>categorical</td>
<td>1-9</td>
</tr>
<tr class="row-even"><td>11</td>
<td>MARITAL</td>
<td>Marital status</td>
<td>IND</td>
<td>categorical</td>
<td>1-6</td>
</tr>
<tr class="row-odd"><td>12</td>
<td>AGEYRS</td>
<td>Age in completed years</td>
<td>IND</td>
<td>semi-continuous</td>
<td>0-95 (under 1, 1/12 year increments)</td>
</tr>
<tr class="row-even"><td>13</td>
<td>AGEMTH</td>
<td>Age of child in completed years</td>
<td>IND</td>
<td>semi-continuous</td>
<td>1-1140</td>
</tr>
<tr class="row-odd"><td>14</td>
<td>RELIG</td>
<td>Religion of household head</td>
<td>HH</td>
<td>categorical</td>
<td>1, 5-7, 9</td>
</tr>
<tr class="row-even"><td>15</td>
<td>ETHNICITY</td>
<td>Ethnicity of household head</td>
<td>HH</td>
<td>categorical</td>
<td>all missing values</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>LANGUAGE</td>
<td>Language of household head</td>
<td>HH</td>
<td>categorical</td>
<td>all missing values</td>
</tr>
<tr class="row-even"><td>17</td>
<td>MORBID</td>
<td>Morbidity last x weeks</td>
<td>IND</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>18</td>
<td>MEASLES</td>
<td>Child immunized against measles</td>
<td>IND</td>
<td>categorical</td>
<td>0, 1, 9</td>
</tr>
<tr class="row-even"><td>19</td>
<td>MEDATT</td>
<td>Sought medical attention</td>
<td>IND</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>CHWEIGHTKG</td>
<td>Weight of child (Kg)</td>
<td>IND</td>
<td>continuous</td>
<td>2 – 26.5</td>
</tr>
<tr class="row-even"><td>21</td>
<td>CHHEIGHTCM</td>
<td>Height of child (cms)</td>
<td>IND</td>
<td>continuous</td>
<td>7 - 140</td>
</tr>
<tr class="row-odd"><td>22</td>
<td>ATSCHOOL</td>
<td>Currently enrolled in school</td>
<td>IND</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-even"><td>23</td>
<td>EDUCY</td>
<td>Highest
level of education attended</td>
<td>IND</td>
<td>categorical</td>
<td>1-6</td>
</tr>
<tr class="row-odd"><td>24</td>
<td>EDYEARS</td>
<td>Years of education</td>
<td>IND</td>
<td>semi-continuous</td>
<td>0-18</td>
</tr>
<tr class="row-even"><td>25</td>
<td>EDYRSCURRAT</td>
<td>Years of education
for currently enrolled</td>
<td>IND</td>
<td>semi-continuous</td>
<td>1-18</td>
</tr>
<tr class="row-odd"><td>26</td>
<td>SCHTYP</td>
<td>Type of
school attending</td>
<td>IND</td>
<td>categorical</td>
<td>1-3, 9</td>
</tr>
<tr class="row-even"><td>27</td>
<td>LITERACY</td>
<td>Literacy</td>
<td>IND</td>
<td>categorical</td>
<td>1-3</td>
</tr>
<tr class="row-odd"><td>28</td>
<td>EMPTYP1</td>
<td>Type of employment</td>
<td>IND</td>
<td>categorical</td>
<td>1-9</td>
</tr>
<tr class="row-even"><td>29</td>
<td>UNEMP1</td>
<td>Unemployed</td>
<td>IND</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>30</td>
<td>INDUSTRY1</td>
<td>Industry
classification (1-digit)</td>
<td>IND</td>
<td>categorical</td>
<td>1-10</td>
</tr>
<tr class="row-even"><td>31</td>
<td>EMPCAT1</td>
<td>Employment categories</td>
<td>IND</td>
<td>categorical</td>
<td>11, 12, 13, 14, 21, 22</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>WHOURSLASTWEEK1</td>
<td>Hours worked last week</td>
<td>IND</td>
<td>continuous</td>
<td>0-154</td>
</tr>
<tr class="row-even"><td>33</td>
<td>OWNHOUSE</td>
<td>Ownership of dwelling</td>
<td>HH</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>34</td>
<td>ROOF</td>
<td>Main material used for roof</td>
<td>IND</td>
<td>categorical</td>
<td>1-5, 9</td>
</tr>
<tr class="row-even"><td>35</td>
<td>TOILET</td>
<td>Main toilet facility</td>
<td>HH</td>
<td>categorical</td>
<td>1-4, 9</td>
</tr>
<tr class="row-odd"><td>36</td>
<td>ELECTCON</td>
<td>Electricity</td>
<td>HH</td>
<td>categorical</td>
<td>0-3</td>
</tr>
<tr class="row-even"><td>37</td>
<td>FUELCOOK</td>
<td>Main cooking fuel</td>
<td>HH</td>
<td>categorical</td>
<td>1-5, 9</td>
</tr>
<tr class="row-odd"><td>38</td>
<td>WATER</td>
<td>Main source of water</td>
<td>HH</td>
<td>categorical</td>
<td>1-9</td>
</tr>
<tr class="row-even"><td>39</td>
<td>OWNAGLAND</td>
<td>Ownership of agricultural land</td>
<td>HH</td>
<td>categorical</td>
<td>1-3</td>
</tr>
<tr class="row-odd"><td>40</td>
<td>LANDSIZEHA</td>
<td>Land size owned by household
(ha) (agric and non agric)</td>
<td>HH</td>
<td>continuous</td>
<td>0-1214</td>
</tr>
<tr class="row-even"><td>41</td>
<td>OWNMOTORCYCLE</td>
<td>Ownership of motorcycle</td>
<td>HH</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>42</td>
<td>CAR</td>
<td>Ownership of car</td>
<td>HH</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-even"><td>43</td>
<td>TV</td>
<td>Ownership of television</td>
<td>HH</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>44</td>
<td>LIFESTOCK</td>
<td>Number of
large-sized livestock owned</td>
<td>HH</td>
<td>semi-continuous</td>
<td>0-25</td>
</tr>
<tr class="row-even"><td>45</td>
<td>INCRMT</td>
<td>Income – Remittances</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>46</td>
<td>INCWAGE</td>
<td>Income - Wages and salaries</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>47</td>
<td>INCBONSOCAL</td>
<td>Income - Bonuses and social
allowances derived from wage jobs</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>48</td>
<td>INCFARMBSN</td>
<td>Income - Gross income
from household farm businesses</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>49</td>
<td>INCNFARMBSN</td>
<td>Income - Gross income from
household nonfarm businesses</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>50</td>
<td>INCRENT</td>
<td>Income - Rent</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>51</td>
<td>INCFIN</td>
<td>Income - Financial</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>52</td>
<td>INCPENSN</td>
<td>Income - Pensions/social assistance</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>53</td>
<td>INCOTHER</td>
<td>Income - Other</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>54</td>
<td>INCTOTGROSHH</td>
<td>Income - Total</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>55</td>
<td>FARMEMP</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>56</td>
<td>TFOODEXP</td>
<td>Total expenditure on food</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>57</td>
<td>TALCHEXP</td>
<td>Total expenditure on alcoholic
beverages, tobacco and narcotics</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>58</td>
<td>TCLTHEXP</td>
<td>Total expenditure on clothing</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>59</td>
<td>THOUSEXP</td>
<td>Total expenditure on housing</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>60</td>
<td>TFURNEXP</td>
<td>Total expenditure on furnishing</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>61</td>
<td>THLTHEXP</td>
<td>Total expenditure on health</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>62</td>
<td>TTRANSEXP</td>
<td>Total expenditure on transport</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>63</td>
<td>TCOMMEXP</td>
<td>Total expenditure on communication</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>64</td>
<td>TRECEXP</td>
<td>Total expenditure on recreation</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>65</td>
<td>TEDUEXP</td>
<td>Total expenditure on education</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>66</td>
<td>TRESHOTEXP</td>
<td>Total expenditure on restaurants
and hotels</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>67</td>
<td>TMISCEXP</td>
<td>Total expenditure on
miscellaneous spending</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>68</td>
<td>TANHHEXP</td>
<td>Total annual nominal household
expenditures</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>It is always important to ensure that the relationships between
variables in the data are preserved during the anonymization process and
to explore and take note of these relationships before beginning the
anonymization. In the final step in the anonymization process, an audit
should be conducted, using these initial results, to check that these
relationships are maintained in the anonymized dataset.</p>
<p>In our demo dataset, we identify several relationships between variables
that need to be preserved during the anonymization process. The
variables TANHHEXP and INCTOTGROSSHH represent the total annual nominal
household expenditure and the total gross annual household income,
respectively, and these variables are aggregations of existing income
and expenditure components in the dataset.</p>
<p>The variables related to education are available only for individuals in
the appropriate age groups and missing for other individuals. We make a
similar observation for variables relating to children, such as height,
weight and age in months. In addition, the household-level variables
(cf. fourth column of <a class="reference internal" href="#tab91"><span class="std std-numref">Table 27</span></a>) have the same values for all members in
any particular household. The value of household size corresponds to the
actual number of individuals belonging to that household in the dataset.
As we proceed, we have to take care that these relationships and
structures are preserved in the anonymization process.</p>
<p>When tabulating the variables, we notice that the variables RELIG,
EMPTYP1 and LIVESTOCK have missing value codes different from the <em>R</em>
standard missing value code NA. Before proceeding, we need to recode
these to NA so <em>R</em> interprets them correctly. The missing value codes
are resp. 99999, 99 and 9999 for these three variables. These are
genuine missing value codes and not caused by the variables being not
applicable to the individual. <a class="reference internal" href="#code95"><span class="std std-numref">Listing 59</span></a> shows how to make these
changes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">At the end of the anonymization process, and if desired
for users, it is relatively easy to change these values back to their
original missing value code.</p>
</div>
<div class="literal-block-wrapper docutils container" id="code95">
<div class="code-block-caption"><span class="caption-number">Listing 59 </span><span class="caption-text">Recoding missing value codes</span><a class="headerlink" href="#code95" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Set different NA codes to R missing value NA</span>
<span class="kp">file</span><span class="p">[,</span><span class="s">&#39;RELIG&#39;</span><span class="p">][</span><span class="kp">file</span><span class="p">[,</span><span class="s">&#39;RELIG&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="m">99999</span><span class="p">]</span>        <span class="o">&lt;-</span> <span class="kc">NA</span>
<span class="kp">file</span><span class="p">[,</span><span class="s">&#39;EMPTYP1&#39;</span><span class="p">][</span><span class="kp">file</span><span class="p">[,</span><span class="s">&#39;EMPTYP1&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="m">99</span><span class="p">]</span>       <span class="o">&lt;-</span> <span class="kc">NA</span>
<span class="kp">file</span><span class="p">[,</span><span class="s">&#39;LIVESTOCK&#39;</span><span class="p">][</span><span class="kp">file</span><span class="p">[,</span><span class="s">&#39;LIVESTOCK&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="m">9999</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="kc">NA</span>
</pre></div>
</td></tr></table></div>
</div>
<p>We also take note that the variables LANGUAGE and ETHNICITY have only
missing values. Variables that contain only missing values should be
removed from the dataset at this stage and excluded from the
anonymization process. Removing these variables does not mean loss of
data or reduction of the data utility, since these variables did not
contain any information. It is, however, necessary to remove them,
because keeping them can lead to errors in some of the anonymization
methods in <em>R</em>. It is always possible to add these variables back into
the dataset to be released at the end of the anonymization process. It
is useful to reduce the dataset to those variables and records relevant
for the anonymization process. This guarantees the best results in <em>R</em>
and fewer errors. In <a class="reference internal" href="#code96"><span class="std std-numref">Listing 60</span></a> we drop the variables that contain all
missing values.</p>
<div class="literal-block-wrapper docutils container" id="code96">
<div class="code-block-caption"><span class="caption-number">Listing 60 </span><span class="caption-text">Dropping variables with only missing values</span><a class="headerlink" href="#code96" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Drop variables containing only missings</span>
file <span class="o">&lt;-</span> <span class="kp">file</span><span class="p">[,</span><span class="o">!</span><span class="kp">names</span><span class="p">(</span><span class="kp">file</span><span class="p">)</span> <span class="o">%in%</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;LANGUAGE&#39;</span><span class="p">,</span> <span class="s">&#39;ETHNICITY&#39;</span><span class="p">)]</span>
</pre></div>
</td></tr></table></div>
</div>
<p>We assume that the data are collected in a survey that uses simple
sampling of households. The data contains two weight coefficients: WGTHH
and WGTPOP. The relationship between the weights is WGTPOP = WGTHH *
HHSIZE. WGTPOP is the sampling weight for the households and WGTHH is
the sampling weight for the individuals to be used for disclosure risk
calculations. WGTHH is used for computing individual-level indicators
(such as education) and WGTPOP is used for population level indicators
(such as income indicators). There are no strata variables available in
the data. We will use WGTPOP for the anonymization of the household
variables and WGTHH for the anonymization of the individual-level
variables.</p>
</div>
<div class="section" id="step-3-type-of-release">
<h3>Step 3: Type of release<a class="headerlink" href="#step-3-type-of-release" title="Permalink to this headline">¶</a></h3>
<p>In this case study, we assume that data will be released as a SUF, which
will be only available under license to accredited researchers with
approved research proposals (see the Section
<a class="reference external" href="release_types.html#ConditionsforSUFs">Conditions for SUFs</a>
for more information of the
release of a SUF). Therefore, the accepted risk level is higher and a
broader set of variables can be released than would be the case when
releasing a PUF. Since we do not have an overview of the requirements of
all users, we restrict the utility measures to a selected number of data
uses (see Step 5).</p>
</div>
<div class="section" id="step-4-intruder-scenarios-and-choice-of-key-variables">
<h3>Step 4: Intruder scenarios and choice of key variables<a class="headerlink" href="#step-4-intruder-scenarios-and-choice-of-key-variables" title="Permalink to this headline">¶</a></h3>
<p>Next, we analyze possible intruder scenarios and select
quasi-identifiers or key variables based on these scenarios. Since the
dataset used in this case study is a demo dataset that does not stem
from an existing country (and hence we do not have information on
external data sources available to possible intruders) and the original
data has already been anonymized, it is not possible to define exact
disclosure scenarios. Instead, we draft intruder scenarios for this demo
dataset based on some hypothetical assumptions about availability of
external data sources. We consider two types of disclosure scenarios: 1)
matching to other publicly available datasets and 2) spontaneous
recognition. The license under which the dataset will be distributed
(SUF) prohibits matching to external resources. Still this can happen.
However, the more important scenario is the one of spontaneous
recognition. We describe both scenarios in the following two paragraphs.</p>
<p>For the sake of illustration, we assume that population registers are
available with the demographic variables gender, age, place of residence
(region, urban/rural), religion and other variables such as marital
status and variables relating to education and professional status that
are also present in our dataset. In addition, we assume that there is a
publically available cadastral register on land ownership. Based on this
analysis of available data sources, we select the variables REGION,
URBRUR, HHSIZE, OWNAGLAND, RELIG, GENDER, REL (relationship to household
head), MARITAL (marital status), AGEYRS, INDUSTRY1 and two variables
relating to school attendance as categorical quasi-identifiers, the
expenditure and income variables as well as LANDSIZEHA as continuous
quasi-identifiers. According to our assessment, these variables might
enable an intruder to re-identify an individual or household in the
dataset by matching with other available datasets.</p>
<p><a class="reference internal" href="#tab92"><span class="std std-numref">Table 28</span></a> gives an overview of the selected quasi-identifiers and their
levels of measurement.</p>
<p>The decision to release the dataset as a SUF means the level of
anonymization will be relatively low and consequently, the variables are
more detailed and a scenario of spontaneous recognition is our main
concern. Therefore, we should check for rare combinations or unusual
patterns in the variables. Variables that may lead to spontaneous
recognition in our sample are amongst others HHSIZE (household size),
LANDSIZEHA as well as income and expenditure variables. Large households
and large land ownership are easily identifiable. The same holds for
extreme outliers in wealth and expenditure variables, especially when
combined with other identifying variables such as region. There might be
only one or a few households in a certain region with a high income,
such as the local doctor. Variables that are easily observable and known
by neighbors such as ROOF, TOILET, WATER, ELECTCON, FUELCOOK,
OWNMOTORCYCLE, CAR, TV and LIVESTOCK may also need protection depending
on what stands out in the community, since a researcher might be able to
identify persons (s)he knows. This is called the nosy-neighbor scenario.</p>
<span id="tab92"></span><table border="1" class="colwidths-auto docutils align-center" id="id16">
<caption><span class="caption-number">Table 28 </span><span class="caption-text">List of selected quasi-identifiers</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Measurement</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>REGION (region)</td>
<td>Household, categorical</td>
</tr>
<tr class="row-odd"><td>URBRUR (area of residence)</td>
<td>Household, categorical</td>
</tr>
<tr class="row-even"><td>HHSIZE (household size)</td>
<td>Household, categorical</td>
</tr>
<tr class="row-odd"><td>OWNAGLAND (agricultural land ownership)</td>
<td>Household, categorical</td>
</tr>
<tr class="row-even"><td>RELIG (religion of household  head)</td>
<td>Household, categorical</td>
</tr>
<tr class="row-odd"><td>LANDSIZEHA (size of agr. and non-agr. land)</td>
<td>Household, continuous</td>
</tr>
<tr class="row-even"><td>TANHHEXP (total expenditures)</td>
<td>Household, continuous</td>
</tr>
<tr class="row-odd"><td>TEXP (expenditures in category)</td>
<td>Household, continuous</td>
</tr>
<tr class="row-even"><td>INCTOTGROSSHH (total income)</td>
<td>Household, continuous</td>
</tr>
<tr class="row-odd"><td>INC (income in category)</td>
<td>Household, continuous</td>
</tr>
<tr class="row-even"><td>GENDER (sex)</td>
<td>Individual, categorical</td>
</tr>
<tr class="row-odd"><td>REL (relationship to household head)</td>
<td>Individual, categorical</td>
</tr>
<tr class="row-even"><td>MARITAL (marital status)</td>
<td>Individual, categorical</td>
</tr>
<tr class="row-odd"><td>AGEYRS (age in completed years)</td>
<td>Individual, semi-continuous</td>
</tr>
<tr class="row-even"><td>EDYRSCURATT (years of education for currently enrolled)</td>
<td>Individual, semi-continuous</td>
</tr>
<tr class="row-odd"><td>EDUCY (highest level of education completed)</td>
<td>Individual, categorical</td>
</tr>
<tr class="row-even"><td>ATSCHOOL (currently enrolled in school)</td>
<td>Individual, categorical</td>
</tr>
<tr class="row-odd"><td>INDUSTRY1 (industry classification)</td>
<td>Individual, categorical</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="step-5-data-key-uses-and-selection-of-utility-measures">
<h3>Step 5: Data key uses and selection of utility measures<a class="headerlink" href="#step-5-data-key-uses-and-selection-of-utility-measures" title="Permalink to this headline">¶</a></h3>
<p>In this case study, our aim is to create a SUF that provides sufficient
information for accredited researchers. We know that the primary use of
these data will be to evaluate indicators relating to income and
inequality. Examples are the GINI coefficient and indicators on what
share of income is spent on what type of expenditures. Furthermore, we
focus on some education indicators. <a class="reference internal" href="#tab93"><span class="std std-numref">Table 29</span></a> gives an overview of the
utility measures we selected. Besides these utility measures, which are
specific to the data uses, we also do standard checks, such as comparing
tabulations, cross-tabulations and summary statistics before and after
anonymization.</p>
<span id="tab93"></span><table border="1" class="colwidths-auto docutils align-center" id="id17">
<caption><span class="caption-number">Table 29 </span><span class="caption-text">Overview of selected utility measures</span><a class="headerlink" href="#id17" title="Permalink to this table">¶</a></caption>
<tbody valign="top">
<tr class="row-odd"><td>Gini point estimates and confidence intervals for total expenditures</td>
<td>.</td>
</tr>
<tr class="row-even"><td>Lorenz curves for total expenditures</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Mean monthly per capita total expenditures by area of residence</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Average share of components for expenditures</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Mean monthly per capita total income by area of residence</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Average share of components for income</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Net enrollment in primary education by gender</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>There are no published figures and statistics available that are
calculated from this dataset because it is a demo. In general, the
published figures should be re-computed based on the anonymized dataset
and compared to the published figures in Step 11. Large differences
would reduce the credibility of the anonymized dataset.</p>
</div>
<div class="section" id="hierarchical-household-structure">
<h3>Hierarchical (household) structure<a class="headerlink" href="#hierarchical-household-structure" title="Permalink to this headline">¶</a></h3>
<p>Our demo survey collects data on individuals in households. The
household structure is important for data users and should be considered
in the risk assessment. Since some variables are measured on the
household level and thus have identical values for each household
member, the values of the household variables should be treated in the
same way for each household member (see the Section
<a class="reference external" href="anon_methods.html#Anonymizationofthequasi-identifierhouseholdsize">Anonymization of the quasi-identifier household size</a>).
Therefore, we
first anonymize only the household variables. After this, we merge them
with the individual-level variables and then anonymize the
individual-level and household-level variables jointly.</p>
<p>Since the data has a hierarchical structure, Steps 6 through 10 are
repeated twice: Steps 6a through 10a are for the household-level
variables and Steps 6b through 10b for the combined dataset. In this
way, we ensure that household-level variable values remain consistent
across household members for each household and the household structure
cannot be used to re-identify individuals. This is further explained in
the Sections <a class="reference external" href="measure_risk.html#Levelsofrisk">Levels of risk</a>
and <a class="reference external" href="sdcMicro.html#Randomizingorderandnumberingofindividualsorhouseholds">Randomizing order and numbering of individuals or households</a> .</p>
<p>Before continuing to Step 6a, we select the categorical key variables,
continuous key variables and any variables selected for use in PRAM
routines, as well as household-level sampling weights. We extract these
selected household variables and the households from the dataset and
save them as <em>fileHH</em>. The choice of PRAM variables is further explained
in Step 8a. <a class="reference internal" href="#code97"><span class="std std-numref">Listing 61</span></a> illustrates how these steps are done in <em>R</em> (see
also the Section <a class="reference external" href="sdcMicro.html#Householdstructure">Household structure</a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In our dataset, some of the categorical variables when imported from the STATA file were not imported as
factors. sdcMicro requires that these be converted to factors before
proceeding.</p>
</div>
<p>Conversion of these variables to factors is also shown in <a class="reference internal" href="#code97"><span class="std std-numref">Listing 61</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="code97">
<div class="code-block-caption"><span class="caption-number">Listing 61 </span><span class="caption-text">Selecting the variables for the household-level anonymization</span><a class="headerlink" href="#code97" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">### Select variables (household level)</span>
<span class="c1"># Key variables (household level)</span>
selectedKeyVarsHH <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;URBRUR&#39;</span><span class="p">,</span> <span class="s">&#39;REGION&#39;</span><span class="p">,</span> <span class="s">&#39;HHSIZE&#39;</span><span class="p">,</span> <span class="s">&#39;OWNHOUSE&#39;</span><span class="p">,</span>
                      <span class="s">&#39;OWNAGLAND&#39;</span><span class="p">,</span> <span class="s">&#39;RELIG&#39;</span><span class="p">)</span>

<span class="c1"># Changing variables to class factor</span>
<span class="kp">file</span><span class="o">$</span>URBRUR    <span class="o">&lt;-</span> <span class="kp">as.factor</span><span class="p">(</span><span class="kp">file</span><span class="o">$</span>URBRUR<span class="p">)</span>
<span class="kp">file</span><span class="o">$</span>REGION    <span class="o">&lt;-</span> <span class="kp">as.factor</span><span class="p">(</span><span class="kp">file</span><span class="o">$</span>REGION<span class="p">)</span>
<span class="kp">file</span><span class="o">$</span>OWNHOUSE  <span class="o">&lt;-</span> <span class="kp">as.factor</span><span class="p">(</span><span class="kp">file</span><span class="o">$</span>OWNHOUSE<span class="p">)</span>
<span class="kp">file</span><span class="o">$</span>OWNAGLAND <span class="o">&lt;-</span> <span class="kp">as.factor</span><span class="p">(</span><span class="kp">file</span><span class="o">$</span>OWNAGLAND<span class="p">)</span>
<span class="kp">file</span><span class="o">$</span>RELIG     <span class="o">&lt;-</span> <span class="kp">as.factor</span><span class="p">(</span><span class="kp">file</span><span class="o">$</span>RELIG<span class="p">)</span>

<span class="c1"># Numerical variables</span>
numVarsHH <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;LANDSIZEHA&#39;</span><span class="p">,</span> <span class="s">&#39;TANHHEXP&#39;</span><span class="p">,</span>   <span class="s">&#39;TFOODEXP&#39;</span><span class="p">,</span>      <span class="s">&#39;TALCHEXP&#39;</span><span class="p">,</span>
              <span class="s">&#39;TCLTHEXP&#39;</span><span class="p">,</span>   <span class="s">&#39;THOUSEXP&#39;</span><span class="p">,</span>   <span class="s">&#39;TFURNEXP&#39;</span><span class="p">,</span>      <span class="s">&#39;THLTHEXP&#39;</span><span class="p">,</span>
              <span class="s">&#39;TTRANSEXP&#39;</span><span class="p">,</span>  <span class="s">&#39;TCOMMEXP&#39;</span><span class="p">,</span>   <span class="s">&#39;TRECEXP&#39;</span><span class="p">,</span>       <span class="s">&#39;TEDUEXP&#39;</span><span class="p">,</span>
              <span class="s">&#39;TRESHOTEXP&#39;</span><span class="p">,</span> <span class="s">&#39;TMISCEXP&#39;</span><span class="p">,</span>   <span class="s">&#39;INCTOTGROSSHH&#39;</span><span class="p">,</span> <span class="s">&#39;INCRMT&#39;</span><span class="p">,</span>
              <span class="s">&#39;INCWAGE&#39;</span><span class="p">,</span>    <span class="s">&#39;INCFARMBSN&#39;</span><span class="p">,</span> <span class="s">&#39;INCNFARMBSN&#39;</span><span class="p">,</span>   <span class="s">&#39;INCRENT&#39;</span><span class="p">,</span>
              <span class="s">&#39;INCFIN&#39;</span><span class="p">,</span>     <span class="s">&#39;INCPENSN&#39;</span><span class="p">,</span>   <span class="s">&#39;INCOTHER&#39;</span><span class="p">)</span>
<span class="c1"># PRAM variables</span>
pramVarsHH <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;ROOF&#39;</span><span class="p">,</span> <span class="s">&#39;TOILET&#39;</span><span class="p">,</span> <span class="s">&#39;WATER&#39;</span><span class="p">,</span> <span class="s">&#39;ELECTCON&#39;</span><span class="p">,</span>
               <span class="s">&#39;FUELCOOK&#39;</span><span class="p">,</span> <span class="s">&#39;OWNMOTORCYCLE&#39;</span><span class="p">,</span> <span class="s">&#39;CAR&#39;</span><span class="p">,</span> <span class="s">&#39;TV&#39;</span><span class="p">,</span> <span class="s">&#39;LIVESTOCK&#39;</span><span class="p">)</span>

<span class="c1"># sample weight (WGTPOP) (household)</span>
weightVarHH <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;WGTPOP&#39;</span><span class="p">)</span>

<span class="c1"># All household level variables</span>
HHVars <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;HID&#39;</span><span class="p">,</span> selectedKeyVarsHH<span class="p">,</span> pramVarsHH<span class="p">,</span> numVarsHH<span class="p">,</span> weightVarHH<span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>We then extract these variables from <em>file</em>, the dataframe in <em>R</em> that
contains all variables. Every household has the same number of entries
as it has members (e.g., a household of three will be repeated three
times in <em>fileHH</em>). Before analyzing the household-level variables, we
select only one entry per household, as illustrated in <a class="reference internal" href="#code98"><span class="std std-numref">Listing 62</span></a>. This
is further explained in the Section <a class="reference external" href="sdcMicro.html#Householdstructure">Household structure</a>.</p>
<div class="literal-block-wrapper docutils container" id="code98">
<div class="code-block-caption"><span class="caption-number">Listing 62 </span><span class="caption-text">Taking a subset with only households</span><a class="headerlink" href="#code98" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Create subset of file with households and HH variables</span>
fileHH <span class="o">&lt;-</span> <span class="kp">file</span><span class="p">[,</span>HHVars<span class="p">]</span>

<span class="c1"># Remove duplicated rows based on IDH, select uniques,</span>
<span class="c1"># one row per household in fileHH</span>
fileHH <span class="o">&lt;-</span> fileHH<span class="p">[</span><span class="kp">which</span><span class="p">(</span><span class="o">!</span><span class="kp">duplicated</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">)),]</span>

<span class="kp">dim</span><span class="p">(</span>fileHH<span class="p">)</span>
<span class="c1">## [1] 2000   39</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The file <em>fileHH</em> contains 2,000 households and 39 variables. We are now
ready to create our <em>sdcMicro</em> object with the corresponding variables
we selected in <a class="reference internal" href="#code97"><span class="std std-numref">Listing 61</span></a>. For our case study, we will create an
<em>sdcMicro</em> object called <em>sdcHH</em> based on the data in <em>fileHH</em>, which we
will use for steps 6a – 10a (see <a class="reference internal" href="#code99"><span class="std std-numref">Listing 63</span></a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When the sdcMicro object is created, the sdcMicro package automatically calculates and
stores the risk measures for the data.</p>
</div>
<p>This leads us to Step 6a.</p>
<div class="literal-block-wrapper docutils container" id="code99">
<div class="code-block-caption"><span class="caption-number">Listing 63 </span><span class="caption-text">Creating a <em>sdcMicro</em> object for the household variables</span><a class="headerlink" href="#code99" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Create initial SDC object for household level variables</span>
sdcHH <span class="o">&lt;-</span> createSdcObj<span class="p">(</span>dat <span class="o">=</span> fileHH<span class="p">,</span> keyVars <span class="o">=</span> selectedKeyVarsHH<span class="p">,</span> pramVars <span class="o">=</span> pramVarsHH<span class="p">,</span>
                      weightVar <span class="o">=</span> weightVarHH<span class="p">,</span> numVars <span class="o">=</span> numVarsHH<span class="p">)</span>

numHH <span class="o">&lt;-</span> <span class="kp">length</span><span class="p">(</span>fileHH<span class="p">[,</span><span class="m">1</span><span class="p">])</span> <span class="c1"># number of households</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="step-6a-assessing-disclosure-risk-household-level">
<h3>Step 6a: Assessing disclosure risk (household level)<a class="headerlink" href="#step-6a-assessing-disclosure-risk-household-level" title="Permalink to this headline">¶</a></h3>
<p>As a first measure, we evaluate the number of households violating
k-anonymity at the levels 2, 3 and 5.</p>
<p><a class="reference internal" href="#tab94"><span class="std std-numref">Table 30</span></a> shows the number of violating households as well as the
percentage of the total number of households. <a class="reference internal" href="#code910"><span class="std std-numref">Listing 64</span></a> illustrates
how to find these values with <em>sdcMicro</em>. The print() function in
<em>sdcMicro</em> shows only the values for thresholds 2 and 3. Values for
other thresholds can be calculated manually by summing up the
frequencies smaller than the k-anonymity threshold, as shown in <a class="reference internal" href="#code910"><span class="std std-numref">Listing 64</span></a>.</p>
<span id="tab94"></span><table border="1" class="colwidths-auto docutils align-center" id="id18">
<caption><span class="caption-number">Table 30 </span><span class="caption-text">Number and proportion of households violating k-anonymity</span><a class="headerlink" href="#id18" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">k-anonymity level</th>
<th class="head">Number of HH violating</th>
<th class="head">Percentage of total number of HH</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>103</td>
<td>5.15 %</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>229</td>
<td>11.45 %</td>
</tr>
<tr class="row-even"><td>5</td>
<td>489</td>
<td>24.45 %</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="code910">
<div class="code-block-caption"><span class="caption-number">Listing 64 </span><span class="caption-text">Showing number of households violating k-anonymity for levels 2, 3 and 5</span><a class="headerlink" href="#code910" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Number of observations violating k-anonymity (thresholds 2 and 3)</span>
<span class="kp">print</span><span class="p">(</span>sdcHH<span class="p">)</span>
<span class="c1">## Infos on 2/3-Anonymity:</span>
<span class="c1">##</span>
<span class="c1">## Number of observations violating</span>
<span class="c1">##  - 2-anonymity: 103</span>
<span class="c1">##  - 3-anonymity: 229</span>
<span class="c1">##</span>
<span class="c1">## Percentage of observations violating</span>
<span class="c1">##  - 2-anonymity: 5.150 %</span>
<span class="c1">##  - 3-anonymity: 11.450 %</span>
<span class="o">--------------------------------------------------------------------------</span>

<span class="c1"># Calculate sample frequencies and count number of obs. violating k(5) - anonymity</span>
kAnon5 <span class="o">&lt;-</span> <span class="kp">sum</span><span class="p">(</span>sdcHH<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="m">5</span><span class="p">)</span>

kAnon5
<span class="c1">## [1] 489</span>

<span class="c1"># As percentage of total</span>
kAnon5 <span class="o">/</span> numHH
<span class="c1">## [1] 0.2445</span>
</pre></div>
</td></tr></table></div>
</div>
<p>It is often useful to view the values for the household(s) that violate
<span class="math notranslate nohighlight">\(k\)</span>-anonymity. This might help clarify which variables cause the
uniqueness of these households; this can then be used later when
choosing appropriate SDC methods. <a class="reference internal" href="#code911"><span class="std std-numref">Listing 65</span></a> shows how to assess the
values of the households violating 3- and 5-anonymity. It seems that
among the categorical key variables, the variable HHSIZE is responsible
for many of the unique combinations and the origin of much of the risk.
Having determined this, we can flag HHSIZE as a possible first variable
to treat to obtain the required risk level. In practice, with a variable
like HHSIZE, this will likely involve removing large households from the
dataset to be released. As explained in the Section
<a class="reference external" href="anon_methods.html#Anonymizationofthequasi-identifierhouseholdsize">Anonymization of the quasi-identifier household size</a>
, recoding and local
suppression are no valid options for the variable HHSIZE. The
frequencies of household size in <a class="reference internal" href="#tab97"><span class="std std-numref">Table 33</span></a> show that there
are few households with more than 13 household members. This makes these
households easily identifiable based on the number of household members
and at high risk of re-identification, also in the context of the nosy
neighbor scenario.</p>
<div class="literal-block-wrapper docutils container" id="code911">
<div class="code-block-caption"><span class="caption-number">Listing 65 </span><span class="caption-text">Showing households that violate <span class="math notranslate nohighlight">\(k\)</span>-anonymity</span><a class="headerlink" href="#code911" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Show values of key variable of records that violate k-anonymity</span>
fileHH<span class="p">[</span>sdcHH<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="m">3</span><span class="p">,</span> selectedKeyVarsHH<span class="p">]</span> <span class="c1"># for 3-anonymity</span>
fileHH<span class="p">[</span>sdcHH<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="m">5</span><span class="p">,</span> selectedKeyVarsHH<span class="p">]</span> <span class="c1"># for 5-anonymity</span>
</pre></div>
</td></tr></table></div>
</div>
<p>We also assess the disclosure risk of the categorical variables with the
individual and global risk measures as described in the Sections
<a class="reference external" href="measure_risk.html#Individualrisk">Individual risk</a> and
<a class="reference external" href="measure_risk.html#Globalrisk">Global risk</a>.
In <em>fileHH</em> every entry represents a household. Therefore, we use
the individual non-hierarchical risk here, where the individual refers
in this case to a household. <em>fileHH</em> contains only households and has
no hierarchical structure. In Step 6b, we evaluate the hierarchical risk
in <em>file</em>, the dataset containing both households and individuals. The
individual and global risk measures automatically take into
consideration the household weights, which we defined in <a class="reference internal" href="#code97"><span class="std std-numref">Listing 61</span></a>. In
our file, the global risk measure calculated using the chosen key
variables is 0.05%. This percentage is extremely low and corresponds to
1.03 expected re-identifications. The results are also shown in <a class="reference internal" href="#code912"><span class="std std-numref">Listing 66</span></a>.
This low figure can be explained by the relatively small sample
size of 0.25% of the total population. Furthermore, one should keep in
mind that this risk measure is based only on the categorical
quasi-identifiers at the household level. <a class="reference internal" href="#code912"><span class="std std-numref">Listing 66</span></a> illustrates how
to print the global risk measure.</p>
<div class="literal-block-wrapper docutils container" id="code912">
<div class="code-block-caption"><span class="caption-number">Listing 66 </span><span class="caption-text">Printing global risk measures</span><a class="headerlink" href="#code912" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kp">print</span><span class="p">(</span>sdcHH<span class="p">,</span> <span class="s">&quot;risk&quot;</span><span class="p">)</span>

<span class="c1">## Risk measures:</span>
<span class="c1">##</span>
<span class="c1">## Number of observations with higher risk than the main part of the data: 0</span>
<span class="c1">## Expected number of re-identifications: 1.03 (0.05 %)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The global risk measure does not provide information about the spread of
the individual risk measures. There might be a few households with
relatively high risk, while the global (average) risk is low. It is
therefore useful as a next step to inspect the observations with
relatively high risk. The highest risk is 5.5% and only 14 households
have risk larger than 1%. <a class="reference internal" href="#code913"><span class="std std-numref">Listing 67</span></a> shows how to display those
households with risk over a certain threshold. Here the threshold is
0.01 (1%).</p>
<div class="literal-block-wrapper docutils container" id="code913">
<div class="code-block-caption"><span class="caption-number">Listing 67 </span><span class="caption-text">Observations with individual risk higher than 1%</span><a class="headerlink" href="#code913" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Observations with risk above certain threshold (0.01)</span>
fileHH<span class="p">[</span>sdcHH<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span> <span class="s">&quot;risk&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="m">0.01</span><span class="p">,]</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Since the selected key variables at the household level are both
categorical and numerical, the individual and global risk measures based
on frequency counts do not completely reflect the disclosure risk of the
entire dataset. Both categorical and continuous key variables are
important for the data users, thus options like recoding the continuous
variables (e.g., by creating quantiles of income and expenditure
variables) to make all of them categorical will likely not satisfy the
data user’s needs. We therefore avoid recoding continuous variables and
assess the disclosure risk of the categorical and continuous variables
separately. This approach can be partly justified by the fact that any
potential matching to external data sources for the continuous and
categorical variables are available from different external data sources
and as such will not be used simultaneously for matching.</p>
<p><strong>Continuous variables</strong></p>
<p>To measure the risk of the continuous variables, we use an interval
measure, which measures the number of anonymized values that are too
close to their original values. See the Section <a class="reference external" href="measure_risk.html#Intervalmeasure">Interval measure</a>
for more information
on interval-based risk measures for continuous variables. This measure
is an ex-post measure, meaning that the risk can be evaluated only after
anonymization and measures whether the perturbation is sufficiently
large. Since it is an ex-post measure, we can evaluate it only in Step
9a after the variables have been treated. Evaluating this measure based
on the original data would lead to a risk of 100%; all values would be
too close to the original values since they would coincide with the
original values, no matter how small the chosen intervals would be.</p>
<p>We also look at the distribution of LANDSIZEHA. In the variable
LANDSIZEHA high values are rare and can lead to re-identification. An
example is a large landowner in a specific region. To evaluate the
distribution of the variable LANDSIZEHA, we look at the percentiles.
Every percentile represents approximately 20 households. In addition, we
look at the values of the largest 50 plots. <a class="reference internal" href="#code914"><span class="std std-numref">Listing 68</span></a> shows how to
use <em>R</em> to display the quantiles and the largest landplots. <a class="reference internal" href="#tab95"><span class="std std-numref">Table 31</span></a>
shows the 90<sup>th</sup> – 100<sup>th</sup> percentiles and <a class="reference internal" href="#tab96"><span class="std std-numref">Table 32</span></a>
displays the largest 50 values for LANDSIZEHA. Based on these values, we
conclude that values of LANDSIZEHA over 40 make the household very
identifiable. These large households and households with large land
plots need extra protection, as discussed in Step 8a.</p>
<div class="literal-block-wrapper docutils container" id="code914">
<div class="code-block-caption"><span class="caption-number">Listing 68 </span><span class="caption-text">Percentiles of LANDSIZE and listing the sizes of the largest 50 plots</span><a class="headerlink" href="#code914" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># 1st - 100th percentiles of land size</span>
quantile<span class="p">(</span>fileHH<span class="o">$</span>LANDSIZEHA<span class="p">,</span> probs <span class="o">=</span> <span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">100</span><span class="p">)</span><span class="o">/</span><span class="m">100</span><span class="p">,</span> na.rm<span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>

<span class="c1"># Values of landsize for largest 50 plots</span>
<span class="kp">tail</span><span class="p">(</span><span class="kp">sort</span><span class="p">(</span>fileHH<span class="o">$</span>LANDSIZEHA<span class="p">),</span> n <span class="o">=</span> <span class="m">50</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<span id="tab95"></span><table border="1" class="colwidths-auto docutils align-center" id="id19">
<caption><span class="caption-number">Table 31 </span><span class="caption-text">Percentiles 90-100 of the variable LANDSIZE</span><a class="headerlink" href="#id19" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Percentile</th>
<th class="head">90</th>
<th class="head">91</th>
<th class="head">92</th>
<th class="head">93</th>
<th class="head">94</th>
<th class="head">95</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Value</td>
<td>6.00</td>
<td>8.00</td>
<td>8.09</td>
<td>10.12</td>
<td>10.12</td>
<td>10.12</td>
</tr>
<tr class="row-odd"><td>Percentile</td>
<td>96</td>
<td>97</td>
<td>98</td>
<td>99</td>
<td>100</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Value</td>
<td>12.14</td>
<td>20.23</td>
<td>33.83</td>
<td>121.41</td>
<td>1,214.08</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<span id="tab96"></span><table border="1" class="colwidths-auto docutils align-center" id="id20">
<caption><span class="caption-number">Table 32 </span><span class="caption-text">50 largest values of the variable LANDSIZE</span><a class="headerlink" href="#id20" title="Permalink to this table">¶</a></caption>
<tbody valign="top">
<tr class="row-odd"><td>12.14</td>
<td>15.00</td>
<td>15.37</td>
<td>15.78</td>
<td>16.19</td>
<td>20.00</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
</tr>
<tr class="row-even"><td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
<td>20.23</td>
</tr>
<tr class="row-odd"><td>20.23</td>
<td>20.23</td>
<td>20.50</td>
<td>30.35</td>
<td>32.38</td>
<td>40.47</td>
<td>40.47</td>
<td>40.47</td>
<td>40.47</td>
<td>40.47</td>
</tr>
<tr class="row-even"><td>40.47</td>
<td>40.47</td>
<td>80.93</td>
<td>80.93</td>
<td>80.93</td>
<td>80.93</td>
<td>121.41</td>
<td>121.41</td>
<td>161.88</td>
<td>161.88</td>
</tr>
<tr class="row-odd"><td>161.88</td>
<td>182.11</td>
<td>246.86</td>
<td>263.05</td>
<td>283.29</td>
<td>404.69</td>
<td>404.69</td>
<td>607.04</td>
<td>809.39</td>
<td>1214.08</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="step-7a-assessing-utility-measures-household-level">
<h3>Step 7a: Assessing utility measures (household level)<a class="headerlink" href="#step-7a-assessing-utility-measures-household-level" title="Permalink to this headline">¶</a></h3>
<p>The utility of the data does not only depend on the household level
variables, but on the combination of household-level and
individual-level variables. Therefore, it is not useful to evaluate all
the utility measures selected in Step 5 at this stage, i.e., before
anonymizing the individual level variables. We restrict the initial
measurement of utility to those measures that are solely based on the
household variables. In our dataset, these are the measures related to
income and expenditure and their distributions. The results are
presented in Step 10a, together with the results after anonymization,
which allow direct comparison. If after the next anonymization step it
appears that the data utility has been significantly decreased by the
suppression of some household level variables, we can return to this
step.</p>
</div>
<div class="section" id="step-8a-choice-and-application-of-sdc-methods-household-variables">
<h3>Step 8a: Choice and application of SDC methods (household variables)<a class="headerlink" href="#step-8a-choice-and-application-of-sdc-methods-household-variables" title="Permalink to this headline">¶</a></h3>
<p>This step is divided into the anonymization of the variable HHSIZE, as
this is a special case, the anonymization of the other selected
categorical quasi-identifiers and the anonymization of the selected
continuous quasi-identifiers.</p>
<p><strong>Variable HHSIZE</strong></p>
<p>The variable HHSIZE poses a problem for the anonymization of the file,
since suppressing it will not anonymize this variable: a simple
headcount based on the household ID would allow the reconstruction of
this variable. <a class="reference internal" href="#tab97"><span class="std std-numref">Table 33</span></a> shows the absolute frequencies of HHSIZE. The
number of households for each size larger than 13 is 6 or fewer and can
be considered outliers with a higher risk of re-identification, as
discussed in Step 6a. One way to deal with this is to remove all
households of size 14 or larger from the dataset <a class="footnote-reference" href="#foot71" id="id1">[1]</a>.
Removing 29 households of size 14 or larger reduces the number of
2-anonymity violations by 18, of 3-anonymity violations by 26 and of
5-anonymity violations by 29. This means that all removed households
violated 5-anonymity due to the value of the variable HHSIZE and many of
them 2- or 3-anonymity. In addition, the average individual risk amongst
the 29 households is 0.15%, which is almost three times higher than the
average individual risk of all households. The impact on the global risk
measure of removing these 29 households is, however, limited, due to the
relatively small number of removed households in comparison to the total
number of 2,000 households. Removing the households is primarily to
protect these specific households, not to reduce the global risk.</p>
<p>Changes, such as removing records, cannot be done in the
<em>sdcMicro</em> object. <a class="reference internal" href="#code915"><span class="std std-numref">Listing 69</span></a> illustrates the way to remove households
and recreate the <em>sdcMicro</em> object.</p>
<span id="tab97"></span><table border="1" class="colwidths-auto docutils align-center" id="id21">
<caption><span class="caption-number">Table 33 </span><span class="caption-text">Frequencies of variable HHSIZE (household size)</span><a class="headerlink" href="#id21" title="Permalink to this table">¶</a></caption>
<tbody valign="top">
<tr class="row-odd"><td>HHSIZE</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
<td>12</td>
</tr>
<tr class="row-even"><td>Frequency</td>
<td>152</td>
<td>194</td>
<td>238</td>
<td>295</td>
<td>276</td>
<td>252</td>
<td>214</td>
<td>134</td>
<td>84</td>
<td>66</td>
<td>34</td>
<td>21</td>
</tr>
<tr class="row-odd"><td>HHSIZE</td>
<td>13</td>
<td>14</td>
<td>15</td>
<td>16</td>
<td>17</td>
<td>18</td>
<td>19</td>
<td>20</td>
<td>21</td>
<td>22</td>
<td>33</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Frequency</td>
<td>11</td>
<td>6</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="code915">
<div class="code-block-caption"><span class="caption-number">Listing 69 </span><span class="caption-text">Removing households with large (rare) household sizes</span><a class="headerlink" href="#code915" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Tabulation of variable HHSIZE</span>
<span class="kp">table</span><span class="p">(</span>sdcHH<span class="o">@</span>manipKeyVars<span class="o">$</span>HHSIZE<span class="p">)</span>

<span class="c1"># Remove large households (14 or more household members) from file and fileHH</span>
file <span class="o">&lt;-</span> <span class="kp">file</span><span class="p">[</span><span class="o">!</span><span class="kp">file</span><span class="p">[,</span><span class="s">&#39;HHSIZE&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="m">14</span><span class="p">,]</span>

fileHHnew <span class="o">&lt;-</span> fileHH<span class="p">[</span><span class="o">!</span>fileHH<span class="p">[,</span><span class="s">&#39;HHSIZE&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="m">14</span><span class="p">,]</span>

<span class="c1"># Create new sdcMicro object based on the file without the removed households</span>
sdcHH <span class="o">&lt;-</span> createSdcObj<span class="p">(</span>dat<span class="o">=</span>fileHHnew<span class="p">,</span> keyVars<span class="o">=</span>selectedKeyVarsHH<span class="p">,</span> pramVars<span class="o">=</span>pramVarsHH<span class="p">,</span>
                      weightVar<span class="o">=</span>weightVarHH<span class="p">,</span> numVars <span class="o">=</span> numVarsHH<span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Categorical variables</strong></p>
<p>We are now ready to move on to the choice of SDC methods for the
categorical variables on the household level in our dataset. As noted in
our discussion of the methods, applying perturbative methods and local
suppression may lead to large loss of utility. The common approach is to
apply recoding to the largest possible extent as a first approach, to
reach a prescribed level of risk and reduce the number of suppressions
needed. Only after that should methods such as local suppression be
applied. If this approach does not already achieve the desired result,
we can consider perturbative methods.</p>
<p>Since the file is to be released as a SUF, we can keep a higher level of
detail in the data. The selected categorical key variables at the
household level are not suitable for recoding at this point. Due to the
relatively low risk of re-identification based on the five selected
categorical household level variables, it is possible in this case to
use an option like local suppression to achieve our desired level of
risk. Applying local suppression when initial risk is relatively low
will likely only lead to suppression of few observations and thus limit
the loss of utility. If, however, the data had been measured to have a
relatively high risk, then applying local suppression without previous
recoding would likely result in a large number of suppressions and
greater information loss. Efforts such a recoding should be taken first
before suppressing in cases where risk is initially measured as high.
Recoding will reduce risk with little information loss and thus the
number of suppressions, if local suppression is applied as an additional
step. We apply local suppression to reach 2-anonymity. The choice of the
low level of two is based on the overall low re-identification risk due
to the high sample weights and the release as SUF. High sample weights
mean, ceteris paribus, a low level of re-identification risk. Achieving
2-anonymity is the same as removing sample uniques. This leads to 42
suppressions in the variable HHSIZE and 4 suppressions in the variable
REGION. As explained earlier, suppression of the value of the variable
HHSIZE does not lead to actual suppression of this information.
Therefore, we redo the local suppression, but this time we tell
<em>sdcMicro</em> to, if possible, not suppress HHSIZE but one of the other
variables.</p>
<p>In <em>sdcMicro</em> it is possible to tell the algorithm which variables are
important and less important for making small changes (see also the Section
<a class="reference external" href="anon_methods.html#Localsuppression">Local suppression</a>).
To prevent HHSIZE being suppressed, we set the importance of
HHSIZE in the importance vectors to the highest (i.e., 1). <a class="reference internal" href="#code916"><span class="std std-numref">Listing 70</span></a>
shows how to apply local suppression and put importance on the variable
HHSIZE. The variable REGION is the type of variable that should not have
any suppressions either. We also set the importance of REGION to 2 and
the importance of RURURB to 3. This leads to an order of the variables
to be considered for suppression by the algorithm. Instead of 42
suppressions in the variable HHSIZE, this leads one suppressed value in
the variable HHSIZE, and to 6, 1, 48 and 16 suppressions respectively
for the variables URBRUR, REGION, OWNAGLAND and RELIG (which we set as
less important). The importance is clearly reflected in the number of
suppression. The total number of suppressions is higher than without
importance vector (71 vs. 46), but 2-anonymity is achieved in the
dataset with fewer suppressions in the variables HHSIZE and REGION. We
remove the one household with the suppressed value of HHSIZE (13) to
protect this household.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In <a class="reference internal" href="#code916"><span class="std std-numref">Listing 70</span></a> we use the undolast() function in sdcMicro to go one step back after we had first
applied local suppression with no importance vector.</p>
</div>
<p>The undolast() function restores the <em>sdcMicro</em> object back to the previous state
(i.e., before we applied local suppression), which allows us to rerun
the same command, but this time with an importance vector set. The
undolast() function can only be used to go one step back.</p>
<div class="literal-block-wrapper docutils container" id="code916">
<div class="code-block-caption"><span class="caption-number">Listing 70 </span><span class="caption-text">Local suppression with and without importance vector</span><a class="headerlink" href="#code916" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Local suppression</span>
sdcHH <span class="o">&lt;-</span> localSuppression<span class="p">(</span>sdcHH<span class="p">,</span> k<span class="o">=</span><span class="m">2</span><span class="p">,</span> importance <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span> <span class="c1"># no importance vector</span>

<span class="kp">print</span><span class="p">(</span>sdcHH<span class="p">,</span> <span class="s">&quot;ls&quot;</span><span class="p">)</span>
<span class="c1">## Local Suppression:</span>
<span class="c1">##     KeyVar | Suppressions (#) | Suppressions (%)</span>
<span class="c1">##     URBRUR |                0 |            0.000</span>
<span class="c1">##     REGION |                4 |            0.203</span>
<span class="c1">##     HHSIZE |               37 |            1.877</span>
<span class="c1">##  OWNAGLAND |                0 |            0.000</span>
<span class="c1">##      RELIG |                0 |            0.000</span>

sdcHH <span class="o">&lt;-</span> undolast<span class="p">(</span>sdcHH<span class="p">)</span>

sdcHH <span class="o">&lt;-</span> localSuppression<span class="p">(</span>sdcHH<span class="p">,</span> k<span class="o">=</span><span class="m">2</span><span class="p">,</span> importance <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">))</span>
<span class="c1"># importance on HHSIZE (1), REGION (2) and URBRUR (3)</span>

<span class="kp">print</span><span class="p">(</span>sdcHH<span class="p">,</span> <span class="s">&quot;ls&quot;</span><span class="p">)</span>
<span class="c1">## Local Suppression:</span>
<span class="c1">##     KeyVar | Suppressions (#) | Suppressions (%)</span>
<span class="c1">##     URBRUR |                6 |            0.304</span>
<span class="c1">##     REGION |                1 |            0.051</span>
<span class="c1">##     HHSIZE |                1 |            0.051</span>
<span class="c1">##  OWNAGLAND |               43 |            2.182</span>
<span class="c1">##      RELIG |               16 |            0.812</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The variables ROOF, TOILET, WATER, ELECTCON, FUELCOOK, OWNMOTORCYCLE,
CAR, TV and LIVESTOCK are not sensitive variables and were not selected
as quasi-identifiers because we assumed that there are no external data
sources containing this information that could be used for matching.
Values can be easily observed or be known to neighbors, however, and
therefore are important, together with other variables, for the
spontaneous recognition scenario and nosy neighbor scenario. To
anonymize these variables, we want to introduce a low level of
uncertainty in them. Therefore, we decide to use invariant PRAM for the
variables ROOF, TOILET, WATER, ELECTCON, FUELCOOK, OWNMOTORCYCLE, CAR,
TV and LIVESTOCK, where we treat LIVESTOCK as a semi-continuous variable
due to the low number of different values.
The Section <a class="reference external" href="anon_methods.html#PRAM(PostRAndomizationMethod)">PRAM (Post RAndomization Method)</a> provides more
information on the PRAM method and its implementation in <em>sdcMicro</em>.
<a class="reference internal" href="#code917"><span class="std std-numref">Listing 71</span></a> illustrates how to apply PRAM. We choose the parameter
<em>pd</em>, the lower bound for the probability that a value is not changed,
to be relatively high at 0.8. We can choose a high value, because the
variables themselves are not sensitive and we only want to introduce a
low level of changes to minimize the utility loss. Because the
distribution of many of the variables chosen for PRAM depends on the
REGION, we decide to use the variable REGION as a strata variable. In
this way the transition matrix is computed for each region separately.
Because PRAM is a probabilistic method, we set a seed for the random
number generator before applying PRAM to ensure reproducibility of the
results.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In practice, it is not advisable to set a seed of
12345, but rather a longer more complex and less easy to guess
sequence.</p>
</div>
<p>The seed should not be released, since it allows for
reconstructing the original values if combined with the transition
matrix. The transition matrix can be released: this allows for
consistent statistical inference by correcting the statistical methods
used if the researcher has knowledge about the PRAM method (at this
point <em>sdcMicro</em> does not allow the retrieval of the transition matrix).</p>
<div class="literal-block-wrapper docutils container" id="code917">
<div class="code-block-caption"><span class="caption-number">Listing 71 </span><span class="caption-text">Applying PRAM</span><a class="headerlink" href="#code917" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Pram</span>
<span class="kp">set.seed</span><span class="p">(</span><span class="m">12345</span><span class="p">)</span>
sdcHH <span class="o">&lt;-</span> pram<span class="p">(</span>sdcHH<span class="p">,</span> strata_variables <span class="o">=</span> <span class="s">&quot;REGION&quot;</span><span class="p">,</span> pd <span class="o">=</span> <span class="m">0.8</span><span class="p">)</span>

<span class="c1">## Number of changed observations:</span>
<span class="c1">## - - - - - - - - - - -</span>
<span class="c1">## ROOF != ROOF_pram : 98 (4.97%)</span>
<span class="c1">## TOILET != TOILET_pram : 151 (7.66%)</span>
<span class="c1">## WATER != WATER_pram : 167 (8.47%)</span>
<span class="c1">## ELECTCON != ELECTCON_pram : 90 (4.57%)</span>
<span class="c1">## FUELCOOK != FUELCOOK_pram : 113 (5.73%)</span>
<span class="c1">## OWNMOTORCYCLE != OWNMOTORCYCLE_pram : 41 (2.08%)</span>
<span class="c1">## CAR != CAR_pram : 172 (8.73%)</span>
<span class="c1">## TV != TV_pram : 137 (6.95%)</span>
<span class="c1">## LIVESTOCK != LIVESTOCK_pram : 149 (7.56%)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>PRAM has changed values within the variables according to the invariant
transition matrices. Since we used the invariant PRAM method (see
the Section <a class="reference external" href="anon_methods.html#PRAM(PostRAndomizationMethod)">PRAM (Post RAndomization Method)</a>),
the absolute univariate frequencies remain unchanged.
This is not the case for the multivariate frequencies. In Step 10a we
compare the changes in the multivariate frequencies for the PRAMmed
variables.</p>
<p><strong>Continuous variables</strong></p>
<p>We have selected income and expenditures variables and the variable
LANDSIZEHA as numerical quasi-identifiers, as discussed in Step 4. In
Step 5 we identified variables having high interest for the users of our
data: many users use the data for measuring inequality and expenditure
patterns.</p>
<p>Based on the risk evaluation in Step 6a, we decide to anonymize the
variable LANDSIZEHA by top coding at the value 40 (cf. <a class="reference internal" href="#tab95"><span class="std std-numref">Table 31</span></a> and
<a class="reference internal" href="#tab96"><span class="std std-numref">Table 32</span></a>) and round values smaller than 1 to one digit, and values
larger than 1 to zero digits. Rounding the values prevents exact
matching with the available cadastral register. Furthermore, we group
the values between 5 and 40 in the groups 5 – 19 and 20 – 39. After
these steps, no household has a unique plot size and the number of
households in the sample with the same plot size was increased to at
least 7. This is shown by the tabulation of the variable LANDSIZEHA
after manipulation in the last line of <a class="reference internal" href="#code918"><span class="std std-numref">Listing 72</span></a>. In addition, all
outliers have been removed by top coding the values. This has reduced
the risk of spontaneous recognition as discussed in Step 6. How to
recode values in <em>R</em> is introduced in the Section <a class="reference external" href="anon_methods.html#Recoding">Recoding</a>
and, for this particular case, shown in <a class="reference internal" href="#code918"><span class="std std-numref">Listing 72</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="code918">
<div class="code-block-caption"><span class="caption-number">Listing 72 </span><span class="caption-text">Anonymizing the variable LANDSIZEHA</span><a class="headerlink" href="#code918" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Rounding values of LANDSIZEHA to 1 digit for plots smaller than 1 and</span>
<span class="c1"># to 0 digits for plots larger than 1</span>
sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">[</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA <span class="o">&lt;=</span> <span class="m">1</span> <span class="o">&amp;</span>
                              <span class="o">!</span><span class="kp">is.na</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">)]</span> <span class="o">&lt;-</span>
             <span class="kp">round</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">[</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA <span class="o">&lt;=</span> <span class="m">1</span> <span class="o">&amp;</span>
                                                 <span class="o">!</span><span class="kp">is.na</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">)],</span>
                   digits <span class="o">=</span> <span class="m">1</span><span class="p">)</span>

sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">[</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA <span class="o">&gt;</span> <span class="m">1</span> <span class="o">&amp;</span>
                              <span class="o">!</span><span class="kp">is.na</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">)]</span> <span class="o">&lt;-</span>
             <span class="kp">round</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">[</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA <span class="o">&gt;</span> <span class="m">1</span> <span class="o">&amp;</span>
                                                 <span class="o">!</span><span class="kp">is.na</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">)],</span>
                   digits <span class="o">=</span> <span class="m">0</span><span class="p">)</span>

<span class="c1"># Grouping values of LANDSIZEHA into intervals 5-19, 20-39</span>
sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">[</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA <span class="o">&gt;=</span> <span class="m">5</span> <span class="o">&amp;</span>
sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA <span class="o">&lt;</span> <span class="m">20</span> <span class="o">&amp;</span> <span class="o">!</span><span class="kp">is.na</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">)]</span> <span class="o">&lt;-</span> <span class="m">13</span>

sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">[</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA <span class="o">&gt;=</span> <span class="m">20</span> <span class="o">&amp;</span>
sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA <span class="o">&lt;</span> <span class="m">40</span> <span class="o">&amp;!</span><span class="kp">is.na</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">)]</span> <span class="o">&lt;-</span> <span class="m">30</span>

<span class="c1"># Topcoding values of LANDSIZEHA larger than 40 (also recomputes risk after manual changes)</span>
sdcHH <span class="o">&lt;-</span> topBotCoding<span class="p">(</span>sdcHH<span class="p">,</span> value <span class="o">=</span> <span class="m">40</span><span class="p">,</span> replacement <span class="o">=</span> <span class="m">40</span><span class="p">,</span> kind <span class="o">=</span> <span class="s">&#39;top&#39;</span><span class="p">,</span> column <span class="o">=</span> <span class="s">&#39;LANDSIZEHA&#39;</span><span class="p">)</span>

<span class="c1"># Results for LANDSIZEHA</span>
<span class="kp">table</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>LANDSIZEHA<span class="p">)</span>
<span class="c1">##   0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9   1   2   3   4  13  30  40</span>
<span class="c1">## 188 109  55  30  24  65  22   7  31  16 154 258  53  60 113  18  25</span>
</pre></div>
</td></tr></table></div>
</div>
<p>For the expenditure and income variables we compared, <strong>based on the
actual case study data</strong>, several methods. As mentioned earlier, the
main use of the data is to compute inequality measures, such as the Gini
coefficient. Recoding these variables into percentiles creates
difficulties computing these measures or changes these measures to a
large extent and is hence not a suitable method. Often, income and
expenditure variables that are released in a SUF are anonymized by
top-coding. This protects the outliers, which are the values that are
the most at risk. Top-coding, however, destroys the inequality
information in the data, by removing high (and low) incomes. Therefore,
we decide to use noise addition. To take into account the higher risk of
outliers, we add a higher level of noise to those.</p>
<p>Adding noise can lead to a transformation of the shape of the
distribution. Depending on the magnitude of the noise (see the Section
<a class="reference external" href="anon_methods.html#Noiseaddition">Noise addition</a>
for the definition of the magnitude of noise), the values of income can
also become negative. One way to solve this would be to cut off the
values below zero and set them to zero. This would, however, destroy the
properties conserved by noise addition (amongst others the value of the
expected mean, see also the Section <a class="reference external" href="anon_methods.html#Noiseaddition">Noise addition</a>)
and we chose to keep the negative values.</p>
<p>As mentioned before, the aggregates of income and expenditures are the
sums of the components. Adding noise to each of the components might
lead to violation of this condition. Therefore, one solution is to add
noise to the aggregates and remove the components. We prefer to keep the
components in the data and apply noise addition to each component
separately. This allows to apply a lower level of noise than when
applying noise only to the aggregates. A noise level of 0.01 seems to be
sufficient with extra noise of 0.05 added to the outliers. The outliers
are defined by a robust Mahalanobis distance
(see the Section <a class="reference external" href="anon_methods.html#Noiseaddition">Noise addition</a>). After
adding noise to the components, we recomputed the aggregates as the sum
of the perturbed components.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This result is only based on the actual case study dataset and is not necessarily true for other datasets.</p>
</div>
<p>The noise addition is shown in <a class="reference internal" href="#code919"><span class="std std-numref">Listing 73</span></a>. Before applying
probabilistic methods such as noise addition, we set a seed for the
random number generator. This allows us to reproduce the results.</p>
<div class="literal-block-wrapper docutils container" id="code919">
<div class="code-block-caption"><span class="caption-number">Listing 73 </span><span class="caption-text">Anonymizing continuous variables</span><a class="headerlink" href="#code919" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Add noise to income and expenditure variables by category</span>

<span class="c1"># Anonymize components</span>
compExp <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;TFOODEXP&quot;</span><span class="p">,</span> <span class="s">&quot;TALCHEXP&quot;</span><span class="p">,</span> <span class="s">&quot;TCLTHEXP&quot;</span><span class="p">,</span> <span class="s">&quot;THOUSEXP&quot;</span><span class="p">,</span>
             <span class="s">&quot;TFURNEXP&quot;</span><span class="p">,</span> <span class="s">&quot;THLTHEXP&quot;</span><span class="p">,</span> <span class="s">&quot;TTRANSEXP&quot;</span><span class="p">,</span> <span class="s">&quot;TCOMMEXP&quot;</span><span class="p">,</span> <span class="s">&quot;TRECEXP&quot;</span><span class="p">,</span> <span class="s">&quot;TEDUEXP&quot;</span><span class="p">,</span>
             <span class="s">&quot;TRESHOTEXP&quot;</span><span class="p">,</span> <span class="s">&quot;TMISCEXP&quot;</span><span class="p">)</span>
<span class="kp">set.seed</span><span class="p">(</span><span class="m">123</span><span class="p">)</span>

<span class="c1"># Add noise to expenditure variables</span>
sdcHH <span class="o">&lt;-</span> addNoise<span class="p">(</span>noise <span class="o">=</span> <span class="m">0.01</span><span class="p">,</span> obj <span class="o">=</span> sdcHH<span class="p">,</span> variables <span class="o">=</span> compExp<span class="p">,</span> method <span class="o">=</span> <span class="s">&quot;additive&quot;</span><span class="p">)</span>

<span class="c1"># Add noise to outliers</span>
sdcHH <span class="o">&lt;-</span> addNoise<span class="p">(</span>noise <span class="o">=</span> <span class="m">0.05</span><span class="p">,</span> obj <span class="o">=</span> sdcHH<span class="p">,</span> variables <span class="o">=</span> compExp<span class="p">,</span> method <span class="o">=</span> <span class="s">&quot;outdect&quot;</span><span class="p">)</span>

<span class="c1"># Sum over expenditure categories to obtain consistent totals</span>
sdcHH<span class="o">@</span>manipNumVars<span class="p">[,</span><span class="s">&#39;TANHHEXP&#39;</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="kp">rowSums</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="p">[,</span>compExp<span class="p">])</span>
compInc <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;INCRMT&#39;</span><span class="p">,</span> <span class="s">&#39;INCWAGE&#39;</span><span class="p">,</span> <span class="s">&#39;INCFARMBSN&#39;</span><span class="p">,</span> <span class="s">&#39;INCNFARMBSN&#39;</span><span class="p">,</span>
             <span class="s">&#39;INCRENT&#39;</span><span class="p">,</span> <span class="s">&#39;INCFIN&#39;</span><span class="p">,</span> <span class="s">&#39;INCPENSN&#39;</span><span class="p">,</span> <span class="s">&#39;INCOTHER&#39;</span><span class="p">)</span>

<span class="c1"># Add noise to income variables</span>
sdcHH <span class="o">&lt;-</span> addNoise<span class="p">(</span>noise <span class="o">=</span> <span class="m">0.01</span><span class="p">,</span> obj <span class="o">=</span> sdcHH<span class="p">,</span> variables <span class="o">=</span> compInc<span class="p">,</span> method <span class="o">=</span> <span class="s">&quot;additive&quot;</span><span class="p">)</span>

<span class="c1"># Add noise to outliers</span>
sdcHH <span class="o">&lt;-</span> addNoise<span class="p">(</span>noise <span class="o">=</span> <span class="m">0.05</span><span class="p">,</span> obj <span class="o">=</span> sdcHH<span class="p">,</span> variables <span class="o">=</span> compInc<span class="p">,</span> method <span class="o">=</span> <span class="s">&quot;outdect&quot;</span><span class="p">)</span>

<span class="c1"># Sum over income categories to obtain consistent totals</span>
sdcHH<span class="o">@</span>manipNumVars<span class="p">[,</span><span class="s">&#39;INCTOTGROSSHH&#39;</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="kp">rowSums</span><span class="p">(</span>sdcHH<span class="o">@</span>manipNumVars<span class="p">[,</span>compInc<span class="p">])</span>

<span class="c1"># recalculate risks after manually changing values in sdcMicro object</span>
calcRisks<span class="p">(</span>sdcHH<span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="step-9a-re-measure-risk">
<h3>Step 9a: Re-measure risk<a class="headerlink" href="#step-9a-re-measure-risk" title="Permalink to this headline">¶</a></h3>
<p>For the categorical variables, we conclude that we have achieved
2-anonymity in the data with local suppression. Only 104 households, or
about 5% of the total number, violate 3-anonymity. <a class="reference internal" href="#tab98"><span class="std std-numref">Table 34</span></a> gives an
overview of these risk measures. The global risk is reduced to 0.02%
(expected number of re-identifications 0.36), which is extremely low.
Therefore, we conclude that based on the categorical variables, the data
has been sufficiently anonymized. No household has a risk of
re-identification higher than 0.01 (1%). By removing households with
rare values (or outliers) of the variable HHSIZE, we have reduced the
risk of spontaneous recognition of these households. This reasoning can
also be applied to the result of the risk of recoding the variable
LANDSIZEHA and PRAMming the variables identified to be important in the
nosy neighbor scenario. An intruder cannot know with certainty whether a
household that he recognizes in the data is the correct household, due
to the noise.</p>
<span id="tab98"></span><table border="1" class="colwidths-auto docutils align-center" id="id22">
<caption><span class="caption-number">Table 34 </span><span class="caption-text">Number and proportion of households violating k-anonymity after anonymization</span><a class="headerlink" href="#id22" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">k-anonymity</th>
<th class="head">Number HH violating</th>
<th class="head">Percentage</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>0</td>
<td>0 %</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>104</td>
<td>5.28 %</td>
</tr>
<tr class="row-even"><td>5</td>
<td>374</td>
<td>18.70 %</td>
</tr>
</tbody>
</table>
<p>These measures refer only to the categorical variables. To evaluate the
risk of the continuous variables we could use an interval measure or
closest neighbor algorithm. These risk measures are discussed in the Section
<a class="reference external" href="measure_risk.html#Riskmeasuresforcontinuousvariables">Risk measures for continuous variables</a>.
We chose to use an interval measure, since exact value matching is
not our largest concern based on the assumed scenarios and external data
sources. Instead, datasets with similar values but not the exact same
values could be used for matching. Here the main concern is that the
values are sufficiently far from the original values, which is measured
with an interval measure.</p>
<p><a class="reference internal" href="#code920"><span class="std std-numref">Listing 74</span></a> shows how to evaluate the interval measure for each of the
expenditure variables, which are contained in the vector
<em>compExp</em> <a class="footnote-reference" href="#foot72" id="id2">[2]</a>. The different values of the parameter
<em>k</em> in the function dRisk() define the size of the interval around the
original value, as explained in the Section <a class="reference external" href="risk_measure.html#Intervalmeasure">Interval measure</a>.
The larger <em>k</em>, the
larger the intervals, the higher the probability that a perturbed value
is in the interval around the original value and the higher the risk
measure. The result is satisfactory with relatively small intervals (k =
0.01), but not when increasing the size of the intervals. In our case, k
= 0.01 is sufficiently large, since we are looking at the components,
not the aggregates. We have to pay special attention to the outliers.
Here the value 0.01 for k is too small to assume that they are protected
when outside this small interval. It would be necessary to check
outliers and their perturbed values and there might be a need for a
higher level of perturbation for outliers. We conclude that, from a risk
perspective and based on the interval measure, the chosen levels of
noise are acceptable. In the next step, we will look at the impact on
the data utility of the noise addition.</p>
<div class="literal-block-wrapper docutils container" id="code920">
<div class="code-block-caption"><span class="caption-number">Listing 74 </span><span class="caption-text">Measuring risk of re-identification of continuous variables</span><a class="headerlink" href="#code920" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span>dRisk<span class="p">(</span>sdcHH<span class="o">@</span>origData<span class="p">[,</span>compExp<span class="p">],</span> xm <span class="o">=</span> sdcHH<span class="o">@</span>manipNumVars<span class="p">[,</span>compExp<span class="p">],</span> k <span class="o">=</span> <span class="m">0.01</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">0.0608828</span>

dRisk<span class="p">(</span>sdcHH<span class="o">@</span>origData<span class="p">[,</span>compExp<span class="p">],</span> xm <span class="o">=</span> sdcHH<span class="o">@</span>manipNumVars<span class="p">[,</span>compExp<span class="p">],</span> k <span class="o">=</span> <span class="m">0.02</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">0.9025875</span>

dRisk<span class="p">(</span>sdcHH<span class="o">@</span>origData<span class="p">[,</span>compExp<span class="p">],</span> xm <span class="o">=</span> sdcHH<span class="o">@</span>manipNumVars<span class="p">[,</span>compExp<span class="p">],</span> k <span class="o">=</span> <span class="m">0.05</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">1</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="step-10a-re-measure-utility">
<h3>Step 10a: Re-measure utility<a class="headerlink" href="#step-10a-re-measure-utility" title="Permalink to this headline">¶</a></h3>
<p>None of the variables has been recoded and the original level of detail
in the data is kept, except for the variable LANDSIZEHA. As described in
Step 8a, local suppression has only removed a few values in the other
variables, which has not greatly reduced the validity of the data.</p>
<p>The univariate frequency distributions of the variables ROOF, TOILET,
WATER, ELECTCON, FUELCOOK, OWNMOTORCYCLE, CAR, TV and LIVESTOCK did not,
by definition of the invariant PRAM method (see the Section
<a class="reference external" href="anon_methods.html#PRAM(PostRAndomizationMethod)">PRAM (Post RAndomization Method)</a>), change
to a large extent. The tabulations are presented in <a class="reference internal" href="#tab99"><span class="std std-numref">Table 35</span></a> (the
values 1 – 9 and NA in the first row are the values of the variables and
.m after the variable name refers to the values after anonymization).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Although the frequencies are almost the same, this does not mean
that the values of particular households did not change.</p>
</div>
<p>Values have been swapped between households. This becomes apparent when looking at
the multivariate frequencies of the WATER with the variable URBRUR in
<a class="reference internal" href="#tab910"><span class="std std-numref">Table 36</span></a>. The multivariate frequencies of the PRAMmed with the
variable URBRUR could be of interest for users, but these are not
preserved. Since we applied PRAM within the regions, the multivariate
frequencies of the PRAMmed variables with REGION are preserved.</p>
<span id="tab99"></span><table border="1" class="colwidths-auto docutils align-center" id="id23">
<caption><span class="caption-number">Table 35 </span><span class="caption-text">Univariate frequencies of the PRAMmed variable before and after anonymization</span><a class="headerlink" href="#id23" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">.</th>
<th class="head">0</th>
<th class="head">1</th>
<th class="head">2</th>
<th class="head">3</th>
<th class="head">4</th>
<th class="head">5</th>
<th class="head">6</th>
<th class="head">7</th>
<th class="head">8</th>
<th class="head">9</th>
<th class="head">NA</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ROOF</td>
<td>&#160;</td>
<td>27</td>
<td>1</td>
<td>914</td>
<td>307</td>
<td>711</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>10</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>ROOF.m</td>
<td>&#160;</td>
<td>25</td>
<td>1</td>
<td>907</td>
<td>319</td>
<td>712</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>6</td>
<td>1</td>
</tr>
<tr class="row-even"><td>TOILET</td>
<td>&#160;</td>
<td>76</td>
<td>594</td>
<td>817</td>
<td>481</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>3</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>TOILET.m</td>
<td>&#160;</td>
<td>71</td>
<td>597</td>
<td>816</td>
<td>483</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>4</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>WATER</td>
<td>&#160;</td>
<td>128</td>
<td>323</td>
<td>304</td>
<td>383</td>
<td>562</td>
<td>197</td>
<td>18</td>
<td>21</td>
<td>35</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>WATER.m</td>
<td>&#160;</td>
<td>134</td>
<td>319</td>
<td>308</td>
<td>378</td>
<td>573</td>
<td>188</td>
<td>16</td>
<td>21</td>
<td>34</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>ELECTCON</td>
<td>768</td>
<td>216</td>
<td>8</td>
<td>2</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>977</td>
</tr>
<tr class="row-odd"><td>ELECTCON.m</td>
<td>761</td>
<td>218</td>
<td>8</td>
<td>3</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>981</td>
</tr>
<tr class="row-even"><td>FUELCOOK</td>
<td>&#160;</td>
<td>1289</td>
<td>21</td>
<td>376</td>
<td>55</td>
<td>36</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>139</td>
<td>55</td>
</tr>
<tr class="row-odd"><td>FUELCOOK.m</td>
<td>&#160;</td>
<td>1284</td>
<td>22</td>
<td>383</td>
<td>50</td>
<td>39</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>143</td>
<td>50</td>
</tr>
<tr class="row-even"><td>OWNMOTORCYCLE</td>
<td>1883</td>
<td>86</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>2</td>
</tr>
<tr class="row-odd"><td>OWNMOTORCYCLE.m</td>
<td>1882</td>
<td>86</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>2</td>
</tr>
<tr class="row-even"><td>CAR</td>
<td>963</td>
<td>31</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>977</td>
</tr>
<tr class="row-odd"><td>CAR.m</td>
<td>966</td>
<td>25</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>TV</td>
<td>1216</td>
<td>264</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>491</td>
</tr>
<tr class="row-odd"><td>TV.m</td>
<td>1203</td>
<td>272</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>496</td>
</tr>
</tbody>
</table>
<span id="tab910"></span><table border="1" class="colwidths-auto docutils align-center" id="id24">
<caption><span class="caption-number">Table 36 </span><span class="caption-text">Multivariate frequencies of the variables WATER with RURURB before and after anonymization</span><a class="headerlink" href="#id24" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">.</th>
<th class="head">1</th>
<th class="head">2</th>
<th class="head">3</th>
<th class="head">4</th>
<th class="head">5</th>
<th class="head">6</th>
<th class="head">7</th>
<th class="head">8</th>
<th class="head">9</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WATER/URB</td>
<td>11</td>
<td>49</td>
<td>270</td>
<td>306</td>
<td>432</td>
<td>183</td>
<td>12</td>
<td>15</td>
<td>21</td>
</tr>
<tr class="row-odd"><td>WATER/RUR</td>
<td>114</td>
<td>274</td>
<td>32</td>
<td>76</td>
<td>130</td>
<td>14</td>
<td>6</td>
<td>6</td>
<td>14</td>
</tr>
<tr class="row-even"><td>WATER/URB.m</td>
<td>79</td>
<td>220</td>
<td>203</td>
<td>229</td>
<td>402</td>
<td>125</td>
<td>10</td>
<td>12</td>
<td>19</td>
</tr>
<tr class="row-odd"><td>WATER/RUR.m</td>
<td>54</td>
<td>98</td>
<td>105</td>
<td>147</td>
<td>169</td>
<td>63</td>
<td>6</td>
<td>9</td>
<td>15</td>
</tr>
</tbody>
</table>
<p>For conciseness, we restrict ourselves to the analysis of the
expenditure variables. The analysis of the income variables can be done
in the same way and leads to similar results.</p>
<p>We look at the effect of anonymization on some indicators as discussed
in Step 5. <a class="reference internal" href="#tab911"><span class="std std-numref">Table 37</span></a> presents the point estimates and bootstrapped
confidence interval of the GINI coefficient <a class="footnote-reference" href="#foot73" id="id3">[3]</a> for
the sum of the expenditure components. The calculation of the GINI
coefficient and the confidence interval are based on the positive
expenditure values. We observe very small changes in the Gini
coefficient, that are statistically negligible. We use a visualization
to illustrate the impact on utility of the anonymization. Visualizations
are discussed in the Section
<a class="reference external" href="utility.html#Assessingdatautilitywiththehelpofdatavisualizations(inR)">Assessing data utility with the help of data visualizations (in R)</a>
and the specific <em>R</em> code for this case
study is available in the <em>R</em> script. The change in the inequality
measures is illustrated in <a class="reference internal" href="#fig91"><span class="std std-numref">Fig. 23</span></a>, which shows the Lorenz curves
based on the positive expenditure values before and after anonymization.</p>
<span id="tab911"></span><table border="1" class="colwidths-auto docutils align-center" id="id25">
<caption><span class="caption-number">Table 37 </span><span class="caption-text">GINI point estimates and bootstrapped confidence intervals for sum of expenditure components</span><a class="headerlink" href="#id25" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">.</th>
<th class="head">before</th>
<th class="head">after</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Point estimate</td>
<td>0.510</td>
<td>0.508</td>
</tr>
<tr class="row-odd"><td>Left bound of CI</td>
<td>0.476</td>
<td>0.476</td>
</tr>
<tr class="row-even"><td>Right bound of CI</td>
<td>0.539</td>
<td>0.538</td>
</tr>
</tbody>
</table>
<div class="figure align-center" id="id26">
<span id="fig91"></span><img alt="_images/image21.png" src="_images/image21.png" />
<p class="caption"><span class="caption-number">Fig. 23 </span><span class="caption-text">Lorenz curve based on positive total expenditures values</span></p>
</div>
<p>We compare the mean monthly expenditures (MME) and mean monthly income
(MMI) for rural, urban and total population. The results are shown in
<a class="reference internal" href="#tab912"><span class="std std-numref">Table 38</span></a>. We observe that the chosen levels of noise add only small
distortions to the MME and slightly larger changes to the MMI.</p>
<span id="tab912"></span><table border="1" class="colwidths-auto docutils align-center" id="id27">
<caption><span class="caption-number">Table 38 </span><span class="caption-text">Mean monthly expenditure and mean monthly income per capita by rural/urban</span><a class="headerlink" href="#id27" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">.</th>
<th class="head">before</th>
<th class="head">after</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MME rural</td>
<td>400.5</td>
<td>398.5</td>
</tr>
<tr class="row-odd"><td>MME urban</td>
<td>457.3</td>
<td>459.9</td>
</tr>
<tr class="row-even"><td>MME total</td>
<td>412.6</td>
<td>412.6</td>
</tr>
<tr class="row-odd"><td>MMI rural</td>
<td>397.1</td>
<td>402.2</td>
</tr>
<tr class="row-even"><td>MMI urban</td>
<td>747.6</td>
<td>767.8</td>
</tr>
<tr class="row-odd"><td>MMI total</td>
<td>472.1</td>
<td>478.5</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="#tab913"><span class="std std-numref">Table 39</span></a> shows the share of each of the components of the expenditure
variables before and after anonymization.</p>
<span id="tab913"></span><table border="1" class="colwidths-auto docutils align-center" id="id28">
<caption><span class="caption-number">Table 39 </span><span class="caption-text">Shares of expenditures components</span><a class="headerlink" href="#id28" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">.</th>
<th class="head">TFOODEXP</th>
<th class="head">TALCHEXP</th>
<th class="head">TCLTHEXP</th>
<th class="head">THOUSEXP</th>
<th class="head">TFURNEXP</th>
<th class="head">THLTHEXP</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>before</td>
<td>0.58</td>
<td>0.01</td>
<td>0.03</td>
<td>0.09</td>
<td>0.02</td>
<td>0.03</td>
</tr>
<tr class="row-odd"><td>after</td>
<td>0.59</td>
<td>0.01</td>
<td>0.03</td>
<td>0.09</td>
<td>0.02</td>
<td>0.03</td>
</tr>
<tr class="row-even"><td>.</td>
<td>TTRANSEXP</td>
<td>TCOMMEXP</td>
<td>TRECEXP</td>
<td>TEDUEXP</td>
<td>TRESHOTEXP</td>
<td>TMISCEXP</td>
</tr>
<tr class="row-odd"><td>before</td>
<td>0.04</td>
<td>0.02</td>
<td>0.00</td>
<td>0.08</td>
<td>0.03</td>
<td>0.05</td>
</tr>
<tr class="row-even"><td>after</td>
<td>0.04</td>
<td>0.02</td>
<td>0.00</td>
<td>0.08</td>
<td>0.03</td>
<td>0.05</td>
</tr>
</tbody>
</table>
<p>Anonymization for the creation of a SUF will inevitably lead to some
degree of utility loss. It is important to describe this loss in the
external report, so that users are aware of the changes in the data.
This is described in Step 11 and presented in
<a class="reference external" href="appendices.html#AppendixC:InternalandExternalReportsforCaseStudies">Appendix C</a>.
<a class="reference external" href="appendices.html#AppendixC:InternalandExternalReportsforCaseStudies">Appendix C</a>
also shows summary statistics and tabulations of the household level
variables before and after anonymization.</p>
<p><strong>Merging the household- and individual-level variables</strong></p>
<p>The next step is to merge the treated household variables with the
untreated individual variables for the anonymization of the individual
level variables. <a class="reference internal" href="#code921"><span class="std std-numref">Listing 75</span></a> shows the steps to merge these files. This
also includes the selection of variables used in the anonymization of
the individual-level variables. We create the <em>sdcMicro</em> object for the
anonymization of the individual variables in the same way as for the
household variable in <a class="reference internal" href="#code99"><span class="std std-numref">Listing 63</span></a>. Subsequently, we repeat Steps 6-10
for the individual-level variables.</p>
<div class="literal-block-wrapper docutils container" id="code921">
<div class="code-block-caption"><span class="caption-number">Listing 75 </span><span class="caption-text">Merging the files with household and individual-level variables and creating an <em>sdcMicro</em> object for the anonymization of the individual-level variables</span><a class="headerlink" href="#code921" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">### Select variables (individual level)</span>
<span class="c1"># Key variables (individual level)</span>
selectedKeyVarsIND <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;GENDER&#39;</span><span class="p">,</span> <span class="s">&#39;REL&#39;</span><span class="p">,</span> <span class="s">&#39;MARITAL&#39;</span><span class="p">,</span> <span class="s">&#39;AGEYRS&#39;</span><span class="p">,</span>
                       <span class="s">&#39;EDUCY&#39;</span><span class="p">,</span> <span class="s">&#39;ATSCHOOL&#39;</span><span class="p">,</span> <span class="s">&#39;INDUSTRY1&#39;</span><span class="p">)</span> <span class="c1"># list of selected key variables</span>

<span class="c1"># Sample weight (WGTHH, individual weight)</span>
selectedWeightVarIND <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;WGTHH&#39;</span><span class="p">)</span>

<span class="c1"># Household ID</span>
selectedHouseholdID <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;IDH&#39;</span><span class="p">)</span>

<span class="c1"># No strata</span>

<span class="c1"># Recombining anonymized HH datasets and individual level variables</span>
indVars <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;IDH&quot;</span><span class="p">,</span> <span class="s">&quot;IDP&quot;</span><span class="p">,</span> selectedKeyVarsIND<span class="p">,</span> <span class="s">&quot;WGTHH&quot;</span><span class="p">)</span> <span class="c1"># HID and all non HH variables</span>
fileInd <span class="o">&lt;-</span> <span class="kp">file</span><span class="p">[</span>indVars<span class="p">]</span> <span class="c1"># subset of file without HHVars</span>

HHmanip <span class="o">&lt;-</span> extractManipData<span class="p">(</span>sdcHH<span class="p">)</span> <span class="c1"># manipulated variables HH</span>
HHmanip <span class="o">&lt;-</span> HHmanip<span class="p">[</span>HHmanip<span class="p">[,</span><span class="s">&#39;IDH&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="m">1782</span><span class="p">,]</span>

fileCombined <span class="o">&lt;-</span> <span class="kp">merge</span><span class="p">(</span>HHmanip<span class="p">,</span> fileInd<span class="p">,</span> by.x<span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;IDH&#39;</span><span class="p">))</span>

fileCombined <span class="o">&lt;-</span> fileCombined<span class="p">[</span><span class="kp">order</span><span class="p">(</span>fileCombined<span class="p">[,</span><span class="s">&#39;IDH&#39;</span><span class="p">],</span>
fileCombined<span class="p">[,</span><span class="s">&#39;IDP&#39;</span><span class="p">]),]</span>

<span class="kp">dim</span><span class="p">(</span>fileCombined<span class="p">)</span>

<span class="c1"># SDC objects with all variables and treated HH vars for</span>
<span class="c1"># anonymization of individual level variables</span>
sdcCombined <span class="o">&lt;-</span> createSdcObj<span class="p">(</span>dat <span class="o">=</span> fileCombined<span class="p">,</span> keyVars <span class="o">=</span> selectedKeyVarsIND<span class="p">,</span>
                            weightVar <span class="o">=</span> selectedWeightVarIND<span class="p">,</span> hhId <span class="o">=</span> selectedHouseholdID<span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="step-6b-assessing-disclosure-risk-individual-level">
<h3>Step 6b: Assessing disclosure risk (individual level)<a class="headerlink" href="#step-6b-assessing-disclosure-risk-individual-level" title="Permalink to this headline">¶</a></h3>
<p>All key variables at the individual level are categorical. Therefore, we
can use k-anonymity and the individual and global risk measures (see
the Sections <a class="reference external" href="measure_risk.html#Individualrisk">Individual risk</a>
and <a class="reference external" href="measure_risk.html#Globalrisk">Global risk</a>).
The hierarchical risk is now of interest, given
the household structure in the dataset <em>fileCombined</em>, which includes
both household- and individual-level variables. The number of
individuals (absolute and relative) that violate k-anonymity at the
levels 2, 3 and 5 are shown in <a class="reference internal" href="#tab914"><span class="std std-numref">Table 40</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">k-anonymity does not consider the household structure and therefore underestimates the risk.
Therefore, we are more interested in the individual and global hierarchical risk measures.</p>
</div>
<span id="tab914"></span><table border="1" class="colwidths-auto docutils align-center" id="id29">
<caption><span class="caption-number">Table 40 </span><span class="caption-text">k-anonymity violations</span><a class="headerlink" href="#id29" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">k-anonymity</th>
<th class="head">Number HH violating</th>
<th class="head">Percentage</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>998</td>
<td>9.91%</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>1,384</td>
<td>13.75%</td>
</tr>
<tr class="row-even"><td>5</td>
<td>2,194</td>
<td>21.79%</td>
</tr>
</tbody>
</table>
<p>The global risk measures can be found using <em>R</em> as illustrated in
<a class="reference internal" href="#code922"><span class="std std-numref">Listing 76</span></a>. The global risk is 0.24%, which corresponds to 24 expected
re-identifications. Accounting for the hierarchical structure, this
rises to 1.26%, or 127 expected re-identifications. The global risk
measures are low compared to the number of <span class="math notranslate nohighlight">\(k\)</span>-anonymity violators due to
the low sampling weights. The high number of <span class="math notranslate nohighlight">\(k\)</span>-anonymity violators is
mainly due to the very detailed age variable. The risk measures are
based only on the individual level variables, since we assume that the
individual and household level variables are be used simultaneously by
an intruder. If we would consider an intruder scenario where these
variables are used simultaneously by an intruder to re-identify
individuals, the household level variables should also be taken into
account here. This would results in a high number of key variables.</p>
<div class="literal-block-wrapper docutils container" id="code922">
<div class="code-block-caption"><span class="caption-number">Listing 76 </span><span class="caption-text">Global risk of the individual-level variables</span><a class="headerlink" href="#code922" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kp">print</span><span class="p">(</span>sdcCombined<span class="p">,</span> <span class="s">&#39;risk&#39;</span><span class="p">)</span>
<span class="c1">## Risk measures:</span>
<span class="c1">##</span>
<span class="c1">## Number of observations with higher risk than the main part of the data: 0</span>
<span class="c1">## Expected number of re-identifications: 23.98 (0.24 %)</span>
<span class="c1">##</span>
<span class="c1">## Information on hierarchical risk:</span>
<span class="c1">## Expected number of re-identifications: 127.12 (1.26 %)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="step-7b-assessing-utility-individual-level">
<h3>Step 7b: Assessing utility (individual level)<a class="headerlink" href="#step-7b-assessing-utility-individual-level" title="Permalink to this headline">¶</a></h3>
<p>We evaluate the utility measures selected in Step 5 besides some general
utility measures. The values computed from the raw data are presented in
step 10b to allow for direct comparison with the values computed from
the anonymized data.</p>
</div>
<div class="section" id="step-8b-choice-and-application-of-sdc-methods-individual-level">
<h3>Step 8b: Choice and application of SDC methods (individual level)<a class="headerlink" href="#step-8b-choice-and-application-of-sdc-methods-individual-level" title="Permalink to this headline">¶</a></h3>
<p>We use the same approach for the anonymization of the individual-level
categorical key variables as for the household level categorical
variables described earlier: first use global recoding to limit the
necessary number of suppressions, then apply local suppressions and
finally, if necessary, use of perturbative methods.</p>
<p>The variable AGEYRS (i.e., age in years) has many different values (age
in months for children 0 – 1 years and age in years for individuals over
1 year). This level of detail leads to a high level of re-identification
risk, given external datasets with exact age as well as knowledge of the
exact age of close relatives. We have to reduce the level of detail in
the age variables by recoding the age values (see the Section
<a class="reference external" href="anon_methods.html#Recoding">Recoding</a> ). First, we recode the values from 15 to 65 in ten-year
intervals. Since some indicators related to education are computed from
the survey dataset, our first approach is not to recode the age range 0
– 15 years. For children under the age of 1 year, we reduce the level of
detail and recode these to 0 years. These recodes are shown in <a class="reference internal" href="#code923"><span class="std std-numref">Listing 77</span></a>.
We also top-code age at the age of 65 years. This protects
individuals with high (rare) age values.</p>
<div class="literal-block-wrapper docutils container" id="code923">
<div class="code-block-caption"><span class="caption-number">Listing 77 </span><span class="caption-text">Recoding age in 10-year intervals in the range 15 – 65 and top code age over 65 years</span><a class="headerlink" href="#code923" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Recoding age and top coding age (top code 65), below that 10 year age</span>
<span class="c1"># groups, children aged under 1 are recoded 0 (previously in months)</span>

sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS<span class="p">[</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS <span class="o">&gt;=</span> <span class="m">0</span> <span class="o">&amp;</span>
sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS <span class="o">&lt;</span> <span class="m">1</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="m">0</span>

sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS<span class="p">[</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS <span class="o">&gt;=</span> <span class="m">15</span> <span class="o">&amp;</span>
sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS <span class="o">&lt;</span> <span class="m">25</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="m">20</span>

<span class="kc">...</span>

sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS<span class="p">[</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS <span class="o">&gt;=</span> <span class="m">55</span> <span class="o">&amp;</span>
sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS <span class="o">&lt;</span> <span class="m">66</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="m">60</span>

<span class="c1"># topBotCoding also recalculates risk based on manual recoding above</span>
sdcCombined <span class="o">&lt;-</span> <span class="o">**</span>topBotCoding<span class="p">(</span>obj <span class="o">=</span> sdcCombined<span class="p">,</span> value <span class="o">=</span> <span class="m">65</span><span class="p">,</span>
replacement <span class="o">=</span> <span class="m">65</span><span class="p">,</span> kind <span class="o">=</span> <span class="s">&#39;top&#39;</span><span class="p">,</span> column <span class="o">=</span> <span class="s">&#39;AGEYRS&#39;</span><span class="p">)</span>

<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS<span class="p">)</span> <span class="c1"># check results</span>
<span class="c1">##    0    1    2    3    4    5    6    7    8    9   10   11   12   13   14</span>
<span class="c1">##  311  367  340  332  260  334  344  297  344  281  336  297  326  299  263</span>
<span class="c1">##   20   30   40   50   60   65</span>
<span class="c1">## 1847 1220  889  554  314  325</span>
</pre></div>
</td></tr></table></div>
</div>
<p>These recodes already reduce the risk to 531 individuals violating
3-anonymity. We could recode the values of age in the lower range
according to the age categories users require (e.g., 8 – 11 for
education). There are many different categories for different
indicators, however, including education indicators. This would reduce
the utility of the data for some users. Therefore, we decide to look
first at the number of suppressions needed in local suppression after
this limited recoding. If the number of suppressions is too high, we can
go back and recode age in the range 1 – 14 years.</p>
<p>In <a class="reference internal" href="#code924"><span class="std std-numref">Listing 78</span></a> we demonstrate how one might experiment with local
suppression to find the best option. We use local suppression to achieve
3-anonymity (see the Section <a class="reference external" href="anon_methods.html#Localsuppression">Local suppression</a> . On the first
attempt, we do not specify any importance vector; this leads to many
suppressions in the variable AGEYRS (see <a class="reference internal" href="#tab915"><span class="std std-numref">Table 41</span></a> below, first row),
however. This is undesirable from a utility point of view. Therefore, we
decide to specify an importance vector to prevent suppressions in the
variable AGEYRS. Suppressing the variable GENDER is also undesirable
from the utility point of view. The variable GENDER is a type of
variable that should not have suppressions. We set GENDER as variable
with the second highest importance. After specifying the importance
vector to prevent suppressions of the age variable, there are no age
suppressions (see <a class="reference internal" href="#tab915"><span class="std std-numref">Table 41</span></a>, second row). The total number of
suppressions in the other variables increased, however, from 253 to 323
because of the importance vector. This is to be expected because the
algorithm without the importance vector minimizes the total number of
suppressions by first suppressing values in variables with many
categories – in this case, age and gender. Specifying an importance
vector prevents reaching this optimality and hence leads to a higher
total number of suppressions. There is a trade-off between which
variables are suppressed and the total number of suppressions. After
specifying an importance vector, the variable REL has many suppressions
(see <a class="reference internal" href="#tab915"><span class="std std-numref">Table 41</span></a>, second row). We choose this second option.</p>
<div class="literal-block-wrapper docutils container" id="code924">
<div class="code-block-caption"><span class="caption-number">Listing 78 </span><span class="caption-text">Experimenting with different options in local suppression</span><a class="headerlink" href="#code924" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Copy of sdcMicro object to later undo steps</span>
sdcCopy <span class="o">&lt;-</span> sdcCombined

<span class="c1"># Importance vectors for local suppression (depending on utility measures)</span>
impVec1 <span class="o">&lt;-</span> <span class="kc">NULL</span> <span class="c1"># for optimal suppression</span>
impVec2 <span class="o">&lt;-</span> <span class="kp">rep</span><span class="p">(</span><span class="kp">length</span><span class="p">(</span>selectedKeyVarsIND<span class="p">),</span> <span class="kp">length</span><span class="p">(</span>selectedKeyVarsIND<span class="p">))</span>
impVec2<span class="p">[</span><span class="kp">match</span><span class="p">(</span><span class="s">&#39;AGEYRS&#39;</span><span class="p">,</span> selectedKeyVarsIND<span class="p">)]</span> <span class="o">&lt;-</span> <span class="m">1</span> <span class="c1"># AGEYRS</span>
impVec2<span class="p">[</span><span class="kp">match</span><span class="p">(</span><span class="s">&#39;GENDER&#39;</span><span class="p">,</span> selectedKeyVarsIND<span class="p">)]</span> <span class="o">&lt;-</span> <span class="m">2</span> <span class="c1"># GENDER</span>

<span class="c1"># Local suppression without importance vector</span>
sdcCombined <span class="o">&lt;-</span> localSuppression<span class="p">(</span>sdcCombined<span class="p">,</span> k <span class="o">=</span> <span class="m">2</span><span class="p">,</span> importance <span class="o">=</span> impVec1<span class="p">)</span>

<span class="c1"># Number of suppressions per variable</span>
<span class="kp">print</span><span class="p">(</span>sdcCombined<span class="p">,</span> <span class="s">&quot;ls&quot;</span><span class="p">)</span>

<span class="c1">## Local Suppression:</span>
<span class="c1">##       KeyVar | Suppressions (#) | Suppressions (%)</span>
<span class="c1">##       GENDER |                0 |            0.000</span>
<span class="c1">##          REL |               34 |            0.338</span>
<span class="c1">##      MARITAL |                0 |            0.000</span>
<span class="c1">##       AGEYRS |              195 |            1.937</span>
<span class="c1">##        EDUCY |                0 |            0.000</span>
<span class="c1">##  EDYRSCURRAT |                3 |            0.030</span>
<span class="c1">##     ATSCHOOL |                0 |            0.000</span>
<span class="c1">##    INDUSTRY1 |               21 |            0.209</span>

<span class="c1"># Number of suppressions per variable for each value of AGEYRS</span>
<span class="kp">table</span><span class="p">(</span>sdcCopy<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS<span class="p">)</span> <span class="o">-</span> <span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS<span class="p">)</span>

<span class="c1">##  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 20 30 40 50 60 65</span>
<span class="c1">##  0  0  0  0  0  0  2  0  2  1  0  1  4  1  5 25 53 37 36 15 13</span>

<span class="c1"># Undo local suppression</span>
sdcCombined <span class="o">&lt;-</span> undolast<span class="p">(</span>sdcCombined<span class="p">)</span>

<span class="c1"># Local suppression with importance vector on AGEYRS and GENDER</span>
sdcCombined <span class="o">&lt;-</span> localSuppression<span class="p">(</span>sdcCombined<span class="p">,</span> k <span class="o">=</span> <span class="m">2</span><span class="p">,</span> importance <span class="o">=</span> impVec2<span class="p">)</span>

<span class="c1"># Number of suppressions per variable</span>
<span class="kp">print</span><span class="p">(</span>sdcCombined<span class="p">,</span> <span class="s">&quot;ls&quot;</span><span class="p">)</span>
<span class="c1">## Local Suppression:</span>
<span class="c1">##       KeyVar | Suppressions (#) | Suppressions (%)</span>
<span class="c1">##       GENDER |                0 |            0.000</span>
<span class="c1">##          REL |              323 |            3.208</span>
<span class="c1">##      MARITAL |                0 |            0.000</span>
<span class="c1">##       AGEYRS |                0 |            0.000</span>
<span class="c1">##        EDUCY |                0 |            0.000</span>
<span class="c1">##  EDYRSCURRAT |                0 |            0.000</span>
<span class="c1">##     ATSCHOOL |                0 |            0.000</span>
<span class="c1">##    INDUSTRY1 |                0 |            0.000</span>

<span class="c1"># Number of suppressions for each value of the variable AGEYRS</span>
<span class="kp">table</span><span class="p">(</span>sdcCopy<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS<span class="p">)</span> <span class="o">-</span> <span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS<span class="p">)</span>
<span class="c1">##  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 20 30 40 50 60 65</span>
<span class="c1">##  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0</span>
</pre></div>
</td></tr></table></div>
</div>
<span id="tab915"></span><table border="1" class="colwidths-auto docutils align-center" id="id30">
<caption><span class="caption-number">Table 41 </span><span class="caption-text">Number of suppressions by variable for different variations of local suppression</span><a class="headerlink" href="#id30" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Local suppression options</th>
<th class="head">GENDER</th>
<th class="head">REL</th>
<th class="head">MARITAL</th>
<th class="head">AGEYRS</th>
<th class="head">EDUCY</th>
<th class="head">EDYRSCURATT</th>
<th class="head">ATSCHOOL</th>
<th class="head">INDUSTRY1</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>k = 2, no imp</td>
<td>0</td>
<td>34</td>
<td>0</td>
<td>195</td>
<td>0</td>
<td>3</td>
<td>0</td>
<td>21</td>
</tr>
<tr class="row-odd"><td>k = 2, imp on AGEYRS</td>
<td>0</td>
<td>323</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="step-9b-re-measure-risk-individual-level">
<h3>Step 9b: Re-measure risk (individual level)<a class="headerlink" href="#step-9b-re-measure-risk-individual-level" title="Permalink to this headline">¶</a></h3>
<p>We re-evaluate the risk measures selected in Step 6b. <a class="reference internal" href="#tab916"><span class="std std-numref">Table 42</span></a> shows
that local suppression, not surprisingly, has reduced the number of
individuals violating 2-anonymity to 0.</p>
<span id="tab916"></span><table border="1" class="colwidths-auto docutils align-center" id="id31">
<caption><span class="caption-number">Table 42 </span><span class="caption-text">k-anonymity violations</span><a class="headerlink" href="#id31" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">k-anonymity</th>
<th class="head">Number HH violating</th>
<th class="head">Percentage</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>0</td>
<td>0.00 %</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>197</td>
<td>1.96 %</td>
</tr>
<tr class="row-even"><td>5</td>
<td>518</td>
<td>5.15 %</td>
</tr>
</tbody>
</table>
<p>The hierarchical global risk was reduced to 0.11%, which corresponds to
11.3 expected re-identifications. The highest individual hierarchical
re-identification risk is 1.21%. These risk levels would seem acceptable
for a SUF.</p>
</div>
<div class="section" id="step-10b-re-measure-utility-individual-level">
<h3>Step 10b: Re-measure utility (individual level)<a class="headerlink" href="#step-10b-re-measure-utility-individual-level" title="Permalink to this headline">¶</a></h3>
<p>We selected two utility measures for the individual variables: primary
and secondary education enrollment, both also by gender. These two
measures are sensitive to changes in the variables gender (GENDER), age
(AGEYRS) and education (EDUCY and EDYRSATCURR), and therefore give a
good overview of the impact of the anonymization. As shown in <a class="reference internal" href="#tab917"><span class="std std-numref">Table 43</span></a>
the anonymization did not change the results. The results of the
tabulations in
<a class="reference external" href="appendices.html#AppendixC:InternalandExternalReportsforCaseStudies">Appendix C</a>
confirm these results.</p>
<span id="tab917"></span><table border="1" class="colwidths-auto docutils align-center" id="id32">
<caption><span class="caption-number">Table 43 </span><span class="caption-text">Net enrollment in primary and secondary education by gender</span><a class="headerlink" href="#id32" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">.</th>
<th class="head" colspan="3">Primary education</th>
<th class="head" colspan="3">Secondary education</th>
</tr>
<tr class="row-even"><th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>Before</td>
<td>72.6%</td>
<td>74.2%</td>
<td>70.9%</td>
<td>42.0%</td>
<td>44.8%</td>
<td>39.1%</td>
</tr>
<tr class="row-even"><td>After</td>
<td>72.6%</td>
<td>74.2%</td>
<td>70.9%</td>
<td>42.0%</td>
<td>44.8%</td>
<td>39.1%</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="step-11-audit-and-reporting">
<h3>Step 11: Audit and reporting<a class="headerlink" href="#step-11-audit-and-reporting" title="Permalink to this headline">¶</a></h3>
<p>In the audit step, we check whether the data allow for reproduction of
published figures from the original dataset and relationships between
variables and other data characteristics are preserved in the
anonymization process. In short, we check whether the dataset is valid
for analytical purposes. There are no figures available that were
published from the dataset and need to be reproducible from the
anonymized data.</p>
<p>In Step 2, we explored the data characteristics and relationships
between variables. These data characteristics and relationships have
been mainly preserved, since we took them into account when choosing the
appropriate anonymization methods. The variables TANHHEXP and
INCTOTGROSSHH are the sums of the individual components, because we
added noise to the components and reconstructed the aggregates by
summing over the components. Initially, the income variables were all
positive. This characteristic has been violated, as a result of noise
addition. Since values of the variable AGEYRS were not perturbed, but
only recoded and suppressed, we did not introduce unlikely combinations,
such as a 60-year-old individual enrolled in primary education. Also, by
separating the anonymization process into two parts, one for
household-level variables and one for individual-level variables, the
values of variables measured at the household level agree for all
members of each household.</p>
<p>Furthermore, we drafted two reports, internal and external, on the
anonymization of the case study dataset. The internal report includes
the methods used, the risk before and after anonymization as well as the
reasons for the selected methods and their parameters. The external
report focuses on the changes in the data and the loss in utility. Focus
here should be on the number of suppressions as well as the perturbative
methods (PRAM). This is described in the previous steps.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When creating a SUF, it is inevitable that there will be a loss of
information and it is very important for the users to be aware of these
changes and release them in a report that accompanies the data.</p>
</div>
<p><a class="reference external" href="appendices.html#AppendixC:InternalandExternalReportsforCaseStudies">Appendix C</a>
provides examples of an internal and external report of the
anonymization process of this dataset. Depending on the users and
readers of the reports, the content may differ. The code to this case
study shows how to obtain the information for the reports. Some measures
are also available in the standard reports generated with the report()
function. This is shown in <a class="reference internal" href="#code925"><span class="std std-numref">Listing 79</span></a>. The report() function will only
use the data available in the <em>sdcMicro</em> object, which does not contain
all households for sdcHH.</p>
<div class="literal-block-wrapper docutils container" id="code925">
<div class="code-block-caption"><span class="caption-number">Listing 79 </span><span class="caption-text">Using the report() function for internal and external reports</span><a class="headerlink" href="#code925" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Create reports with sdcMicro report() function</span>
report<span class="p">(</span>sdcHH<span class="p">,</span> internal <span class="o">=</span> <span class="bp">F</span><span class="p">)</span> <span class="c1"># external (brief) report</span>
report<span class="p">(</span>sdcHH<span class="p">,</span> internal <span class="o">=</span> <span class="bp">T</span><span class="p">)</span> <span class="c1"># internal (extended) report</span>

<span class="c1"># Create reports with sdcMicro report() function</span>
report<span class="p">(</span>sdcCombined<span class="p">,</span> internal <span class="o">=</span> <span class="bp">F</span><span class="p">)</span> <span class="c1"># external (brief) report</span>
report<span class="p">(</span>sdcCombined<span class="p">,</span> internal <span class="o">=</span> <span class="bp">T</span><span class="p">)</span> <span class="c1"># internal (extended) report</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="step-12-data-release">
<h3>Step 12: Data release<a class="headerlink" href="#step-12-data-release" title="Permalink to this headline">¶</a></h3>
<p>The final step is the release of the anonymized dataset together with
the external report. <a class="reference internal" href="#code926"><span class="std std-numref">Listing 80</span></a> shows how to collect the data from the
<em>sdcMicro</em> object with the extractManipData() function. Before releasing
the file, we add an individual ID to the file (line number in
household). We export the anonymized dataset in as <em>STATA</em> file. The Section
<a class="reference external" href="sdcMicro.html#ReadfunctionsinR">Read functions in R</a>
presents functions for exporting files in other data formats.</p>
<div class="literal-block-wrapper docutils container" id="code926">
<div class="code-block-caption"><span class="caption-number">Listing 80 </span><span class="caption-text">Exporting the anonymized dataset</span><a class="headerlink" href="#code926" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Anonymized dataset</span>
<span class="c1"># Household variables and individual variables</span>
<span class="c1"># extracts all variables, not just the manipulated ones</span>
dataAnon <span class="o">&lt;-</span> extractManipData<span class="p">(</span>sdcCombined<span class="p">,</span> ignoreKeyVars <span class="o">=</span> <span class="bp">F</span><span class="p">,</span> ignorePramVars <span class="o">=</span> <span class="bp">F</span><span class="p">,</span>
                             ignoreNumVars <span class="o">=</span> <span class="bp">F</span><span class="p">,</span> ignoreStrataVar <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>

<span class="c1"># Create STATA file</span>
write.dta<span class="p">(</span>dataframe <span class="o">=</span> dataAnon<span class="p">,</span> file<span class="o">=</span> <span class="s">&#39;Case1DataAnon.dta&#39;</span><span class="p">,</span> convert.dates<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
</div>
<div class="section" id="case-study-2-puf">
<h2>Case study 2 - PUF<a class="headerlink" href="#case-study-2-puf" title="Permalink to this headline">¶</a></h2>
<p>This case study is a continuation of case study 1 in the Section
<a class="reference internal" href="#case-study-1-suf">Case study 1- SUF</a> . Case
study 1 produces a SUF file. In this case study we use this SUF file to
produce a PUF file of the same dataset, which can be freely distributed.
The structure of the SUF and PUF releases will be the same. However, the
PUF will contain fewer variables and less (detailed) information than
the SUF. We refer to the Section <a class="reference internal" href="#case-study-1-suf">Case study 1- SUF</a>
for a description of the dataset.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is also possible to directly produce a PUF from a dataset
without first creating a SUF.</p>
</div>
<p>As in case study 1, we show how the creation of a PUF can be achieved
using the open source and free <em>sdcMicro</em> package and <em>R</em>. A
ready-to-run <em>R</em> script for this case study and the dataset are also
available to reproduce the results and allow the user to adapt the code
(see&nbsp;<a class="reference external" href="http://ihsn.org/home/projects/sdc-practice">http://ihsn.org/home/projects/sdc-practice</a>). Extracts of this code
are presented in this section to illustrate several steps of the
anonymization process.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The choices of methods and parameters in this case study are based on this particular dataset and the results and
choices might be different for other datasets.</p>
</div>
<p>This case study follows the steps of the SDC process outlined in
<a class="reference external" href="process.html">The SDC Process</a>.</p>
<div class="section" id="id4">
<h3>Step 1: Need for disclosure control<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>The same reasoning as in case study 1 applies: the SUF dataset produced
in case study 1 contains data on individuals and households and some
variables are confidential and/or sensitive. The decisions made in case
study 1 are based on the disclosure scenarios for a SUF release. The
anonymization applied for the SUF does not provide sufficient protection
for the release as PUF and the SUF file cannot be released as PUF
without further treatment. Therefore, we have to repeat the SDC process
with a different set of disclosure scenarios based on the
characteristics of a PUF release (see Step 4). This leads to different
risk measures, lower accepted risk levels and different SDC methods.</p>
</div>
<div class="section" id="id5">
<h3>Step 2: Data preparation and exploring data characteristics<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>In order to guarantee consistency between the released PUF and SUF
files, which is required to prevent intruders from using the datasets
together (SUF users have also access to the PUF file), we have to use
the anonymized SUF file to create the PUF file (see also the Section
<a class="reference external" href="process.html#Step3:Typeofrelease">Step 3: Type of release</a>).
In this way all information in the PUF file is also contained in the
SUF, and the PUF does not provide additional information to an intruder
with access to the SUF. We load the required packages to read the data
(<em>foreign</em> package for <em>STATA</em> files) and load the SUF dataset into
“file” as illustrated in <a class="reference internal" href="#code927"><span class="std std-numref">Listing 81</span></a>. We also load the original data
file (raw data) as “fileOrig”. We need the raw data to undo perturbative
methods used in case study 1 (see Step 8) and to compare data utility
measures (see Step 5). To evaluate the utility loss in the PUF, we have
to compare the information in the anonymized PUF file with the
information in the raw data. For an overview of the data characteristics
and a description of the variables in both files, we refer to Step 2 of
<a class="reference internal" href="#case-study-1-suf">Case study 1- SUF</a> .</p>
<div class="literal-block-wrapper docutils container" id="code927">
<div class="code-block-caption"><span class="caption-number">Listing 81 </span><span class="caption-text">Loading required packages and datasets</span><a class="headerlink" href="#code927" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Load required packages</span>
<span class="kn">library</span><span class="p">(</span>foreign<span class="p">)</span>  <span class="c1"># for read/write function for STATA</span>
<span class="kn">library</span><span class="p">(</span>sdcMicro<span class="p">)</span> <span class="c1"># sdcMicro package</span>

<span class="c1"># Set working directory - set to the path on your machine</span>
<span class="kp">setwd</span><span class="p">(</span><span class="s">&quot;/Users/CaseStudy2&quot;</span><span class="p">)</span>

<span class="c1"># Specify file name of SUF file from case study 1</span>
fname <span class="o">&lt;-</span> <span class="s">&quot;CaseDataAnon.dta&quot;</span>

<span class="c1"># Specify file name of original dataset (raw data)</span>
fnameOrig <span class="o">&lt;-</span> <span class="s">&quot;CaseA.dta&quot;</span>

<span class="c1"># Read-in files</span>
file     <span class="o">&lt;-</span> read.dta<span class="p">(</span>fname<span class="p">,</span> convert.factors <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># SUF file case study 1</span>
fileOrig <span class="o">&lt;-</span> read.dta<span class="p">(</span>fnameOrig<span class="p">,</span> convert.factors <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># original data</span>
</pre></div>
</td></tr></table></div>
</div>
<p>We check the number of variables and number of observations of both
files and the variable names of the SUF file, as shown in <a class="reference internal" href="#code928"><span class="std std-numref">Listing 82</span></a>.
The PUF file has fewer records and fewer variables than the original
data file, since we removed large households and several variables to
generate the SUF file.</p>
<div class="literal-block-wrapper docutils container" id="code928">
<div class="code-block-caption"><span class="caption-number">Listing 82 </span><span class="caption-text">Number of individuals and variables and variable names</span><a class="headerlink" href="#code928" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Dimensions of file (observations, variables)</span>
<span class="kp">dim</span><span class="p">(</span><span class="kp">file</span><span class="p">)</span>
<span class="c1">## [1] 10068    49</span>

<span class="kp">dim</span><span class="p">(</span>fileOrig<span class="p">)</span>
<span class="c1">## [1] 10574    68</span>

<span class="kp">colnames</span><span class="p">(</span><span class="kp">file</span><span class="p">)</span> <span class="c1"># Variable names</span>
<span class="c1">##  [1] &quot;IDH&quot;           &quot;URBRUR&quot;        &quot;REGION&quot;        &quot;HHSIZE&quot;</span>
<span class="c1">##  [5] &quot;OWNAGLAND&quot;     &quot;RELIG&quot;         &quot;ROOF&quot;          &quot;TOILET&quot;</span>
<span class="c1">##  [9] &quot;WATER&quot;         &quot;ELECTCON&quot;      &quot;FUELCOOK&quot;      &quot;OWNMOTORCYCLE&quot;</span>
<span class="c1">## [13] &quot;CAR&quot;           &quot;TV&quot;            &quot;LIVESTOCK&quot;     &quot;LANDSIZEHA&quot;</span>
<span class="c1">## [17] &quot;TANHHEXP&quot;      &quot;TFOODEXP&quot;      &quot;TALCHEXP&quot;      &quot;TCLTHEXP&quot;</span>
<span class="c1">## [21] &quot;THOUSEXP&quot;      &quot;TFURNEXP&quot;      &quot;THLTHEXP&quot;      &quot;TTRANSEXP&quot;</span>
<span class="c1">## [25] &quot;TCOMMEXP&quot;      &quot;TRECEXP&quot;       &quot;TEDUEXP&quot;       &quot;TRESTHOTEXP&quot;</span>
<span class="c1">## [29] &quot;TMISCEXP&quot;      &quot;INCTOTGROSSHH&quot; &quot;INCRMT&quot;        &quot;INCWAGE&quot;</span>
<span class="c1">## [33] &quot;INCFARMBSN&quot;    &quot;INCNFARMBSN&quot;   &quot;INCRENT&quot;       &quot;INCFIN&quot;</span>
<span class="c1">## [37] &quot;INCPENSN&quot;      &quot;INCOTHER&quot;      &quot;WGTPOP&quot;        &quot;IDP&quot;</span>
<span class="c1">## [41] &quot;GENDER&quot;        &quot;REL&quot;           &quot;MARITAL&quot;       &quot;AGEYRS&quot;</span>
<span class="c1">## [45] &quot;EDUCY&quot;         &quot;EDYRSCURRAT&quot;   &quot;ATSCHOOL&quot;      &quot;INDUSTRY1&quot;</span>
<span class="c1">## [49] &quot;WGTHH&quot;</span>
</pre></div>
</td></tr></table></div>
</div>
<p>To get an overview of the values of the variables, we use tabulations
and cross-tabulations for categorical variables and summary statistics
for continuous variables. To include the number of missing values (‘NA’
or other), we use the option useNA = “ifany” in the table() function.
For some variables, these tabulations differ from the tabulations of the
raw data, due to the anonymization of the SUF file.</p>
<p>In <a class="reference internal" href="#tab918"><span class="std std-numref">Table 44</span></a> the variables in the dataset “file” are listed along with
concise descriptions of the variables, the level at which they are
collected (individual level (IND) or household level (HH)), the
measurement type (continuous, semi-continuous or categorical) and value
ranges. Note that the dataset contains a selection of 49 variables of
the 68 variable selected for the SUF release. The variables have been
preselected based on their relevance for data users and some variables
were removed while creating a SUF file. The numerical values for many of
the categorical variables are codes that refer to values, e.g., in the
variable “URBRUR”, 1 stands for ‘rural’ and 2 for ‘urban’. More
information on the meanings of coded values of the categorical variables
is available in the <em>R</em> code for this case study.</p>
<p>Any data cleaning, such as recoding missing value codes and removing
empty variables, was already done in case study 1. The same holds for
removing any direct identifiers. Direct identifiers are not released in
the SUF file.</p>
<p>We identified the following sensitive variables in the dataset:
variables related to schooling and labor force status as well as income
and expenditure related variables. These variables need protection.
Whether a variable is considered sensitive may depend on the release
type, country and the dataset itself.</p>
<span id="tab918"></span><table border="1" class="colwidths-auto docutils align-center" id="id33">
<caption><span class="caption-number">Table 44 </span><span class="caption-text">Overview of the variables in the dataset</span><a class="headerlink" href="#id33" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">No.</th>
<th class="head">Variable name</th>
<th class="head">Description</th>
<th class="head">Level</th>
<th class="head">Measurement</th>
<th class="head">Values</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>IDH</td>
<td>Household ID</td>
<td>HH</td>
<td>.</td>
<td>1-2,000</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>IDP</td>
<td>Individual ID</td>
<td>IND</td>
<td>.</td>
<td>1-13</td>
</tr>
<tr class="row-even"><td>3</td>
<td>REGION</td>
<td>Region</td>
<td>HH</td>
<td>categorical</td>
<td>1-6</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>URBRUR</td>
<td>Area of residence</td>
<td>HH</td>
<td>categorical</td>
<td>1, 2</td>
</tr>
<tr class="row-even"><td>5</td>
<td>WGTHH</td>
<td>Individual weighting coefficient</td>
<td>HH</td>
<td>weight</td>
<td>31.2-8495.7</td>
</tr>
<tr class="row-odd"><td>6</td>
<td>WGTPOP</td>
<td>Population weighting coefficient</td>
<td>IND</td>
<td>weight</td>
<td>45.8-93452.2</td>
</tr>
<tr class="row-even"><td>7</td>
<td>HHSIZE</td>
<td>Household size</td>
<td>HH</td>
<td>semi-continuous</td>
<td>1-33</td>
</tr>
<tr class="row-odd"><td>8</td>
<td>GENDER</td>
<td>Gender</td>
<td>IND</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-even"><td>9</td>
<td>REL</td>
<td>Relationship to household head</td>
<td>IND</td>
<td>categorical</td>
<td>1-9</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>MARITAL</td>
<td>Marital status</td>
<td>IND</td>
<td>categorical</td>
<td>1-6</td>
</tr>
<tr class="row-even"><td>11</td>
<td>AGEYRS</td>
<td>Age in completed years</td>
<td>IND</td>
<td>semi-continuous</td>
<td>0-65</td>
</tr>
<tr class="row-odd"><td>12</td>
<td>RELIG</td>
<td>Religion of household head</td>
<td>HH</td>
<td>categorical</td>
<td>1, 5-7, 9</td>
</tr>
<tr class="row-even"><td>13</td>
<td>ATSCHOOL</td>
<td>Currently enrolled in school</td>
<td>IND</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>14</td>
<td>EDUCY</td>
<td>Highest
level of education attended</td>
<td>IND</td>
<td>categorical</td>
<td>1-6</td>
</tr>
<tr class="row-even"><td>15</td>
<td>EDYRSCUR
AT</td>
<td>Years of
education for currently enrolled</td>
<td>IND</td>
<td>semi-continuous</td>
<td>1-18</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>INDUSTRY</td>
<td>Industry
classification (1-digit)</td>
<td>IND</td>
<td>categorical</td>
<td>1-10</td>
</tr>
<tr class="row-even"><td>17</td>
<td>ROOF</td>
<td>Main
material used for roof</td>
<td>IND</td>
<td>categorical</td>
<td>1-5, 9</td>
</tr>
<tr class="row-odd"><td>18</td>
<td>TOILET</td>
<td>Main
toilet facility</td>
<td>HH</td>
<td>categorical</td>
<td>1-4, 9</td>
</tr>
<tr class="row-even"><td>19</td>
<td>ELECTCON</td>
<td>Electricity</td>
<td>HH</td>
<td>categorical</td>
<td>0-3</td>
</tr>
<tr class="row-odd"><td>20</td>
<td>FUELCOOK</td>
<td>Main
cooking fuel</td>
<td>HH</td>
<td>categorical</td>
<td>1-5, 9</td>
</tr>
<tr class="row-even"><td>21</td>
<td>WATER</td>
<td>Main
source of water</td>
<td>HH</td>
<td>categorical</td>
<td>1-9</td>
</tr>
<tr class="row-odd"><td>22</td>
<td>OWNAGLAN</td>
<td>Ownership
of agricultural land</td>
<td>HH</td>
<td>categorical</td>
<td>1-3</td>
</tr>
<tr class="row-even"><td>23</td>
<td>LANDSIZE</td>
<td>Land size owned by household (ha)
(agric and non agric)</td>
<td>HH</td>
<td>continuous</td>
<td>0-40</td>
</tr>
<tr class="row-odd"><td>24</td>
<td>OWNMOTORYCLE</td>
<td>Ownership of motorcycle</td>
<td>HH</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-even"><td>25</td>
<td>CAR</td>
<td>Ownership of car</td>
<td>HH</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-odd"><td>26</td>
<td>TV</td>
<td>Ownership
of television</td>
<td>HH</td>
<td>categorical</td>
<td>0, 1</td>
</tr>
<tr class="row-even"><td>27</td>
<td>LIVESTOC</td>
<td>Number of
large-sized livestock owned</td>
<td>HH</td>
<td>semi-continuous</td>
<td>0-25</td>
</tr>
<tr class="row-odd"><td>28</td>
<td>INCRMT</td>
<td>Income – Remittances</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>29</td>
<td>INCWAGE</td>
<td>Income - Wages and salaries</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>30</td>
<td>INCFARMBSN</td>
<td>Income - Gross income
from household farm businesses</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>31</td>
<td>INCNFARMBSN</td>
<td>Income - Gross income from
household nonfarm businesses</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>32</td>
<td>INCRENT</td>
<td>Income - Rent</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>33</td>
<td>INCFIN</td>
<td>Income - Financial</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>34</td>
<td>INCPENSN</td>
<td>Income - Pensions/social assistance</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>35</td>
<td>INCOTHER</td>
<td>Income - Other</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>36</td>
<td>INCTOTGROSHH</td>
<td>Income - Total</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>37</td>
<td>FARMEMP</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>38</td>
<td>TFOODEXP</td>
<td>Total expenditure on food</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>39</td>
<td>TALCHEXP</td>
<td>Total expenditure on alcoholic
beverages, tobacco and narcotics</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>40</td>
<td>TCLTHEXP</td>
<td>Total expenditure on clothing</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>41</td>
<td>THOUSEXP</td>
<td>Total expenditure on housing</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>42</td>
<td>TFURNEXP</td>
<td>Total expenditure on furnishing</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>43</td>
<td>THLTHEXP</td>
<td>Total expenditure on health</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>43</td>
<td>TTRANSEXP</td>
<td>Total expenditure on transport</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>44</td>
<td>TCOMMEXP</td>
<td>Total expenditure on communication</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>45</td>
<td>TRECEXP</td>
<td>Total expenditure on recreation</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>46</td>
<td>TEDUEXP</td>
<td>Total expenditure on education</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>47</td>
<td>TRESHOTEXP</td>
<td>Total expenditure on restaurants
and hotels</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>48</td>
<td>TMISCEXP</td>
<td>Total expenditure on
miscellaneous spending</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>49</td>
<td>TANHHEXP</td>
<td>Total annual nominal household
expenditures</td>
<td>HH</td>
<td>continuous</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>It is always important to ensure that the relationships between
variables in the data are preserved during the anonymization process and
to explore and take note of these relationships before beginning the
anonymization. At the end of the anonymization process before the
release of the data, an audit should be conducted, using these initial
results, to check that these relationships are maintained in the
anonymized dataset (see Step 11).</p>
<p>In our dataset, we identify several relationships between variables that
need to be preserved during the anonymization process. The variables
“TANHHEXP” and “INCTOTGROSSHH” represent the total annual nominal
household expenditure and the total gross annual household income,
respectively, and these variables are aggregations of existing income
and expenditure components in the dataset.</p>
<p>The variables related to education are available only for individuals in
the appropriate age groups and missing for other individuals. In
addition, the household-level variables (cf. fourth column of <a class="reference internal" href="#tab918"><span class="std std-numref">Table 44</span></a>)
have the same values for all members in any particular household.
The value of household size corresponds to the actual number of
individuals belonging to that household in the dataset. As we proceed,
we have to take care that these relationships and structures are
preserved in the anonymization process.</p>
<p>We assume that the data are collected in a survey that uses simple
sampling of households. The data contains two weight coefficients:
“WGTHH” and “WGTPOP”. The relationship between the weights is
<span class="math notranslate nohighlight">\(WGTPOP = WGTHH * HHSIZE\)</span>. “WGTPOP” is the sampling weight
for the households and “WGTHH” is the sampling weight for the
individuals to be used for disclosure risk calculations. “WGTHH” is used
for computing individual-level indicators (such as education) and
“WGTPOP” is used for population level indicators (such as income
indicators). There are no strata variables available in the data. We
will use “WGTPOP” for the anonymization of the household variables and
“WGTHH” for the anonymization of the individual-level variables.</p>
</div>
<div class="section" id="id6">
<h3>Step 3: Type of release<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>In this case study, we assume that the file will be released as a PUF,
which will be freely available to anyone interested in the data (see
the Section <a class="reference external" href="release_types.html#ConditionsforPUFs">Conditions for PUFs</a>
for the conditions and more information on the release of
PUFs). The PUF release is intended for users with lower information
requirements (e.g., students) and researchers interested in the
structure of the data and willing to do preliminary research. The PUF
file can give an idea to the researcher whether it is worthwhile for
their research to apply for access to the SUF file. Researchers willing
to do more in-depth research will most likely apply for SUF access.
Generally, users of a PUF file are not restricted by an agreement that
prevents them from using the data to re-identify individuals and hence
the accepted risk level is much lower than in the case of the SUF and
the set of released variables is limited.</p>
</div>
<div class="section" id="id7">
<h3>Step 4: Intruder scenarios and choice of key variables<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Next, based on the release type, we reformulate the intruder scenarios
for the PUF release. This leads to the selection of a set of
quasi-identifiers. Since this case study is based on a demo dataset, we
do not have a real context and we cannot define exact disclosure
scenarios. Therefore, we make hypothetical assumptions on possible
disclosure scenarios. We consider two types of disclosure scenarios: 1)
matching with other publically available datasets and 2) spontaneous
recognition. Since the dataset will be distributed as PUF, there are de
facto no restrictions on the use of the dataset by intruders.</p>
<p>For the sake of illustration, we assume that population registers are
available with the demographic variables gender, age, place of residence
(region, urban/rural), religion and other variables such as marital
status and variables relating to education and professional status that
are also present in our dataset. In addition, we assume that there is a
publically available cadastral register on land ownership. Based on this
analysis of available data sources, we have selected in case study 1 the
variables “REGION”, “URBRUR”, “HHSIZE”, “OWNAGLAND”, “RELIG”, “GENDER”,
“REL” (relationship to household head), “MARITAL” (marital status),
“AGEYRS”, “INDUSTRY1” and two variables relating to school attendance as
categorical quasi-identifiers, the expenditure and income variables as
well as LANDSIZEHA as continuous quasi-identifiers. According to our
assessment, these variables might enable an intruder to re-identify an
individual or household in the dataset by matching with other available
datasets. The key variables for PUF release generally coincide with the
key variables for the SUF release. Possibly, more variables could be
added, since the user has more possibilities to match the data
extensively and is not bound by any contract, as is in the case of the
SUF file. Equally, some key variables in the SUF file may not be
released in the PUF file and, as a consequence, these variables are
removed from the list of key variables.</p>
<p>Upon further consideration, this initial set of identifying variables is
too large for a PUF release, as the number of possible combinations
(keys) is very high and hence many respondents could be identified based
on these variables. Therefore, we decide to limit the set of key
variables, by excluding variables from the dataset for PUF release. The
choice of variables to be removed is led by the needs of the intended
PUF users. Assuming the typical users are mainly interested in aggregate
income and expenditure data, we can therefore remove from the initial
set of key variables “OWNAGLAND”, “RELIG” and “LANDSIZEHA” at the
household level and “EDYRSCURRAT” and “ATSCHOOL” at the individual
level.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These variables will not be released in the PUF file.</p>
</div>
<p>We also remove the income and expenditure components from the list of
key variables, since we reduce their information content by building
proportions (see Step 8a). The list of the remaining key variables is
presented in <a class="reference internal" href="#tab919"><span class="std std-numref">Table 45</span></a>.</p>
<span id="tab919"></span><table border="1" class="colwidths-auto docutils align-center" id="id34">
<caption><span class="caption-number">Table 45 </span><span class="caption-text">Overview of selected key variables for PUF file</span><a class="headerlink" href="#id34" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable name</th>
<th class="head">Variable description</th>
<th class="head">Measurement level</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>REGION</td>
<td>region</td>
<td>Household,
categorical</td>
</tr>
<tr class="row-odd"><td>URBRUR</td>
<td>area of residence</td>
<td>Household,
categorical</td>
</tr>
<tr class="row-even"><td>HHSIZE</td>
<td>household size</td>
<td>Household,
categorical</td>
</tr>
<tr class="row-odd"><td>TANHHEXP</td>
<td>total expenditure</td>
<td>Household, continuous</td>
</tr>
<tr class="row-even"><td>INCTOTGROSSHH</td>
<td>total income</td>
<td>Household, continuous</td>
</tr>
<tr class="row-odd"><td>GENDER</td>
<td>gender</td>
<td>Individual,
categorical</td>
</tr>
<tr class="row-even"><td>REL</td>
<td>relationship to
household head</td>
<td>Individual,
categorical</td>
</tr>
<tr class="row-odd"><td>MARITAL</td>
<td>marital status</td>
<td>Individual,
categorical</td>
</tr>
<tr class="row-even"><td>AGEYRS</td>
<td>age in completed
years</td>
<td>Individual,
semi-continuous/categorical</td>
</tr>
<tr class="row-odd"><td>EDUCY</td>
<td>highest level of
education completed</td>
<td>Individual,
categorical</td>
</tr>
<tr class="row-even"><td>INDUSTRY1</td>
<td>industry
classification</td>
<td>Individual,
categorical</td>
</tr>
</tbody>
</table>
<p>The decision to release the dataset as a PUF means the level of
anonymization will be relatively high and consequently, the variables
are less detailed (e.g., after recoding) and a scenario of spontaneous
recognition is less likely. Nevertheless, we should check for rare
combinations or unusual patterns in the variables. Variables that may
lead to spontaneous recognition in our sample are amongst others
“HHSIZE” (household size) as well as “INCTOTGROSSHH” (aggregate income)
and “TANHHEXP” (total expenditure). Large households and households with
high income are easily identifiable, especially when combined with other
identifying variables such as a geographical identifier (“REGION”).
There might be only one or a few households/individuals in a certain
region with a high income, such as the local doctor. Variables that are
easily observable and known by neighbors such as “ROOF”, “TOILET”,
“WATER”, “ELECTCON”, “FUELCOOK”, “OWNMOTORCYCLE”, “CAR”, “TV” and
“LIVESTOCK” may also need protection depending on what stands out in the
community, since a user might be able to identify persons (s)he knows.
This is called the nosy-neighbor scenario.</p>
</div>
<div class="section" id="id8">
<h3>Step 5: Data key uses and selection of utility measures<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>A PUF file contains less information and the file is generally used by
students as a teaching file, by researchers to get an idea about the
data structure, and for simple analyses. The users have generally lower
requirements than for a SUF file and the results of analysis may be less
precise. The researcher interested in a more detailed dataset, would
have to apply for access to the SUF file. Therefore, we select more
aggregate utility measures for the PUF file that reflect the intended
use of a PUF file. Data intensive measures, such as the Gini
coefficient, cannot be computed from the PUF file. Besides the standard
utility measures, such as tabulations, we evaluate the decile dispersion
ratio and a regression with the income deciles as regressand.</p>
<p>To measure the information loss, we should compare the initial data file
before any anonymization (including the anonymization for the SUF) with
the file after the anonymization for the PUF. Comparing the files
directly before and after the PUF anonymization would underestimate the
information loss, as this would omit the information loss due to SUF
anonymization. Therefore, in Step 2, we also loaded the raw dataset.</p>
<p><strong>Hierarchical (household) structure</strong></p>
<p>As noted in case study 1, the data has a household structure. For the
SUF release, we protected large households by removing these from the
dataset. Since some variables are measured on the household level and
thus have identical values for each household member, the values of the
household variables should be treated in the same way for each household
member (see the Section
<a class="reference external" href="anon_methods.html#Anonymizationofthequasi-identifierhouseholdsize">Anonymization of the quasi-identifier household size</a>
). Therefore, we first anonymize only the
household variables. After this, we merge them with the individual-level
variables and then anonymize the individual-level and household-level
variables jointly.</p>
<p>Since the data has a hierarchical structure, Steps 6 through 10 are
repeated twice: Steps 6a through 10a are for the household-level
variables and Steps 6b through 10b for the combined dataset. In this
way, we ensure that household-level variable values remain consistent
across household members for each household and the household structure
cannot be used to re-identify individuals. This is further explained in
the Sections <a class="reference external" href="measure_risk.html#Levelsofrisk">Levels of risk</a>
and <a class="reference external" href="sdcMicro.html#Householdstructure">Household structure</a>.</p>
<p>Before continuing to Step 6a, we select the categorical key variables,
continuous key variables and any variables selected for use in PRAM
routines, as well as household-level sampling weights in <em>R</em>. We also
collect the variable names of the variables that will not be released.
The PRAM variables are variables select for the PRAM routine, which we
discuss further in Step 8a. We extract these selected household
variables from the SUF dataset and save them as “fileHH”. The choice of
PRAM variables is further explained in Step 8a. <a class="reference internal" href="#code929"><span class="std std-numref">Listing 83</span></a> illustrates
how these steps are done in <em>R</em> (see also the Section
<a class="reference external" href="sdcMicro.html#Householdstructure">Household structure</a>).</p>
<div class="literal-block-wrapper docutils container" id="code929">
<div class="code-block-caption"><span class="caption-number">Listing 83 </span><span class="caption-text">Selecting the variables for the household-level anonymization</span><a class="headerlink" href="#code929" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Categorical key variables at household level</span>
selectedKeyVarsHH <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;URBRUR&#39;</span><span class="p">,</span> <span class="s">&#39;REGION&#39;</span><span class="p">,</span> <span class="s">&#39;HHSIZE&#39;</span><span class="p">)</span>

<span class="c1"># Continuous key variables</span>
numVarsHH <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;TANHHEXP&#39;</span><span class="p">,</span> <span class="s">&#39;INCTOTGROSSHH&#39;</span><span class="p">)</span>

<span class="c1"># PRAM variables</span>
pramVarsHH <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;ROOF&#39;</span><span class="p">,</span> <span class="s">&#39;TOILET&#39;</span><span class="p">,</span> <span class="s">&#39;WATER&#39;</span><span class="p">,</span> <span class="s">&#39;ELECTCON&#39;</span><span class="p">,</span>
                <span class="s">&#39;FUELCOOK&#39;</span><span class="p">,</span> <span class="s">&#39;OWNMOTORCYCLE&#39;</span><span class="p">,</span> <span class="s">&#39;CAR&#39;</span><span class="p">,</span> <span class="s">&#39;TV&#39;</span><span class="p">,</span> <span class="s">&#39;LIVESTOCK&#39;</span><span class="p">)</span>

<span class="c1"># Household weight</span>
weightVarHH <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;WGTPOP&#39;</span><span class="p">)</span>

<span class="c1"># Variables not suitable for release in PUF (HH level)</span>
varsNotToBeReleasedHH <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;OWNAGLAND&quot;</span><span class="p">,</span> <span class="s">&quot;RELIG&quot;</span><span class="p">,</span> <span class="s">&quot;LANDSIZEHA&quot;</span><span class="p">)</span>

<span class="c1"># Vector with names of all HH level variables</span>
HHVars <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;IDH&#39;</span><span class="p">,</span> selectedKeyVarsHH<span class="p">,</span> pramVarsHH<span class="p">,</span> numVarsHH<span class="p">,</span> weightVarHH<span class="p">)</span>

<span class="c1"># Create subset of file with only HH level variables</span>
fileHH <span class="o">&lt;-</span> <span class="kp">file</span><span class="p">[,</span>HHVars<span class="p">]</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Every household has the same number of entries as it has members (e.g.,
a household of three will be repeated three times in “fileHH”). Before
analyzing the household-level variables, we select only one entry per
household, as illustrated in <a class="reference internal" href="#code930"><span class="std std-numref">Listing 84</span></a>. This is further explained in
the Section <a class="reference external" href="sdcMicro.html#Householdstructure">Household structure</a>.
In the same way we extract “fileOrigHH” from “fileOrig”.
“fileOrigHH” contains all variables from the raw data, but contains
every household only once. We need “fileOrigHH” in Steps 8a and 10a for
undoing some perturbative methods used in the SUF file and computing
utility measures from the raw data respectively.</p>
<div class="literal-block-wrapper docutils container" id="code930">
<div class="code-block-caption"><span class="caption-number">Listing 84 </span><span class="caption-text">Taking a subset with only households</span><a class="headerlink" href="#code930" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Remove duplicated rows based on IDH, one row per household in fileHH</span>
fileHH <span class="o">&lt;-</span> fileHH<span class="p">[</span><span class="kp">which</span><span class="p">(</span><span class="o">!</span><span class="kp">duplicated</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">)),]</span> <span class="c1"># SUF file</span>
fileOrigHH <span class="o">&lt;-</span> fileOrig<span class="p">[</span><span class="kp">which</span><span class="p">(</span><span class="o">!</span><span class="kp">duplicated</span><span class="p">(</span>fileOrig<span class="o">$</span>IDH<span class="p">)),]</span> <span class="c1"># original dataset</span>

<span class="c1"># Dimensions of fileHH</span>
<span class="kp">dim</span><span class="p">(</span>fileHH<span class="p">)</span>
<span class="c1">## [1] 1970   16</span>

<span class="kp">dim</span><span class="p">(</span>fileOrigHH<span class="p">)</span>
<span class="c1">## [1] 2000   68</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The file “fileHH” contains 1,970 households and 16 variables. We are now
ready to create our <em>sdcMicro</em> object with the corresponding variables
we selected in <a class="reference internal" href="#code928"><span class="std std-numref">Listing 82</span></a>. For our case study, we will create an
<em>sdcMicro</em> object called “sdcHH” based on the data in “fileHH”, which we
will use for steps 6a – 10a (see <a class="reference internal" href="#code934"><span class="std std-numref">Listing 88</span></a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When the sdcMicro object is created, the sdcMicro package automatically
calculates and stores the risk measures for the data.</p>
</div>
<p>This leads us to Step 6a.</p>
<div class="literal-block-wrapper docutils container" id="code931">
<div class="code-block-caption"><span class="caption-number">Listing 85 </span><span class="caption-text">Creating a <em>sdcMicro</em> object for the household variables</span><a class="headerlink" href="#code931" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Create initial sdcMicro object for household level variables</span>
sdcHH <span class="o">&lt;-</span> createSdcObj<span class="p">(</span>dat <span class="o">=</span> fileHH<span class="p">,</span> keyVars <span class="o">=</span> selectedKeyVarsHH<span class="p">,</span>
                      pramVars <span class="o">=</span> pramVarsHH<span class="p">,</span> weightVar <span class="o">=</span> weightVarHH<span class="p">,</span> numVars <span class="o">=</span> numVarsHH<span class="p">)</span>
numHH <span class="o">&lt;-</span> <span class="kp">length</span><span class="p">(</span>fileHH<span class="p">[,</span><span class="m">1</span><span class="p">])</span> <span class="c1"># number of households</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="id9">
<h3>Step 6a: Assessing disclosure risk (household level)<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>Based on the key variables selected in the disclosure scenarios, we can
evaluate the risk at the household level. The PUF risk measures show a
lower risk level than in the SUF file after anonymization in case study
1. The reason is that the set of key variables is smaller, since some
variables will not be released in the PUF file. Removing (key) variables
reduces the risk, and it is one of the most straightforward SDC methods.</p>
<p>As a first measure, we evaluate the number of households violating
<span class="math notranslate nohighlight">\(k\)</span>-anonymity at the levels 2, 3 and 5. <a class="reference internal" href="#tab920"><span class="std std-numref">Table 46</span></a> shows the
number of violating households as well as the percentage of the total
number of households. <a class="reference internal" href="#code932"><span class="std std-numref">Listing 86</span></a> illustrates how to find these values
with <em>sdcMicro</em>. The print() function in <em>sdcMicro</em> shows only the
values for thresholds 2 and 3. Values for other thresholds can be
calculated manually by summing up the frequencies smaller than the
<span class="math notranslate nohighlight">\(k\)</span>-anonymity threshold, as shown in <a class="reference internal" href="#code932"><span class="std std-numref">Listing 86</span></a>. The number of
violators is already at a low level, due to the prior anonymization of
the SUF file and the reduced set of key variables.</p>
<span id="tab920"></span><table border="1" class="colwidths-auto docutils align-center" id="id35">
<caption><span class="caption-number">Table 46 </span><span class="caption-text">Number and proportion of households violating <span class="math notranslate nohighlight">\(k\)</span>-anonymity</span><a class="headerlink" href="#id35" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">k-anonymity level</th>
<th class="head">Number of HH violating</th>
<th class="head">Percentage of total number of HH</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>0</td>
<td>0.0%</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>18</td>
<td>0.9%</td>
</tr>
<tr class="row-even"><td>5</td>
<td>92</td>
<td>4.7%</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="code932">
<div class="code-block-caption"><span class="caption-number">Listing 86 </span><span class="caption-text">Showing number of households violating <span class="math notranslate nohighlight">\(k\)</span>-anonymity for levels 2, 3 and 5</span><a class="headerlink" href="#code932" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Number of observations violating k-anonymity (thresholds 2 and 3)</span>
<span class="kp">print</span><span class="p">(</span>sdcHH<span class="p">)</span>
<span class="c1">## Infos on 2/3-Anonymity:</span>
<span class="c1">##</span>
<span class="c1">## Number of observations violating</span>
<span class="c1">##  - 2-anonymity: 0</span>
<span class="c1">##  - 3-anonymity: 18</span>
<span class="c1">##</span>
<span class="c1">## Percentage of observations violating</span>
<span class="c1">##  - 2-anonymity: 0.000 %</span>
<span class="c1">##  - 3-anonymity: 0.914 %</span>
<span class="o">--------------------------------------------------------------------------</span>

<span class="c1"># Calculate sample frequencies and count number of obs. violating k(5) - anonymity</span>
kAnon5 <span class="o">&lt;-</span> <span class="kp">sum</span><span class="p">(</span>sdcHH<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="m">5</span><span class="p">)</span>
kAnon5
<span class="c1">## [1] 92</span>

<span class="c1"># As percentage of total</span>
kAnon5 <span class="o">/</span> numHH
<span class="c1">## [1] 0.04670051</span>
</pre></div>
</td></tr></table></div>
</div>
<p>It is often useful to view the records of the household(s) that violate
<span class="math notranslate nohighlight">\(k\)</span>-anonymity. This might help to find which variables cause the
uniqueness of these households; this can then be used later when
choosing appropriate SDC methods. <a class="reference internal" href="#code932"><span class="std std-numref">Listing 86</span></a> shows how to access the
values of the households violating 3 and 5-anonymity. Not surprisingly,
the variable “HHSIZE” is responsible for many of the unique combinations
and the origin of much of the risk. This is even the case after removing
large households for the SUF release.</p>
<div class="literal-block-wrapper docutils container" id="code933">
<div class="code-block-caption"><span class="caption-number">Listing 87 </span><span class="caption-text">Showing records of households that violate <span class="math notranslate nohighlight">\(k\)</span>-anonymity</span><a class="headerlink" href="#code933" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Show values of key variable of records that violate k-anonymity</span>
fileHH<span class="p">[</span>sdcHH<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="m">3</span><span class="p">,</span> selectedKeyVarsHH<span class="p">]</span> <span class="c1"># for 3-anonymity</span>
fileHH<span class="p">[</span>sdcHH<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="m">5</span><span class="p">,</span> selectedKeyVarsHH<span class="p">]</span> <span class="c1"># for 5-anonymity</span>
</pre></div>
</td></tr></table></div>
</div>
<p>We also assess the disclosure risk of the categorical variables with the
individual and global risk measures as described in the Sections
<a class="reference external" href="measure_risk.html#Individualrisk">Individual risk</a>
and <a class="reference external" href="measure_risk.html#Globalrisk">Global risk</a>.
In “fileHH” every entry represents a household. Therefore, we use
the individual non-hierarchical risk here, where the individual refers
in this case to a household. “fileHH” is a subset of the complete
dataset and contains only households and has, contrary to the complete
dataset, no hierarchical structure. In Step 6b, we evaluate the
hierarchical risk in the dataset “file”, the dataset containing both
households and individuals. The individual and global risk measures
automatically take into consideration the household weights, which we
defined in <a class="reference internal" href="#code929"><span class="std std-numref">Listing 83</span></a>. In our file, the global risk measure calculated
using the chosen key variables is lower than 0.01% (the smallest
reported value is 0.01%, in fact the global risk is 0.0000642 %). This
percentage is extremely low and corresponds to 0.13 expected
re-identifications. The results are also shown in <a class="reference internal" href="#code934"><span class="std std-numref">Listing 88</span></a>. This low
figure can be explained by the relatively small sample size of 0.25% of
the total population (see case study 1). Furthermore, one should keep in
mind that this risk measure is based only on the categorical
quasi-identifiers at the household level.</p>
<div class="literal-block-wrapper docutils container" id="code934">
<div class="code-block-caption"><span class="caption-number">Listing 88 </span><span class="caption-text">Printing global risk measures</span><a class="headerlink" href="#code934" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kp">print</span><span class="p">(</span>sdcHH<span class="p">,</span> <span class="s">&quot;risk&quot;</span><span class="p">)</span>
<span class="c1">## Risk measures:</span>
<span class="c1">##</span>
<span class="c1">## Number of observations with higher risk than the main part of the data: 0</span>
<span class="c1">## Expected number of re-identifications: 0.13 (0.01 %)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>The global risk measure does not provide information about the spread of
the individual risk measures. There might be a few households with
relatively high risk, while the global (average) risk is low. Therefore
we check the highest individual risk as shown in <a class="reference internal" href="#code935"><span class="std std-numref">Listing 89</span></a>. The
individual risk of the household with the highest risk is 0.1 %, which
is still very low.</p>
<div class="literal-block-wrapper docutils container" id="code935">
<div class="code-block-caption"><span class="caption-number">Listing 89 </span><span class="caption-text">Determining the highest individual risk</span><a class="headerlink" href="#code935" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Highest individual risk</span>
<span class="kp">max</span><span class="p">(</span>sdcHH<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span> <span class="s">&quot;risk&quot;</span><span class="p">])</span>
<span class="c1">## [1] 0.001011633</span>
</pre></div>
</td></tr></table></div>
</div>
<p>Since the selected key variables at the household level are both
categorical and numerical, the individual and global risk measures based
on frequency counts do not completely reflect the disclosure risk of the
entire dataset. When generating the SUF file, we concluded that recoding
of continuous variables to make them all categorical would likely not
satisfy the needs of the SUF users. For the PUF file it is acceptable to
recode continuous variables, such as income and expenditures since PUF
content is typically less detailed. In Step 8a we will recode these
variables into deciles and convert them into categorical variables.
Therefore, we exclude these variables from the risk calculations now We
take these variables into account while remeasuring risk after
anonymization.</p>
</div>
<div class="section" id="id10">
<h3>Step 7a: Assessing utility measures (household level)<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>The utility of the data does not only depend on the household level
variables, but on the combination of household-level and
individual-level variables. Therefore, it is not useful to evaluate all
the utility measures selected in Step 5 at this stage, i.e., before
anonymizing the individual level variables. We restrict the initial
measurement of utility to those measures that are solely based on the
household variables. In our dataset, these are the measures related to
income and expenditure and their distributions. The results are
presented in Step 10a, together with the results after anonymization,
which allow direct comparison. If after the next anonymization step it
appears that the data utility has been significantly decreased by the
suppression of some household level variables, we can return to this
step.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To analyze the utility loss, the utility measures before
anonymization have to be calculated from the raw data and not from the
anonymized SUF file.</p>
</div>
<p>Not all measures from case study 1 can be
computed from the PUF file, since the information content is lower. The
set of utility measures we use to evaluate the information loss in the
PUF file consists of measures that need less detailed variables. This
reflects the lower requirements a PUF user has on the dataset.</p>
</div>
<div class="section" id="step-8a-choice-and-application-of-sdc-methods-household-level">
<h3>Step 8a: Choice and application of SDC methods (household level)<a class="headerlink" href="#step-8a-choice-and-application-of-sdc-methods-household-level" title="Permalink to this headline">¶</a></h3>
<p>This step is divided into the anonymization of the categorical key
variables and the continuous key variables, since different methods are
used for both sets of variables. As already discussed in Step 4, we do
not release all variables in the PUF file. At the household level
“RELIG” (religion of household head), “OWNAGLAND” (land ownership) and
“LANDSIZEHA” (plot size in ha) are not released in addition to the
variables removed for the SUF release. For the sake of illustration, we
assume that the variable “RELIG” is too sensitive and the variables
“OWNAGLAND” and “LANDSIZEHA” are too identifying.</p>
<p><strong>Categorical variables</strong></p>
<p>We are now ready to move on to the choice of SDC methods for the
categorical variables on the household level in our dataset. In the SUF
file we already recoded some of the key variables and used local
suppression. We only have three categorical key variables at the
household level; “URBRUR”, “REGION” and “HHSIZE”. The selected
categorical key variables at the household level are not suitable for
recoding at this point, since the values cannot be grouped further.
“URBRUR” has only two distinct categories and “REGION” has only six
non-combinable regions. As noted before, the variable “HHSIZE” can be
reconstructed by a headcount per household. Therefore, recoding of this
variable alone does not lead to disclosure control.</p>
<p>Due to the relatively low risk of re-identification based on the three
selected categorical household level variables, it is possible in this
case to use an option like local suppression to achieve our desired
level of risk. Applying local suppression when initial risk is
relatively low will likely only lead to suppression of few observations
and thus limit the loss of utility. If, however, the data had been
measured to have a relatively high risk, then applying local suppression
without previous recoding would likely result in a large number of
suppressions and greater information loss. Efforts such a recoding
should be taken first before suppressing values in cases where risk is
initially measured as high. Recoding will reduce risk with little
information loss and thus the number of suppressions, if local
suppression is applied as an additional step.</p>
<p>We apply local suppression to reach 5-anonymity. The chosen level of
five is higher than in the SUF release and is based on the release type
as PUF. This leads to a total of 39 suppressions, all in the variable
“HHSIZE”. As explained earlier, suppression of the value of the variable
“HHSIZE” does not lead to actual suppression of this information.
Therefore, we redo the local suppression, but this time we tell
<em>sdcMicro</em> to, if possible, not suppress “HHSIZE” but one of the other
variables. Alternatively, we could remove households with suppressed
values of the variable “HHSIZE”, remove large households or split
households.</p>
<p>In <em>sdcMicro</em> it is possible to tell the algorithm which variables are
important and less important for making small changes (see also the Section
<a class="reference external" href="anon_methods.html#Localsuppression">Local suppression</a>).
To prevent values of the variable “HHSIZE” being suppressed, we
set the importance of “HHSIZE” in the importance vectors to the highest
(i.e., 1). We try two different importance vectors: the first where
“REGION” is more important than “URBRUR” and the second with the
importance of “REGION” and “URBRUR” swapped. <a class="reference internal" href="#code936"><span class="std std-numref">Listing 90</span></a> shows how to
apply local suppression and put importance on the variable “HHSIZE”.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In <a class="reference internal" href="#code936"><span class="std std-numref">Listing 90</span></a> we use the undolast() function in sdcMicro
to go one step back after we had first applied local suppression with no
importance vector.</p>
</div>
<p>The undolast() function restores the <em>sdcMicro</em>
object back to the previous state (i.e., before we applied local
suppression), which allows us to rerun the same command, but this time
with an importance vector set. The undolast() function can only be used
to go one step back.</p>
<p>The suppression patterns of the three different options are shown in
<a class="reference internal" href="#tab921"><span class="std std-numref">Table 47</span></a>. The importance is clearly reflected in the number of
suppressions per variable. The total number of suppressions is with an
importance vector higher than without an importance vector (44/73 vs.
39), but 5-anonymity is achieved in the dataset with no suppressions in
the variable “HHSIZE”. This means that we do not have to remove or split
households. The variable “REGION” is the type of variable that should
not have any suppressions either. From that perspective we chose the
third option. This leads to more suppressions, but no suppressions in
“HHSIZE” and as few as possible in “REGION”.</p>
<span id="tab921"></span><table border="1" class="colwidths-auto docutils align-center" id="id36">
<caption><span class="caption-number">Table 47 </span><span class="caption-text">Number of suppressions by variable after local suppression with and without importance vector</span><a class="headerlink" href="#id36" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key variable</th>
<th class="head" colspan="3">Number of suppressions and proportion of total</th>
</tr>
<tr class="row-even"><th class="head">.</th>
<th class="head">No importance vector</th>
<th class="head">Importance HHSIZE, URBRUR, REGION</th>
<th class="head">Importance HHSIZE, REGION, URBRUR</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>URBRUR</td>
<td>0 (0.0 %)</td>
<td>2 (0.1 %)</td>
<td>61 (3.1 %)</td>
</tr>
<tr class="row-even"><td>REGION</td>
<td>0 (0.0 %)</td>
<td>42 (2.1 %)</td>
<td>12 (0.6 %)</td>
</tr>
<tr class="row-odd"><td>HHSIZE</td>
<td>39 (2.0 %)</td>
<td>0 (0.0 %)</td>
<td>0 (0.0 %)</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="code936">
<div class="code-block-caption"><span class="caption-number">Listing 90 </span><span class="caption-text">Local suppression with and without importance vector</span><a class="headerlink" href="#code936" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Local suppression to achieve 5-anonimity</span>
sdcHH <span class="o">&lt;-</span> localSuppression<span class="p">(</span>sdcHH<span class="p">,</span> k <span class="o">=</span> <span class="m">5</span><span class="p">,</span> importance <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span> <span class="c1"># no importance vector</span>
<span class="kp">print</span><span class="p">(</span>sdcHH<span class="p">,</span> <span class="s">&quot;ls&quot;</span><span class="p">)</span>
<span class="c1">## Local Suppression:</span>
<span class="c1">##  KeyVar | Suppressions (#) | Suppressions (%)</span>
<span class="c1">##  URBRUR |                0 |            0.000</span>
<span class="c1">##  REGION |                0 |            0.000</span>
<span class="c1">##  HHSIZE |               39 |            1.980</span>
<span class="c1">## ---------------------------------------------------------------------------</span>

<span class="c1"># Undo suppressions to see the effect of an importance vector</span>
sdcHH <span class="o">&lt;-</span> undolast<span class="p">(</span>sdcHH<span class="p">)</span>

<span class="c1"># Redo local suppression minimizing the number of suppressions in HHSIZE</span>
sdcHH <span class="o">&lt;-</span> localSuppression<span class="p">(</span>sdcHH<span class="p">,</span> k <span class="o">=</span> <span class="m">5</span><span class="p">,</span> importance <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">1</span><span class="p">))</span>

<span class="kp">print</span><span class="p">(</span>sdcHH<span class="p">,</span> <span class="s">&quot;ls&quot;</span><span class="p">)</span>
<span class="c1">## Local Suppression:</span>
<span class="c1">##  KeyVar | Suppressions (#) | Suppressions (%)</span>
<span class="c1">##  URBRUR |                2 |            0.102</span>
<span class="c1">##  REGION |               42 |            2.132</span>
<span class="c1">##  HHSIZE |                0 |            0.000</span>
<span class="c1">## ---------------------------------------------------------------------------</span>

<span class="c1"># Undo suppressions to see the effect of a different importance vector</span>
sdcHH <span class="o">&lt;-</span> undolast<span class="p">(</span>sdcHH<span class="p">)</span>

<span class="c1"># Redo local suppression minimizing the number of suppressions in HHSIZE</span>
sdcHH <span class="o">&lt;-</span> localSuppression<span class="o">*</span><span class="p">(</span>sdcHH<span class="p">,</span> k <span class="o">=</span> <span class="m">5</span><span class="p">,</span> importance <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">))</span>

<span class="kp">print</span><span class="p">(</span>sdcHH<span class="p">,</span> <span class="s">&quot;ls&quot;</span><span class="p">)</span>
<span class="c1">## Local Suppression:</span>
<span class="c1">##  KeyVar | Suppressions (#) | Suppressions (%)</span>
<span class="c1">##  URBRUR |               61 |            3.096</span>
<span class="c1">##  REGION |               12 |            0.609</span>
<span class="c1">##  HHSIZE |                0 |            0.000</span>
<span class="c1">## ---------------------------------------------------------------------------</span>
</pre></div>
</td></tr></table></div>
</div>
<p>In case study 1 we applied invariant PRAM to the variables “ROOF”,
“TOILET”, “WATER”, “ELECTCON”, “FUELCOOK”, “OWNMOTORCYCLE”, “CAR”, “TV”
and “LIVESTOCK”, since these variables are not sensitive and were not
selected as quasi-identifiers because we assumed that there are no
external data sources containing this information that could be used for
matching. Values can be easily observed or be known to neighbors,
however, and therefore are important, together with other variables, for
the nosy neighbor scenario. For the PUF release we would like to level
of uncertainty by increasing the number of changes. Therefore, we redo
PRAM with a different transition matrix. As discussed in the Section
<a class="reference external" href="anon_methods.html#PRAM(PostRAndomizationMethod)">PRAM (Post RAndomization Method)</a>,
the invariant PRAM method has the property that the univariate
distributions do not change. To maintain this property, we reapply PRAM
to the raw data, rather than to the already PRAMmed variables in the SUF
file.</p>
<p><a class="reference internal" href="#code937"><span class="std std-numref">Listing 91</span></a> illustrates how to apply PRAM. We use the original values
to apply PRAM and replace the values in the <em>sdcMicro</em> object with these
values. We choose the parameter ‘pd’, the lower bound for the
probability that a value is not changed, to be relatively low at 0.6.
This is a lower value than the 0.8 used in the SUF file and will lead to
a higher number of changes (cf. <a class="reference internal" href="#code917"><span class="std std-numref">Listing 71</span></a>). This is
acceptable for a PUF file and introduces more uncertainty as required
for a PUF release. <a class="reference internal" href="#code937"><span class="std std-numref">Listing 91</span></a> also shows the number of changed records
per variables. Because PRAM is a probabilistic method, we set a seed for
the random number generator before applying PRAM to ensure
reproducibility of the results.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In some cases the choice of the seed matters. The choice of seed changes the results.</p>
</div>
<p>The seed should not be released, since it allows for reconstructing the original values
if combined with the transition matrix. The transition matrix can be
released: this allows for consistent statistical inference by correcting
the statistical methods used if the researcher has knowledge about the
PRAM method (at this point <em>sdcMicro</em> does not allow to retrieve the
transition matrix).</p>
<div class="literal-block-wrapper docutils container" id="code937">
<div class="code-block-caption"><span class="caption-number">Listing 91 </span><span class="caption-text">Applying PRAM</span><a class="headerlink" href="#code937" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># PRAM</span>
<span class="kp">set.seed</span><span class="p">(</span><span class="m">10987</span><span class="p">)</span>

<span class="c1"># Replace PRAM variables in sdcMicro object sdcHH with the original raw values</span>
sdcHH<span class="o">@</span>origData<span class="p">[,</span>pramVarsHH<span class="p">]</span> <span class="o">&lt;-</span> fileHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span> pramVarsHH<span class="p">]</span>
sdcHH<span class="o">@</span>manipPramVars <span class="o">&lt;-</span> fileHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span> pramVarsHH<span class="p">]</span>

sdcHH <span class="o">&lt;-</span> pram<span class="p">(</span>obj <span class="o">=</span> sdcHH<span class="p">,</span> pd <span class="o">=</span> <span class="m">0.6</span><span class="p">)</span>
<span class="c1">## Number of changed observations:</span>
<span class="c1">## - - - - - - - - - - -</span>
<span class="c1">## ROOF != ROOF_pram : 305 (15.48%)</span>
<span class="c1">## TOILET != TOILET_pram : 260 (13.2%)</span>
<span class="c1">## WATER != WATER_pram : 293 (14.87%)</span>
<span class="c1">## ELECTCON != ELECTCON_pram : 210 (10.66%)</span>
<span class="c1">## FUELCOOK != FUELCOOK_pram : 315 (15.99%)</span>
<span class="c1">## OWNMOTORCYCLE != OWNMOTORCYCLE_pram : 95 (4.82%)</span>
<span class="c1">## CAR != CAR_pram : 255 (12.94%)</span>
<span class="c1">## TV != TV_pram : 275 (13.96%)</span>
<span class="c1">## LIVESTOCK != LIVESTOCK_pram : 109 (5.53%)</span>
</pre></div>
</td></tr></table></div>
</div>
<p>PRAM has changed values within the variables according to the invariant
transition matrices. Since we used the invariant PRAM method (see
the Section <a class="reference external" href="anon_methods.html#PRAM(PostRAndomizationMethod)">PRAM (Post RAndomization Method)</a>),
the absolute univariate frequencies remain approximately
unchanged. This is not the case for the multivariate frequencies. In
Step 10a we compare the multivariate frequencies before and after
anonymization for the PRAMmed variables.</p>
<p><strong>Continuous variables</strong></p>
<p>We have selected the variables “INCTOTGROSSHH” (total income) and
“TANHHEXP” (total expenditure) as numerical quasi-identifiers, as
discussed in Step 4. In Step 5 we identified variables having high
interest for the users of our data: many users use the data for
measuring inequality and expenditure patterns. The noise addition in the
SUF file does not protect these variables sufficiently, especially,
because outliers are not protected. Therefore, we decide to recode total
income and total expenditure into deciles.</p>
<p>As with PRAM, we want to compute the deciles from the raw data rather
than from the perturbed values in the SUF file. We compute the deciles
directly from the raw data and overwrite these values in the <em>sdcMicro</em>
object. Subsequently, we compute the mean of each decile from the raw
data and replace the values for total income and total expenditures with
the mean of the respective decile. In this way the mean of both
variables does not change. This approach can be interpreted as
univariate microaggregation with very large groups (group size n/10)
with the mean as replacement value (see the Section
<a class="reference external" href="anon_methods.html#Microaggregation">Microaggregation</a>).</p>
<p>The information in the income and expenditure variables by component is
too sensitive to release as PUF, and, summing those variables would
allow an intruder to reconstruct the totals. PUF users might however be
interested in the shares. Therefore, we decide to keep the income and
expenditure components as proportions of the raw totals, rounded to two
digits. The anonymization of the income and expenditure variables is
shown in <a class="reference internal" href="#code938"><span class="std std-numref">Listing 92</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="code938">
<div class="code-block-caption"><span class="caption-number">Listing 92 </span><span class="caption-text">Anonymization of income and expenditure variables</span><a class="headerlink" href="#code938" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Create bands (deciles) for income and expenditure variables</span>
<span class="p">(</span>aggregates<span class="p">)</span> based on the original data
decExp <span class="o">&lt;-</span> <span class="kp">as.numeric</span><span class="p">(</span><span class="kp">cut</span><span class="p">(</span>fileOrigHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span> <span class="s">&quot;TANHHEXP&quot;</span><span class="p">],</span>
                         quantile<span class="p">(</span>fileOrigHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span> <span class="s">&quot;TANHHEXP&quot;</span><span class="p">],</span>
                                  <span class="p">(</span><span class="m">0</span><span class="o">:</span><span class="m">10</span><span class="p">)</span><span class="o">/</span><span class="m">10</span><span class="p">,</span> na.rm <span class="o">=</span> <span class="bp">T</span><span class="p">),</span>
                         include.lowest <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> labels <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">9</span><span class="p">,</span> <span class="m">10</span><span class="p">)))</span>
 decInc <span class="o">&lt;-</span> <span class="kp">as.numeric</span><span class="p">(</span><span class="kp">cut</span><span class="p">(</span>fileOrigHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span> <span class="s">&quot;INCTOTGROSSHH&quot;</span><span class="p">],</span>
                          quantile<span class="p">(</span>fileOrigHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span> <span class="s">&quot;INCTOTGROSSHH&quot;</span><span class="p">],</span>
                                   <span class="p">(</span><span class="m">0</span><span class="o">:</span><span class="m">10</span><span class="p">)</span><span class="o">/</span><span class="m">10</span><span class="p">,</span> na.rm <span class="o">=</span> <span class="bp">T</span><span class="p">),</span>
                          include.lowest <span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> labels  <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">9</span><span class="p">,</span> <span class="m">10</span><span class="p">)))</span>

<span class="c1"># Mean values of deciles</span>
decExpMean <span class="o">&lt;-</span> <span class="kp">round</span><span class="p">(</span><span class="kp">sapply</span><span class="p">(</span><span class="kp">split</span><span class="p">(</span>fileOrigHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span> <span class="s">&quot;TANHHEXP&quot;</span><span class="p">],</span>
                                 decExp<span class="p">),</span> <span class="kp">mean</span><span class="p">))</span>
decIncMean <span class="o">&lt;-</span> <span class="kp">round</span><span class="p">(</span><span class="kp">sapply</span><span class="p">(</span><span class="kp">split</span><span class="p">(</span>fileOrigHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span> <span class="s">&quot;INCTOTGROSSHH&quot;</span><span class="p">],</span>
                                decInc<span class="p">),</span> <span class="kp">mean</span><span class="p">))</span>

<span class="c1"># Replace with mean value of decile</span>
sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>TANHHEXP <span class="o">&lt;-</span> decExpMean<span class="p">[</span><span class="kp">match</span><span class="p">(</span>decExp<span class="p">,</span><span class="kp">names</span><span class="p">(</span>decExpMean<span class="p">))]</span>
sdcHH<span class="o">@</span>manipNumVars<span class="o">$</span>INCTOTGROSSHH <span class="o">&lt;-</span> decIncMean<span class="p">[</span>\ <span class="kp">match</span><span class="p">(</span>decInc<span class="p">,</span> <span class="kp">names</span><span class="p">(</span>decIncMean<span class="p">))]</span>

<span class="c1"># Recalculate risks after manually changing values in sdcMicro object calcRisks(sdcHH)</span>
calcRisks<span class="p">(</span>sdcHH<span class="p">)</span>

<span class="c1"># Extract data from sdcHH</span>
HHmanip <span class="o">&lt;-</span> extractManipData<span class="p">(</span>sdcHH<span class="p">)</span> <span class="c1"># manipulated variables HH</span>

<span class="c1"># Keep components of expenditure and income as share of total,</span>
<span class="c1"># use original data since previous data was perturbed</span>
compExp <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;TFOODEXP&#39;</span><span class="p">,</span> <span class="s">&#39;TALCHEXP&#39;</span><span class="p">,</span> <span class="s">&#39;TCLTHEXP&#39;</span><span class="p">,</span> <span class="s">&#39;THOUSEXP&#39;</span><span class="p">,</span>
             <span class="s">&#39;TFURNEXP&#39;</span><span class="p">,</span> <span class="s">&#39;THLTHEXP&#39;</span><span class="p">,</span> <span class="s">&#39;TTRANSEXP&#39;</span><span class="p">,</span> <span class="s">&#39;TCOMMEXP&#39;</span><span class="p">,</span>
             <span class="s">&#39;TRECEXP&#39;</span><span class="p">,</span> <span class="s">&#39;TEDUEXP&#39;</span><span class="p">,</span> <span class="s">&#39;TRESTHOTEXP&#39;</span><span class="p">,</span> <span class="s">&#39;TMISCEXP&#39;</span><span class="p">)</span>
compInc <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;INCRMT&#39;</span><span class="p">,</span>  <span class="s">&#39;INCWAGE&#39;</span><span class="p">,</span> <span class="s">&#39;INCFARMBSN&#39;</span><span class="p">,</span> <span class="s">&#39;INCNFARMBSN&#39;</span><span class="p">,</span>
             <span class="s">&#39;INCRENT&#39;</span><span class="p">,</span> <span class="s">&#39;INCFIN&#39;</span><span class="p">,</span>  <span class="s">&#39;INCPENSN&#39;</span><span class="p">,</span>   <span class="s">&#39;INCOTHER&#39;</span><span class="p">)</span>
HHmanip <span class="o">&lt;-</span> <span class="kp">cbind</span><span class="p">(</span>HHmanip<span class="p">,</span> <span class="kp">round</span><span class="p">(</span>fileOrigHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span> compExp<span class="p">]</span> <span class="o">/</span>
                                fileOrigHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span>
                                           <span class="s">&quot;TANHHEXP&quot;</span><span class="p">],</span> <span class="m">2</span><span class="p">))</span>
HHmanip <span class="o">&lt;-</span> <span class="kp">cbind</span><span class="p">(</span>HHmanip<span class="p">,</span> <span class="kp">round</span><span class="p">(</span>fileOrigHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span> compInc<span class="p">]</span> <span class="o">/</span>
                                fileOrigHH<span class="p">[</span><span class="kp">match</span><span class="p">(</span>fileHH<span class="o">$</span>IDH<span class="p">,</span> fileOrigHH<span class="o">$</span>IDH<span class="p">),</span>
                                           <span class="s">&quot;INCTOTGROSSHH&quot;</span><span class="p">],</span> <span class="m">2</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="step-9a-re-measure-risk-household-level">
<h3>Step 9a: Re-measure risk (household level)<a class="headerlink" href="#step-9a-re-measure-risk-household-level" title="Permalink to this headline">¶</a></h3>
<p>For the categorical variables, we conclude that we have achieved
5-anonymity in the data with local suppression. 5-anonymity also implies
2- and 3-anonymity. The global risk stayed close to zero (as the
expected number of re-identifications), which is very low. Therefore, we
conclude that based on the categorical variables, the data has been
sufficiently anonymized. One should keep in mind that the anonymization
methods applied are complementing the ones used for the SUF.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The methods selected methods in this case study alone would not be
sufficient to protect the data set for a PUF release.</p>
</div>
<p>We have reduced the risk of spontaneous recognition of households, by
removing the variable “LANDSIZEHA” and PRAMming the variables identified
to be important in the nosy neighbor scenario. An intruder cannot know
with certainty whether a household that (s)he recognizes in the data is
the correct household, due to the noise in these variables.</p>
<p>These measures refer only to the categorical variables. To evaluate the
risk of the continuous variables we could use an interval measure or
closest neighbor algorithm. These risk measures are discussed in the Section
<a class="reference external" href="measure_risk.html#Riskmeasuresforcontinuousvariables">Risk measures for continuous variables</a>.
We chose to use an interval measure, since exact value matching is
not our largest concern based on the assumed scenarios and external data
sources. Instead, datasets with similar values but not the exact same
values could be used for matching. Here the main concern is that the
values are sufficiently far from the original values, which is measured
with an interval measure.</p>
<p><a class="reference internal" href="#code939"><span class="std std-numref">Listing 93</span></a> shows how to evaluate the interval measure for the
variables “INCTOTGROSSHH” and “TANHHEXP” (total income and expenditure).
The different values of the parameter <span class="math notranslate nohighlight">\(k\)</span> in the function dRisk()
define the size of the interval around the original value as a function
of the standard deviation, as explained in the Section
<a class="reference external" href="measure_risk.html#Intervalmeasure">Interval measure</a> . The larger
<span class="math notranslate nohighlight">\(k\)</span>, the larger the intervals, the higher the probability that a
perturbed value is in the interval around the original value and the
higher the risk measure. The results are satisfactory, especially when
keeping in mind that there are only 10 distinct values in the dataset
(the means of each of the deciles). All outliers have been recoded.
Looking at the proportions of the components, we do not detect any
outliers (households with an unusual high or low spending pattern in one
component).</p>
<div class="literal-block-wrapper docutils container" id="code939">
<div class="code-block-caption"><span class="caption-number">Listing 93 </span><span class="caption-text">Measuring risk of re-identification of continuous variables</span><a class="headerlink" href="#code939" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Risk evaluation continuous variables</span>
dRisk<span class="p">(</span>sdcHH<span class="o">@</span>origData<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;TANHHEXP&quot;</span><span class="p">,</span> <span class="s">&quot;INCTOTGROSSHH&quot;</span><span class="p">)],</span>
      xm <span class="o">=</span> sdcHH<span class="o">@</span>manipNumVars<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;TANHHEXP&quot;</span><span class="p">,</span> <span class="s">&quot;INCTOTGROSSHH&quot;</span><span class="p">)],</span> k <span class="o">=</span> <span class="m">0.01</span><span class="p">)</span>
<span class="c1">## [1] 0.4619289</span>

dRisk<span class="p">(</span>sdcHH<span class="o">@</span>origData<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;TANHHEXP&quot;</span><span class="p">,</span> <span class="s">&quot;INCTOTGROSSHH&quot;</span><span class="p">)],</span>
      xm <span class="o">=</span> sdcHH<span class="o">@</span>manipNumVars<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;TANHHEXP&quot;</span><span class="p">,</span> <span class="s">&quot;INCTOTGROSSHH&quot;</span><span class="p">)],</span> k <span class="o">=</span> <span class="m">0.02</span><span class="p">)</span>
<span class="c1">## [1] 0.642132</span>

dRisk<span class="p">(</span>sdcHH<span class="o">@</span>origData<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;TANHHEXP&quot;</span><span class="p">,</span> <span class="s">&quot;INCTOTGROSSHH&quot;</span><span class="p">)],</span>
      xm <span class="o">=</span> sdcHH<span class="o">@</span>manipNumVars<span class="p">[,</span><span class="kt">c</span><span class="p">(</span><span class="s">&quot;TANHHEXP&quot;</span><span class="p">,</span> <span class="s">&quot;INCTOTGROSSHH&quot;</span><span class="p">)],</span> k <span class="o">=</span> <span class="m">0.05</span><span class="p">)</span>
<span class="c1">## [1] 0.8258883</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="step-10a-re-measure-utility-household-level">
<h3>Step 10a Re-measure utility (household level)<a class="headerlink" href="#step-10a-re-measure-utility-household-level" title="Permalink to this headline">¶</a></h3>
<p>The utility in the data has decreased compared to the raw data, mainly
because variables were completely removed. Many of the utility measures
used in case study 1 are not applicable to the PUF file. However, by
replacing the deciles with their means, we can still use the income and
expenditure variables for arithmetic operations. Also the shares of the
income and expenditure components can still be used, since they are
based on the raw data.</p>
<p>We select two additional utility measures: the decile dispersion ratio
and the share of total consumption by the poorest decile. The decile
dispersion ratio is the ratio of the average income of the top decile
and the average income of the bottom decile. <a class="reference internal" href="#code940"><span class="std std-numref">Listing 94</span></a> shows how to
compute these from the raw data and the household variables after
anonymization. <a class="reference internal" href="#tab922"><span class="std std-numref">Table 48</span></a> presents the estimated values. The differences
are small and mainly due to the removed households.</p>
<span id="tab922"></span><table border="1" class="colwidths-auto docutils align-center" id="id37">
<caption><span class="caption-number">Table 48 </span><span class="caption-text">Comparison of utility measures</span><a class="headerlink" href="#id37" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">.</th>
<th class="head">Raw data</th>
<th class="head">PUF file</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Decile dispersion ratio</td>
<td>24.12</td>
<td>23.54</td>
</tr>
<tr class="row-odd"><td>Share of consumption by the poorest decile</td>
<td>0.0034</td>
<td>0.0035</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="code940">
<div class="code-block-caption"><span class="caption-number">Listing 94 </span><span class="caption-text">Computation of decile dispersion ratio and share of total consumption by the poorest decile</span><a class="headerlink" href="#code940" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Decile dispersion ratio</span>
<span class="c1"># raw data</span>
<span class="kp">mean</span><span class="p">(</span><span class="kp">tail</span><span class="p">(</span><span class="kp">sort</span><span class="p">(</span>fileOrigHH<span class="o">$</span>INCTOTGROSSHH<span class="p">),</span> n <span class="o">=</span> <span class="m">200</span><span class="p">))</span> <span class="o">/</span>
  <span class="kp">mean</span><span class="p">(</span><span class="kp">head</span><span class="p">(</span><span class="kp">sort</span><span class="p">(</span>fileOrigHH<span class="o">$</span>INCTOTGROSSHH<span class="p">),</span> n <span class="o">=</span> <span class="m">200</span><span class="p">))</span>
<span class="c1">## [1] 24.12152</span>

<span class="kp">mean</span><span class="p">(</span><span class="kp">tail</span><span class="p">(</span><span class="kp">sort</span><span class="p">(</span>HHmanip<span class="o">$</span>INCTOTGROSSHH<span class="p">),</span> n <span class="o">=</span> <span class="m">197</span><span class="p">))</span> <span class="o">/</span>
  <span class="kp">mean</span><span class="p">(</span><span class="kp">head</span><span class="p">(</span><span class="kp">sort</span><span class="p">(</span>HHmanip<span class="o">$</span>INCTOTGROSSHH<span class="p">),</span> n <span class="o">=</span> <span class="m">197</span><span class="p">))</span>
<span class="c1">## [1] 23.54179</span>

<span class="c1"># Share of total consumption by the poorest decile households</span>
<span class="kp">sum</span><span class="p">(</span><span class="kp">head</span><span class="p">(</span><span class="kp">sort</span><span class="p">(</span>fileOrigHH<span class="o">$</span>TANHHEXP<span class="p">),</span> n <span class="o">=</span> <span class="m">200</span><span class="p">))</span> <span class="o">/</span> <span class="kp">sum</span><span class="p">(</span>fileOrigHH<span class="o">$</span>TANHHEXP<span class="p">)</span>
<span class="c1">## [1] 0.003411664</span>

<span class="kp">sum</span><span class="p">(</span><span class="kp">head</span><span class="p">(</span><span class="kp">sort</span><span class="p">(</span>HHmanip<span class="o">$</span>TANHHEXP<span class="p">),</span> n <span class="o">=</span> <span class="m">197</span><span class="p">))</span> <span class="o">/</span> <span class="kp">sum</span><span class="p">(</span>HHmanip<span class="o">$</span>TANHHEXP<span class="p">)</span>
<span class="c1">## [1] 0.003530457</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Merging the household- and individual-level variables</strong></p>
<p>The next step is to merge the treated household variables with the
untreated individual variables for the anonymization of the individual
level variables. <a class="reference internal" href="#code941"><span class="std std-numref">Listing 95</span></a> shows the steps to merge these files. This
also includes the selection of variables used in the anonymization of
the individual-level variables. We create the <em>sdcMicro</em> object for the
anonymization of the individual variables in the same way as for the
household variable in <a class="reference internal" href="#code931"><span class="std std-numref">Listing 85</span></a>. Generally, at this stage, the
household level and individual level variables should be combined and
quasi-identifiers at both levels be used (see the Section <a class="reference external" href="measur_risk.html#Levelsofrisk">Levels of risk</a>).
Unfortunately, in our dataset, this leads to long computation times.
Therefore, we create two <em>sdcMicro</em> objects, one with all key variables
(“sdcCombinedAll”) and one with only the individual level key variables
(“sdcCombined”). In Step 6b we compare the risk measures for both cases
and in Step 8b we discuss alternative approaches to keeping the complete
set of variables. We now repeat Steps 6-10 for the individual-level
variables.</p>
<div class="literal-block-wrapper docutils container" id="code941">
<div class="code-block-caption"><span class="caption-number">Listing 95 </span><span class="caption-text">Merging the files with household and individual-level variables and creating an <em>sdcMicro</em> object for the anonymization of the individual-level variables</span><a class="headerlink" href="#code941" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">### Select variables (individual level)</span>
selectedKeyVarsIND <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;GENDER&#39;</span><span class="p">,</span> <span class="s">&#39;REL&#39;</span><span class="p">,</span> <span class="s">&#39;MARITAL&#39;</span><span class="p">,</span>
                       <span class="s">&#39;AGEYRS&#39;</span><span class="p">,</span> <span class="s">&#39;EDUCY&#39;</span><span class="p">,</span> <span class="s">&#39;INDUSTRY1&#39;</span><span class="p">)</span> <span class="c1"># list of selected key variables</span>

<span class="c1"># sample weight (WGTHH, individual weight)</span>
selectedWeightVarIND <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;WGTHH&#39;</span><span class="p">)</span>

<span class="c1"># Household ID</span>
selectedHouseholdID <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;IDH&#39;</span><span class="p">)</span>

<span class="c1"># Variables not suitable for release in PUF (IND level)</span>
varsNotToBeReleasedIND <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;ATSCHOOL&quot;</span><span class="p">,</span> <span class="s">&quot;EDYRSCURRAT&quot;</span><span class="p">)</span>

<span class="c1"># All individual level variables</span>
INDVars <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span>selectedKeyVarsIND<span class="p">)</span>

<span class="c1"># Recombining anonymized HH data sets and individual level variables</span>
indVars <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;IDH&quot;</span><span class="p">,</span> <span class="s">&quot;IDP&quot;</span><span class="p">,</span> selectedKeyVarsIND<span class="p">,</span> <span class="s">&quot;WGTHH&quot;</span><span class="p">)</span> <span class="c1"># HID and all non HH vars</span>
fileInd <span class="o">&lt;-</span> <span class="kp">file</span><span class="p">[</span>indVars<span class="p">]</span> <span class="c1"># subset of file without HHVars</span>
fileCombined <span class="o">&lt;-</span> <span class="kp">merge</span><span class="p">(</span>HHmanip<span class="p">,</span> fileInd<span class="p">,</span> by.x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&#39;IDH&#39;</span><span class="p">))</span>
fileCombined <span class="o">&lt;-</span> fileCombined<span class="p">[</span><span class="kp">order</span><span class="p">(</span>fileCombined<span class="p">[,</span><span class="s">&#39;IDH&#39;</span><span class="p">],</span>  fileCombined<span class="p">[,</span><span class="s">&#39;IDP&#39;</span><span class="p">]),]</span>

<span class="kp">dim</span><span class="p">(</span>fileCombined<span class="p">)</span>
<span class="c1">## [1] 10068    44</span>

<span class="c1"># SDC objects with only IND level variables</span>
sdcCombined <span class="o">&lt;-</span> createSdcObj<span class="p">(</span>dat <span class="o">=</span> fileCombined<span class="p">,</span> keyVars <span class="o">=</span> <span class="kt">c</span><span class="p">(</span>selectedKeyVarsIND<span class="p">),</span>
                            weightVar <span class="o">=</span> selectedWeightVarIND<span class="p">,</span> hhId <span class="o">=</span> selectedHouseholdID<span class="p">)</span>

<span class="c1"># SDC objects with both HH and IND level variables</span>
sdcCombinedAll <span class="o">&lt;-</span> createSdcObj<span class="p">(</span>dat <span class="o">=</span> fileCombined<span class="p">,</span>
                               keyVars <span class="o">=</span> <span class="kt">c</span><span class="p">(</span>selectedKeyVarsIND<span class="p">,</span> selectedKeyVarsHH <span class="p">),</span>
                               weightVar <span class="o">=</span> selectedWeightVarIND<span class="p">,</span> hhId <span class="o">=</span> selectedHouseholdID<span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="id11">
<h3>Step 6b: Assessing disclosure risk (individual level)<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>As first measure, we evaluate the number of records violating
<span class="math notranslate nohighlight">\(k\)</span>-anonymity at the levels 2, 3 and 5. <a class="reference internal" href="#tab923"><span class="std std-numref">Table 49</span></a> shows the
number of violating individuals as well as the percentage of the total
number of households. The second and third column refer to “sdcCombined”
and the fourth and fifth column to “sdcCombinedAll”. We see that
combining the individual level and household level variables leads to a
large increase in the number of <span class="math notranslate nohighlight">\(k\)</span>-anonymity violators. The
choice not to include the household level variables is pragmatically
driven by the computation time and can be justified by the different
type of variables on the household level and individual level. One could
assume that these variables are not available in the same dataset and
can therefore not simultaneously be used by an intruder to re-identify
individuals.</p>
<span id="tab923"></span><table border="1" class="colwidths-auto docutils align-center" id="id38">
<caption><span class="caption-number">Table 49 </span><span class="caption-text">Number of records violating <span class="math notranslate nohighlight">\(k\)</span>-anonimity</span><a class="headerlink" href="#id38" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">.</th>
<th class="head" colspan="2">sdcCombined</th>
<th class="head" colspan="2">sdcCombinedAll</th>
</tr>
<tr class="row-even"><th class="head">k-anonymity</th>
<th class="head">Number of
records
violating</th>
<th class="head">Percentage
of total
records</th>
<th class="head">Number of
records
violating</th>
<th class="head">Percentage
of total
records</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>2</td>
<td>0</td>
<td>0.0 %</td>
<td>4,048</td>
<td>40.2 %</td>
</tr>
<tr class="row-even"><td>3</td>
<td>167</td>
<td>1.7 %</td>
<td>6,107</td>
<td>60.7 %</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>463</td>
<td>4.6 %</td>
<td>8,292</td>
<td>82.4 %</td>
</tr>
</tbody>
</table>
<p>The global hierarchical risk measure is 0.095%, which corresponds to
approximately 10 expected re-identifications. We use here the
hierarchical risk measure, since the re-identification of a single
household member would lead to the re-identification of the other
members of the same household too. This number is low compared to the
number of <span class="math notranslate nohighlight">\(k\)</span>-anonymity violations, due to the high sample
weights, which protect the data already to a large extent. Only 24
observations have an individual hierarchical risk higher than 1%, with a
maximum of 1.17%. This is mainly because of the lower sample weights of
these records. <a class="reference internal" href="#code942"><span class="std std-numref">Listing 96</span></a> shows how to retrieve these measures in <em>R</em>.</p>
<div class="literal-block-wrapper docutils container" id="code942">
<div class="code-block-caption"><span class="caption-number">Listing 96 </span><span class="caption-text">Risk measures before anonymization</span><a class="headerlink" href="#code942" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span>numIND <span class="o">&lt;-</span> <span class="kp">length</span><span class="p">(</span>fileCombined<span class="p">[,</span><span class="m">1</span><span class="p">])</span> <span class="c1"># number of households</span>

<span class="c1"># Number of observations violating k-anonymity</span>
<span class="kp">print</span><span class="p">(</span>sdcCombined<span class="p">)</span>
<span class="c1">## Infos on 2/3-Anonymity:</span>
<span class="c1">##</span>
<span class="c1">## Number of observations violating</span>
<span class="c1">##  - 2-anonymity: 0</span>
<span class="c1">##  - 3-anonymity: 167</span>
<span class="c1">##</span>
<span class="c1">## Percentage of observations violating</span>
<span class="c1">##  - 2-anonymity: 0.000 %</span>
<span class="c1">##  - 3-anonymity: 1.659 %</span>
<span class="c1">## ---------------------------------------------------------------------------</span>

<span class="c1"># Calculate sample frequencies and count number of obs. violating k(3,5) - anonymity</span>
kAnon5 <span class="o">&lt;-</span> <span class="kp">sum</span><span class="p">(</span>sdcCombined<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="m">5</span><span class="p">)</span>
kAnon5
<span class="c1">## [1] 463</span>

<span class="c1"># As percentage of total</span>
kAnon5 <span class="o">/</span> numIND
<span class="c1">## [1] 0.04598729</span>

<span class="c1"># Global risk on individual level</span>
<span class="kp">print</span><span class="p">(</span>sdcCombined<span class="p">,</span> <span class="s">&#39;risk&#39;</span><span class="p">)</span>
<span class="c1">## Risk measures:</span>
<span class="c1">##</span>
<span class="c1">## Number of observations with higher risk than the main part of the data: 0</span>
<span class="c1">## Expected number of re-identifications: 1.69 (0.02 %)</span>
<span class="c1">##</span>
<span class="c1">## Information on hierarchical risk:</span>
<span class="c1">## Expected number of re-identifications: 9.57 (0.10 %)</span>
<span class="c1">## ---------------------------------------------------------------------------</span>

<span class="c1"># Number of observation with relatively high risk</span>
<span class="kp">dim</span><span class="p">(</span>fileCombined<span class="p">[</span>sdcCombined<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span> <span class="s">&quot;hier_risk&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="m">0.01</span><span class="p">,])</span>
<span class="c1">## [1] 24 44</span>

<span class="c1"># Highest individual risk</span>
<span class="kp">max</span><span class="p">(</span>sdcCombined<span class="o">@</span>risk<span class="o">$</span>individual<span class="p">[,</span> <span class="s">&quot;hier_risk&quot;</span><span class="p">])</span>
<span class="c1">## [1] 0.01169091</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="step-7b-assessing-utility-measures-individual-level">
<h3>Step 7b: Assessing utility measures (individual level)<a class="headerlink" href="#step-7b-assessing-utility-measures-individual-level" title="Permalink to this headline">¶</a></h3>
<p>We evaluate the utility measures as discussed in Step 5 based on the raw
data (before applying any anonymization measures). The results are
presented in Step 10b together with the values after anonymization to
allow for direct comparison.</p>
</div>
<div class="section" id="id12">
<h3>Step 8b: Choice and application of SDC methods (individual level)<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>In this step, we discuss four different techniques used for
anonymization: 1) removing variables from the dataset to be released, 2)
recoding of categorical variables to reduce the level of detail, 3)
local suppression to achieve the required level of <span class="math notranslate nohighlight">\(k\)</span>-anonymity,
4) randomization of the order of the records in the file. Finally, we
discuss some alternative options for treating the household structure in
the dataset.</p>
<p><strong>Removing variables</strong></p>
<p>Additional to the variables removed from the dataset for the SUF release
(see case study 1), we further reduce the number of variables in the
dataset to be released. This is normal practice for PUF releases.
Sensitive or identifying variables are removed, which allows to release
other variables at a more detailed level. In a PUF release, the set of
key variables should be limited.</p>
<p>In our case, we decide to remove at the individual level the variables
“EDYRSCURRAT”, as this variable is too identifying (identifies whether
there are school-going children in the household). We keep the variable
“EDUCY” (highest level of education attended) for information on
education.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As an alternative to removing the variables from the
dataset, one could also set all values to missing. This would allow the
user to see the structure and variables contained in the SUF file.</p>
</div>
<p><strong>Recoding</strong></p>
<p>As noted before, PUF users require a lower level of information and
therefore we can recode the key variables even further to reduce the
disclosure risk. The recoding of variables in case study 1 is not
sufficient for a PUF release. Therefore, we recode most of the
categorical key variables from <a class="reference internal" href="#tab919"><span class="std std-numref">Table 45</span></a> to reduce the risk and number
of necessary suppressions by local suppression. <a class="reference internal" href="#tab924"><span class="std std-numref">Table 50</span></a> gives an
overview of the recodes made. All new categories are formed with the
needs of the data user in mind. <a class="reference internal" href="#code943"><span class="std std-numref">Listing 97</span></a> shows how to do this in <em>R</em>
and also shows value labels and the univariate tabulations of these
variables before and after recoding.</p>
<span id="tab924"></span><table border="1" class="colwidths-auto docutils align-center" id="id39">
<caption><span class="caption-number">Table 50 </span><span class="caption-text">Overview of recodes of categorical variables at individual level</span><a class="headerlink" href="#id39" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Variable</th>
<th class="head">Recoding</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>REL (relation to household head)</td>
<td>recode ‘Father/Mother’, ‘
Grandchild’, ‘Son/Daughter in
law’, ‘Other relative’ to ‘Other
relative’ and recode ‘Domestic
help’ and ‘Non-relative’ to
‘Other’</td>
</tr>
<tr class="row-odd"><td>MARITAL (marital status)</td>
<td>recode ‘Married monogamous’,
‘Married polygamous’, ’Common
law, union coutumiere, union
libre, living together’ to
‘Married/living together’ and
‘Divorced/Separated’ and
‘Widowed’ to
‘Divorced/Separated/Widowed’</td>
</tr>
<tr class="row-even"><td>AGEYRS (age in completed years)</td>
<td>recode values under 15 to 7
(other values have been recoded
for SUF)</td>
</tr>
<tr class="row-odd"><td>EDUCY (highest level of education completed)</td>
<td>recode ‘Completed lower secondary
(or post-primary vocational
education) but less than
completed upper secondary’,
‘Completed upper secondary (or
extended vocational/technical
education)’, ‘Post secondary
technical’ and ‘University and
higher’ to ‘Completed lower
secondary or higher’</td>
</tr>
<tr class="row-even"><td>INDUSTRY1</td>
<td>recode to ‘primary’, ‘secondary’
and ‘tertiary’</td>
</tr>
</tbody>
</table>
<div class="literal-block-wrapper docutils container" id="code943">
<div class="code-block-caption"><span class="caption-number">Listing 97 </span><span class="caption-text">Recoding the categorical and continuous variables</span><a class="headerlink" href="#code943" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Recode REL (relation to household head)</span>
<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>REL<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>
<span class="c1">##</span>
<span class="c1">##    1    2    3    4    5    6    7    8    9 &lt;NA&gt;</span>
<span class="c1">## 1698 1319 4933   52  765   54  817   40   63  327</span>

<span class="c1"># 1 - Head, 2 - Spouse, 3 - Child, 4 - Father/Mother, 5 - Grandchild, 6 - Son/Daughter in law</span>
<span class="c1"># 7 - Other relative, 8 - Domestic help, 9 - Non-relative</span>
sdcCombined <span class="o">&lt;-</span> groupVars<span class="p">(</span>sdcCombined<span class="p">,</span> var <span class="o">=</span> <span class="s">&quot;REL&quot;</span><span class="p">,</span> before <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;4&quot;</span><span class="p">,</span> <span class="s">&quot;5&quot;</span><span class="p">,</span> <span class="s">&quot;6&quot;</span><span class="p">,</span> <span class="s">&quot;7&quot;</span><span class="p">),</span>
                         after <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;7&quot;</span><span class="p">,</span> <span class="s">&quot;7&quot;</span><span class="p">,</span> <span class="s">&quot;7&quot;</span><span class="p">,</span> <span class="s">&quot;7&quot;</span><span class="p">))</span> <span class="c1"># other relative</span>
sdcCombined <span class="o">&lt;-</span> groupVars<span class="p">(</span>sdcCombined<span class="p">,</span> var <span class="o">=</span> <span class="s">&quot;REL&quot;</span><span class="p">,</span> before <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;8&quot;</span><span class="p">,</span> <span class="s">&quot;9&quot;</span><span class="p">),</span>
                         after <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;9&quot;</span><span class="p">,</span> <span class="s">&quot;9&quot;</span><span class="p">))</span> <span class="c1"># other</span>

<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>REL<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>
<span class="c1">##</span>
<span class="c1">##    1    2    3    7    9 &lt;NA&gt;</span>
<span class="c1">## 1698 1319 4933 1688  103  327</span>

<span class="c1"># Recode MARITAL (marital status)</span>
<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>MARITAL<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>

<span class="c1">##</span>
<span class="c1">##    1    2    3    4    5    6 &lt;NA&gt;</span>
<span class="c1">## 3542 2141  415  295  330  329 3016</span>

<span class="c1"># 1 - Never married, 2 - Married monogamous, 3 - Married polygamous,</span>
<span class="c1"># 4 - Common law, union coutumiere, union libre, living together, 5 - Divorced/Separated,</span>
<span class="c1"># 6 - Widowed</span>
sdcCombined <span class="o">&lt;-</span> groupVars<span class="p">(</span>sdcCombined<span class="p">,</span> var <span class="o">=</span> <span class="s">&quot;MARITAL&quot;</span><span class="p">,</span> before <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;4&quot;</span><span class="p">),</span>
                         after <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span> <span class="c1"># married/living together</span>
sdcCombined <span class="o">&lt;-</span> groupVars<span class="p">(</span>sdcCombined<span class="p">,</span> var <span class="o">=</span> <span class="s">&quot;MARITAL&quot;</span><span class="p">,</span> before <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;5&quot;</span><span class="p">,</span> <span class="s">&quot;6&quot;</span><span class="p">),</span>
                         after <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;9&quot;</span><span class="p">,</span> <span class="s">&quot;9&quot;</span><span class="p">))</span> <span class="c1"># divorced/seperated/widowed*</span>

<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>MARITAL<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>
<span class="c1">##</span>
<span class="c1">##    1    2    9 &lt;NA&gt;</span>
<span class="c1">## 3542 2851  659 3016</span>

<span class="c1"># Recode AGEYRS (0-15 years)</span>
<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>
<span class="c1">##</span>
<span class="c1">##    0    1    2    3    4    5    6    7    8    9   10   11   12   13   14</span>
<span class="c1">##  311  367  340  332  260  334  344  297  344  281  336  297  326  299  263</span>
<span class="c1">##   20   30   40   50   60   65 &lt;NA&gt;</span>
<span class="c1">## 1847 1220  889  554  314  325  188</span>

sdcCombined <span class="o">&lt;-</span> groupVars<span class="p">(</span>sdcCombined<span class="p">,</span> var <span class="o">=</span> <span class="s">&quot;AGEYRS&quot;</span><span class="p">,</span>
                         before <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;0&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;4&quot;</span><span class="p">,</span> <span class="s">&quot;5&quot;</span><span class="p">,</span> <span class="s">&quot;6&quot;</span><span class="p">,</span> <span class="s">&quot;7&quot;</span><span class="p">,</span> <span class="s">&quot;8&quot;</span><span class="p">,</span> <span class="s">&quot;9&quot;</span><span class="p">,</span>
                                    <span class="s">&quot;10&quot;</span><span class="p">,</span> <span class="s">&quot;11&quot;</span><span class="p">,</span> <span class="s">&quot;12&quot;</span><span class="p">,</span> <span class="s">&quot;13&quot;</span><span class="p">,</span> <span class="s">&quot;14&quot;</span><span class="p">),</span>
                         after <span class="o">=</span> <span class="kp">rep</span><span class="p">(</span><span class="s">&quot;7&quot;</span><span class="p">,</span> <span class="m">15</span><span class="p">))</span>

<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>AGEYRS<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>
<span class="c1">##</span>
<span class="c1">##    7   20   30   40   50   60   65 &lt;NA&gt;</span>
<span class="c1">## 4731 1847 1220  889  554  314  325  188</span>

sdcCombined <span class="o">&lt;-</span> calcRisks<span class="p">(</span>sdcCombined<span class="p">)</span>
<span class="c1"># Recode EDUCY (highest level of educ compl)</span>
<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>EDUCY<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>
<span class="c1">##</span>
<span class="c1">##    0    1    2    3    4    5    6 &lt;NA&gt;</span>
<span class="c1">## 1582 4755 1062  330  139   46  104 2050</span>

<span class="c1"># 0 - No education, 1 - Pre-school/ Primary not completed,</span>
<span class="c1"># 2 -  Completed primary, but less than completed lower secondary</span>
<span class="c1"># 3 - Completed lower secondary (or post-primary vocational education)</span>
<span class="c1">#     but less than completed upper secondary</span>
<span class="c1"># 4 - Completed upper secondary (or extended vocational/technical education),</span>
<span class="c1"># 5 - Post secondary technical</span>
<span class="c1"># 6 - University and higher</span>
sdcCombined <span class="o">&lt;-</span> groupVars<span class="p">(</span>sdcCombined<span class="p">,</span> var <span class="o">=</span> <span class="s">&quot;EDUCY&quot;</span><span class="p">,</span> before <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;4&quot;</span><span class="p">,</span> <span class="s">&quot;5&quot;</span><span class="p">,</span> <span class="s">&quot;6&quot;</span><span class="p">),</span>
                         after <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span> <span class="c1"># completed lower secondary or higher</span>
<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>EDUCY<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>
<span class="c1">##</span>
<span class="c1">##    0    1    2    3 &lt;NA&gt;</span>
<span class="c1">## 1582 4755 1062  619 2050</span>

<span class="c1"># Recode INDUSTRY1 ()</span>
<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>INDUSTRY1<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>
<span class="c1">##</span>
<span class="c1">##    1    2    3    4    5    6    7    8    9   10 &lt;NA&gt;</span>
<span class="c1">## 5300   16  153    2   93  484   95   17   70  292 3546</span>

<span class="c1"># 1 - Agriculture and Fishing, 2 - Mining, 3 - Manufacturing, 4 -  Electricity and Utilities</span>
<span class="c1"># 5 - Construction, 6 - Commerce, 7 - Transportation, Storage and  Communication, 8 - Financial, Insurance and Real Estate</span>
<span class="c1"># 9 - Services: Public Administration, 10 - Other Services, 11 - Unspecified</span>
sdcCombined <span class="o">&lt;-</span> groupVars<span class="p">(</span>sdcCombined<span class="p">,</span> var <span class="o">=</span> <span class="s">&quot;INDUSTRY1&quot;</span><span class="p">,</span> before <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">),</span>
                         after <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span> <span class="s">&quot;1&quot;</span><span class="p">))</span> <span class="c1"># primary</span>
sdcCombined <span class="o">&lt;-</span> groupVars<span class="p">(</span>sdcCombined<span class="p">,</span> var <span class="o">=</span> <span class="s">&quot;INDUSTRY1&quot;</span><span class="p">,</span> before <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;4&quot;</span><span class="p">,</span> <span class="s">&quot;5&quot;</span><span class="p">),</span>
                         after <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">,</span> <span class="s">&quot;2&quot;</span><span class="p">))</span> <span class="c1"># secondary</span>
sdcCombined <span class="o">&lt;-</span> groupVars<span class="p">(</span>sdcCombined<span class="p">,</span> var <span class="o">=</span> <span class="s">&quot;INDUSTRY1&quot;</span><span class="p">,</span> before <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;6&quot;</span><span class="p">,</span> <span class="s">&quot;7&quot;</span><span class="p">,</span> <span class="s">&quot;8&quot;</span><span class="p">,</span> <span class="s">&quot;9&quot;</span><span class="p">,</span> <span class="s">&quot;10&quot;</span><span class="p">),</span>
                         after <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">,</span> <span class="s">&quot;3&quot;</span><span class="p">))</span> <span class="c1"># tertiary</span>
<span class="kp">table</span><span class="p">(</span>sdcCombined<span class="o">@</span>manipKeyVars<span class="o">$</span>INDUSTRY1<span class="p">,</span> useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>
<span class="c1">##</span>
<span class="c1">##    1    2    3 &lt;NA&gt;</span>
<span class="c1">## 5316  248  958 3546</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Local suppression</strong></p>
<p>The recoding has reduced the risk already considerably. We use local
suppression to achieve the required level of <span class="math notranslate nohighlight">\(k\)</span>-anonymity.
Generally, the required level of <span class="math notranslate nohighlight">\(k\)</span>-anonymity for PUF files is 3
or 5. In this case study, we require 5-anonimity. <a class="reference internal" href="#code944"><span class="std std-numref">Listing 98</span></a> shows the
suppression pattern without specifying an importance vector. All
suppressions are made in the variable “AGEYRS”. This is the variable
with the highest number of different values, and hence considered first
by the algorithm. We try different suppression patterns by specifying
importance vectors, but we decide that the pattern without importance
vector yields the best result. This is also the result with the lowest
total number of suppressions. Less than 1 percent suppression in the age
variable is acceptable. We could reduce this number by further recoding
the variable “AGEYRS”.</p>
<div class="literal-block-wrapper docutils container" id="code944">
<div class="code-block-caption"><span class="caption-number">Listing 98 </span><span class="caption-text">Local suppression to reach 5-anonimity</span><a class="headerlink" href="#code944" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Local suppression without importance vector</span>
sdcCombined <span class="o">&lt;-</span> localSuppression<span class="p">(</span>sdcCombined<span class="p">,</span> k <span class="o">=</span> <span class="m">5</span><span class="p">,</span> importance <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>

<span class="c1"># Number of suppressions per variable</span>
<span class="kp">print</span><span class="p">(</span>sdcCombined<span class="p">,</span> <span class="s">&quot;ls&quot;</span><span class="p">)</span>
<span class="c1">## Local Suppression:</span>
<span class="c1">##     KeyVar | Suppressions (#) | Suppressions (%)</span>
<span class="c1">##     GENDER |                0 |            0.000</span>
<span class="c1">##        REL |                0 |            0.000</span>
<span class="c1">##    MARITAL |                0 |            0.000</span>
<span class="c1">##     AGEYRS |               91 |            0.904</span>
<span class="c1">##      EDUCY |                0 |            0.000</span>
<span class="c1">##  INDUSTRY1 |                0 |            0.000</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Randomization of order of records</strong></p>
<p>The records in the dataset are ordered by region and household ID. There
is a certain geographical order of the households within the regions,
due to the way the households IDs were assigned. Intruders could
reconstruct suppressed values by using this structure. To prevent this,
we randomly reorder the records within the regions. <a class="reference internal" href="#code945"><span class="std std-numref">Listing 99</span></a> shows
how to do this in <em>R</em>. We first count the number of records per region</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some records have their region value suppressed, so we include the count of NAs.</p>
</div>
<p>Subsequently, we draw randomly household IDs, in
such way that the regional division is respected. Finally, we sort the
file by the new, randomized, individual ID (“IDP”). Households with
suppressed values for “REGION” will be last in the reordered file.
Before randomizing the order, we extract the data from the <em>sdcMicro</em>
object “sdcCombined” as shown in <a class="reference internal" href="#code945"><span class="std std-numref">Listing 99</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="code945">
<div class="code-block-caption"><span class="caption-number">Listing 99 </span><span class="caption-text">Randomizing the order of records within regions</span><a class="headerlink" href="#code945" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Randomize order of households dataAnon and recode IDH to random</span>
number <span class="p">(</span>sort file by region<span class="p">)</span>
<span class="kp">set.seed</span><span class="p">(</span><span class="m">97254</span><span class="p">)</span>
<span class="c1"># Sort by region</span>
dataAnon <span class="o">&lt;-</span> dataAnon<span class="p">[</span><span class="kp">order</span><span class="p">(</span>dataAnon<span class="o">$</span>REGION<span class="p">),]</span>

<span class="c1"># Number of households per region</span>
hhperregion <span class="o">&lt;-</span> <span class="kp">table</span><span class="p">(</span>dataAnon<span class="p">[</span><span class="kp">match</span><span class="p">(</span><span class="kp">unique</span><span class="p">(</span>dataAnon<span class="o">$</span>IDH<span class="p">),</span> dataAnon<span class="o">$</span>IDH<span class="p">),</span> <span class="s">&quot;REGION&quot;</span><span class="p">],</span>
                     useNA <span class="o">=</span> <span class="s">&quot;ifany&quot;</span><span class="p">)</span>

<span class="c1"># Randomized IDH (household ID)</span>
randomHHid <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="kp">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span>hhperregion<span class="p">[</span><span class="m">1</span><span class="p">],</span> hhperregion<span class="p">[</span><span class="m">1</span><span class="p">]),</span>
                <span class="kp">unlist</span><span class="p">(</span><span class="kp">lapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="p">(</span><span class="kp">length</span><span class="p">(</span>hhperregion<span class="p">)</span><span class="m">-1</span><span class="p">),</span>
                              <span class="kr">function</span><span class="p">(</span>i<span class="p">){</span><span class="kp">sample</span><span class="p">((</span><span class="kp">sum</span><span class="p">(</span>hhperregion<span class="p">[</span><span class="m">1</span><span class="o">:</span>i<span class="p">])</span> <span class="o">+</span> <span class="m">1</span><span class="p">)</span><span class="o">:</span> <span class="kp">sum</span><span class="p">(</span>hhperregion<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="p">(</span>i<span class="m">+1</span><span class="p">)]),</span> hhperregion<span class="p">[(</span>i<span class="m">+1</span><span class="p">)])})))</span>

dataAnon<span class="o">$</span>IDH <span class="o">&lt;-</span> <span class="kp">rep</span><span class="p">(</span>randomHHid<span class="p">,</span> <span class="kp">table</span><span class="p">(</span>dataAnon<span class="o">$</span>IDH<span class="p">)[</span><span class="kp">match</span><span class="p">(</span><span class="kp">unique</span><span class="p">(</span>dataAnon<span class="o">$</span>IDH<span class="p">),</span>
                                      <span class="kp">as.numeric</span><span class="p">(</span><span class="kp">names</span><span class="p">(</span><span class="kp">table</span><span class="p">(</span>dataAnon<span class="o">$</span>IDH<span class="p">))))])</span>

<span class="c1"># Sort by IDH (and region)</span>
dataAnon <span class="o">&lt;-</span> dataAnon<span class="p">[</span><span class="kp">order</span><span class="p">(</span>dataAnon<span class="o">$</span>IDH<span class="p">),]</span>
</pre></div>
</td></tr></table></div>
</div>
<p><strong>Alternative options for dealing with household structure</strong></p>
<p>In Step 6b we compared the disclosure risk for two cases: one with only
individual level key variables and another with individual level and
household level key variables combined. We decided to use only the
individual level key variables to reduce the computation time and
justified this choice by arguing that intruders cannot use household and
individual level variables simultaneously. This might not always be the
case. Therefore we explore other options to reduce the risk when taking
both individual level and household level variables into account. We
present two options: removing the household structure; and using options
in the local suppression algorithm.</p>
<p><em>Removing household structure</em></p>
<p>We consider the risk emanating from the household structure in the
dataset to be very high. We can remove the hierarchical household
structure completely and treat all variables at the individual level.
This entails, besides removing the household id (“IDH”), also treating
variables that could be used for reconstructing households. These are,
for instance, “REL” (relation to household head), “HHSIZE” (household
size), and any of the household level variables, such as income and
expenditure. However, not all household level variables need to be
treated. For example, “REGION” is a household level variable, but the
probability that this variable leads to the reconstruction of a
household is low. Also, we need to reorder the records in the file, as
they are sorted by households. Note that by removing the household
structure, we interpret all variables as individual level variables for
measuring disclosure risk. This leads to a lower need for recoding and
suppression, since the hierarchical risk disappears. The reason why we
did not opt for this approach is the loss of utility for the user. The
household structure is an important feature of the data, and should be
kept in the PUF file.</p>
<p><em>Using different options for local suppression</em></p>
<p>The long running time is mainly due to the local suppression algorithm.
In the Section <a class="reference external" href="anon_methods.html#Localsuppression">Local suppression</a>
we discuss options to reduce the running time of the
local suppression in case of many key variables. The all-<span class="math notranslate nohighlight">\(m\)</span>
approach reduces the running time by first considering subsets of the
complete set of key variables. This reduces the complexity of the
problem and leads to lower computation times. However, the total number
of suppressions made is likely to be higher. Also, if not explicitly
specified, it is not guaranteed that the required level for
<span class="math notranslate nohighlight">\(k\)</span>-anonymity is automatically achieved on the complete set of key
variables. It is therefore important to check the results.</p>
</div>
<div class="section" id="step-9b-re-measure-risk">
<h3>Step 9b: Re-measure risk<a class="headerlink" href="#step-9b-re-measure-risk" title="Permalink to this headline">¶</a></h3>
<p>We re-evaluate the risk measures selected in Step 6. <a class="reference internal" href="#tab925"><span class="std std-numref">Table 51</span></a> shows
that local suppression, not surprisingly, has reduced the number of
individuals violating 5-anonymity to 0. The global hierarchical risk was
reduced to 0.02%, which corresponds to approximately 2 correct
re-identifications. The highest individual hierarchical
re-identification risk is 0.2%. These risk levels are acceptable for a
PUF release. Furthermore, the recoding has removed any unusual
combinations in the data.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The risk may be underestimated by excluding the household level variables.</p>
</div>
<span id="tab925"></span><table border="1" class="colwidths-auto docutils align-center" id="id40">
<caption><span class="caption-number">Table 51 </span><span class="caption-text">k-anonymity violations</span><a class="headerlink" href="#id40" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">k-anonymity</th>
<th class="head">Number of records violating</th>
<th class="head">Percentage</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2</td>
<td>0</td>
<td>0.0 %</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>0</td>
<td>0.0 %</td>
</tr>
<tr class="row-even"><td>5</td>
<td>0</td>
<td>0.0 %</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="step-10b-re-measure-utility">
<h3>Step 10b: Re-measure utility<a class="headerlink" href="#step-10b-re-measure-utility" title="Permalink to this headline">¶</a></h3>
<p>We compare (cross-)tabulations before and after anonymization, which are
illustrated in the <em>R</em> code to this case study. We note that due to the
recoding in Step 8b, the detail in the variables is reduced. This
reduces the number of necessary suppressions and is acceptable for a
public use file.</p>
</div>
<div class="section" id="id13">
<h3>Step 11: Audit and reporting<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>In the audit step, we check whether the data allow for reproduction of
published figures from the original dataset and relationships between
variables and other data characteristics are preserved in the
anonymization process. In short, we check whether the dataset is valid
for analytical purposes. There are no figures available that were
published from the dataset and need to be reproducible from the
anonymized data.</p>
<p>In Step 2, we explored the data characteristics and relationships
between variables. These data characteristics and relationships have
been mainly preserved, since we took them into account when choosing the
appropriate anonymization methods. Since values of the variable “AGEYRS”
were not perturbed, but only recoded and suppressed, we did not
introduce unlikely combinations, such as a 60-year-old individual
enrolled in primary education. Also, by separating the anonymization
process into two parts, one for household-level variables and one for
individual-level variables, the values of variables measured at the
household level agree for all members of each household.</p>
<p>Furthermore, we drafted two reports, internal and external, on the
anonymization of the case study dataset. The internal report includes
the methods used, the risk before and after anonymization as well as the
reasons for the selected methods and their parameters. The external
report focuses on the changes in the data and the loss in utility. Focus
here should be on the number of suppressions as well as the perturbative
methods (PRAM). This is described in the previous steps.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When creating a PUF, it is inevitable that there will be a loss of
information and it is very important for the users to be aware of these
changes and release them in a report that accompanies the data.</p>
</div>
<p><a class="reference external" href="appendices.html#AppendixC:InternalandExternalReportsforCaseStudies">Appendix C</a>
provides examples of an internal and external report of the
anonymization process of this dataset. Depending on the users and
readers of the reports, the content may differ.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The report() function in sdcMicro is at this point not useful, since this will
only report on the SDC measures in the second case study.</p>
</div>
<p>However, the report should contain the entire process, including the measures applied
in case study 1.</p>
</div>
<div class="section" id="id14">
<h3>Step 12: Data release<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<p>The final step is the release of the anonymized dataset together with
the external report. <a class="reference internal" href="#code946"><span class="std std-numref">Listing 100</span></a> shows how to export the anonymized
dataset as <em>STATA</em> file. The Section <a class="reference external" href="sdcMicro.html#ReadfunctionsinR">Read functions in R</a>
presents functions for exporting files in other data formats.</p>
<div class="literal-block-wrapper docutils container" id="code946">
<div class="code-block-caption"><span class="caption-number">Listing 100 </span><span class="caption-text">Exporting the anonymized PUF file</span><a class="headerlink" href="#code946" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Create STATA file</span>
write.dta<span class="p">(</span>dataframe <span class="o">=</span> dataAnon<span class="p">,</span> file<span class="o">=</span> <span class="s">&#39;Case2DataAnon.dta&#39;</span><span class="p">,</span> convert.dates<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<table class="docutils footnote" frame="void" id="foot71" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Other methods and guidance on treating datasets where household size
is a quasi-identifier are discussed in the Section
<a class="reference external" href="anon_methods.html#Anonymizationofthequasi-identifierhouseholdsize">Anonymization of the quasi-identifier household size</a>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="foot72" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>For illustrative purposes, we only show this evaluation for the
expenditure variables. It can be easily copied for the income
variables. The results are similar.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="foot73" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>To compute the GINI coefficient, bootstrap to construct the
confidence intervals and plot the Lorenz curve we used the <em>R</em>
packages <em>laeken, reldist, bootstrap</em> and <em>ineq</em>.</td></tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="acknowledgements.html" class="btn btn-neutral" title="Acknowledgements" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Thijs Benschop, Cathrine Machingauta, Matthew Welch.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>